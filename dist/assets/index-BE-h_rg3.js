(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function xA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Md={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function RA(){if(P_)return xl;P_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return xl.Fragment=e,xl.jsx=n,xl.jsxs=n,xl}var U_;function IA(){return U_||(U_=1,Md.exports=RA()),Md.exports}var E=IA(),Vd={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function CA(){if(L_)return ke;L_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=R&&k[R]||k["@@iterator"],typeof k=="function"?k:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,K={};function F(k,$,ee){this.props=k,this.context=$,this.refs=K,this.updater=ee||P}F.prototype.isReactComponent={},F.prototype.setState=function(k,$){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,$,"setState")},F.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Q(){}Q.prototype=F.prototype;function oe(k,$,ee){this.props=k,this.context=$,this.refs=K,this.updater=ee||P}var re=oe.prototype=new Q;re.constructor=oe,G(re,F.prototype),re.isPureReactComponent=!0;var he=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function M(k,$,ee,ie,pe,Ee){return ee=Ee.ref,{$$typeof:s,type:k,key:$,ref:ee!==void 0?ee:null,props:Ee}}function S(k,$){return M(k.type,$,void 0,void 0,void 0,k.props)}function A(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function D(k){var $={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ee){return $[ee]})}var N=/\/+/g;function C(k,$){return typeof k=="object"&&k!==null&&k.key!=null?D(""+k.key):$.toString(36)}function I(){}function de(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(I,I):(k.status="pending",k.then(function($){k.status==="pending"&&(k.status="fulfilled",k.value=$)},function($){k.status==="pending"&&(k.status="rejected",k.reason=$)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function we(k,$,ee,ie,pe){var Ee=typeof k;(Ee==="undefined"||Ee==="boolean")&&(k=null);var Se=!1;if(k===null)Se=!0;else switch(Ee){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(k.$$typeof){case s:case e:Se=!0;break;case b:return Se=k._init,we(Se(k._payload),$,ee,ie,pe)}}if(Se)return pe=pe(k),Se=ie===""?"."+C(k,0):ie,he(pe)?(ee="",Se!=null&&(ee=Se.replace(N,"$&/")+"/"),we(pe,$,ee,"",function(On){return On})):pe!=null&&(A(pe)&&(pe=S(pe,ee+(pe.key==null||k&&k.key===pe.key?"":(""+pe.key).replace(N,"$&/")+"/")+Se)),$.push(pe)),1;Se=0;var bt=ie===""?".":ie+":";if(he(k))for(var et=0;et<k.length;et++)ie=k[et],Ee=bt+C(ie,et),Se+=we(ie,$,ee,Ee,pe);else if(et=x(k),typeof et=="function")for(k=et.call(k),et=0;!(ie=k.next()).done;)ie=ie.value,Ee=bt+C(ie,et++),Se+=we(ie,$,ee,Ee,pe);else if(Ee==="object"){if(typeof k.then=="function")return we(de(k),$,ee,ie,pe);throw $=String(k),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Se}function H(k,$,ee){if(k==null)return k;var ie=[],pe=0;return we(k,ie,"","",function(Ee){return $.call(ee,Ee,pe++)}),ie}function Z(k){if(k._status===-1){var $=k._result;$=$(),$.then(function(ee){(k._status===0||k._status===-1)&&(k._status=1,k._result=ee)},function(ee){(k._status===0||k._status===-1)&&(k._status=2,k._result=ee)}),k._status===-1&&(k._status=0,k._result=$)}if(k._status===1)return k._result.default;throw k._result}var se=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function _e(){}return ke.Children={map:H,forEach:function(k,$,ee){H(k,function(){$.apply(this,arguments)},ee)},count:function(k){var $=0;return H(k,function(){$++}),$},toArray:function(k){return H(k,function($){return $})||[]},only:function(k){if(!A(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},ke.Component=F,ke.Fragment=n,ke.Profiler=o,ke.PureComponent=oe,ke.StrictMode=r,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,ke.__COMPILER_RUNTIME={__proto__:null,c:function(k){return le.H.useMemoCache(k)}},ke.cache=function(k){return function(){return k.apply(null,arguments)}},ke.cloneElement=function(k,$,ee){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ie=G({},k.props),pe=k.key,Ee=void 0;if($!=null)for(Se in $.ref!==void 0&&(Ee=void 0),$.key!==void 0&&(pe=""+$.key),$)!fe.call($,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&$.ref===void 0||(ie[Se]=$[Se]);var Se=arguments.length-2;if(Se===1)ie.children=ee;else if(1<Se){for(var bt=Array(Se),et=0;et<Se;et++)bt[et]=arguments[et+2];ie.children=bt}return M(k.type,pe,void 0,void 0,Ee,ie)},ke.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},ke.createElement=function(k,$,ee){var ie,pe={},Ee=null;if($!=null)for(ie in $.key!==void 0&&(Ee=""+$.key),$)fe.call($,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(pe[ie]=$[ie]);var Se=arguments.length-2;if(Se===1)pe.children=ee;else if(1<Se){for(var bt=Array(Se),et=0;et<Se;et++)bt[et]=arguments[et+2];pe.children=bt}if(k&&k.defaultProps)for(ie in Se=k.defaultProps,Se)pe[ie]===void 0&&(pe[ie]=Se[ie]);return M(k,Ee,void 0,void 0,null,pe)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(k){return{$$typeof:m,render:k}},ke.isValidElement=A,ke.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:Z}},ke.memo=function(k,$){return{$$typeof:y,type:k,compare:$===void 0?null:$}},ke.startTransition=function(k){var $=le.T,ee={};le.T=ee;try{var ie=k(),pe=le.S;pe!==null&&pe(ee,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(_e,se)}catch(Ee){se(Ee)}finally{le.T=$}},ke.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},ke.use=function(k){return le.H.use(k)},ke.useActionState=function(k,$,ee){return le.H.useActionState(k,$,ee)},ke.useCallback=function(k,$){return le.H.useCallback(k,$)},ke.useContext=function(k){return le.H.useContext(k)},ke.useDebugValue=function(){},ke.useDeferredValue=function(k,$){return le.H.useDeferredValue(k,$)},ke.useEffect=function(k,$,ee){var ie=le.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(k,$)},ke.useId=function(){return le.H.useId()},ke.useImperativeHandle=function(k,$,ee){return le.H.useImperativeHandle(k,$,ee)},ke.useInsertionEffect=function(k,$){return le.H.useInsertionEffect(k,$)},ke.useLayoutEffect=function(k,$){return le.H.useLayoutEffect(k,$)},ke.useMemo=function(k,$){return le.H.useMemo(k,$)},ke.useOptimistic=function(k,$){return le.H.useOptimistic(k,$)},ke.useReducer=function(k,$,ee){return le.H.useReducer(k,$,ee)},ke.useRef=function(k){return le.H.useRef(k)},ke.useState=function(k){return le.H.useState(k)},ke.useSyncExternalStore=function(k,$,ee){return le.H.useSyncExternalStore(k,$,ee)},ke.useTransition=function(){return le.H.useTransition()},ke.version="19.1.0",ke}var j_;function Sm(){return j_||(j_=1,Vd.exports=CA()),Vd.exports}var ae=Sm();const NA=xA(ae);var Pd={exports:{}},Rl={},Ud={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function DA(){return z_||(z_=1,function(s){function e(H,Z){var se=H.length;H.push(Z);e:for(;0<se;){var _e=se-1>>>1,k=H[_e];if(0<o(k,Z))H[_e]=Z,H[se]=k,se=_e;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],se=H.pop();if(se!==Z){H[0]=se;e:for(var _e=0,k=H.length,$=k>>>1;_e<$;){var ee=2*(_e+1)-1,ie=H[ee],pe=ee+1,Ee=H[pe];if(0>o(ie,se))pe<k&&0>o(Ee,ie)?(H[_e]=Ee,H[pe]=se,_e=pe):(H[_e]=ie,H[ee]=se,_e=ee);else if(pe<k&&0>o(Ee,se))H[_e]=Ee,H[pe]=se,_e=pe;else break e}}return Z}function o(H,Z){var se=H.sortIndex-Z.sortIndex;return se!==0?se:H.id-Z.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var p=[],y=[],b=1,R=null,x=3,P=!1,G=!1,K=!1,F=!1,Q=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function he(H){for(var Z=n(y);Z!==null;){if(Z.callback===null)r(y);else if(Z.startTime<=H)r(y),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=n(y)}}function le(H){if(K=!1,he(H),!G)if(n(p)!==null)G=!0,fe||(fe=!0,C());else{var Z=n(y);Z!==null&&we(le,Z.startTime-H)}}var fe=!1,M=-1,S=5,A=-1;function D(){return F?!0:!(s.unstable_now()-A<S)}function N(){if(F=!1,fe){var H=s.unstable_now();A=H;var Z=!0;try{e:{G=!1,K&&(K=!1,oe(M),M=-1),P=!0;var se=x;try{t:{for(he(H),R=n(p);R!==null&&!(R.expirationTime>H&&D());){var _e=R.callback;if(typeof _e=="function"){R.callback=null,x=R.priorityLevel;var k=_e(R.expirationTime<=H);if(H=s.unstable_now(),typeof k=="function"){R.callback=k,he(H),Z=!0;break t}R===n(p)&&r(p),he(H)}else r(p);R=n(p)}if(R!==null)Z=!0;else{var $=n(y);$!==null&&we(le,$.startTime-H),Z=!1}}break e}finally{R=null,x=se,P=!1}Z=void 0}}finally{Z?C():fe=!1}}}var C;if(typeof re=="function")C=function(){re(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,de=I.port2;I.port1.onmessage=N,C=function(){de.postMessage(null)}}else C=function(){Q(N,0)};function we(H,Z){M=Q(function(){H(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(H){switch(x){case 1:case 2:case 3:var Z=3;break;default:Z=x}var se=x;x=Z;try{return H()}finally{x=se}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=x;x=H;try{return Z()}finally{x=se}},s.unstable_scheduleCallback=function(H,Z,se){var _e=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?_e+se:_e):se=_e,H){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=se+k,H={id:b++,callback:Z,priorityLevel:H,startTime:se,expirationTime:k,sortIndex:-1},se>_e?(H.sortIndex=se,e(y,H),n(p)===null&&H===n(y)&&(K?(oe(M),M=-1):K=!0,we(le,se-_e))):(H.sortIndex=k,e(p,H),G||P||(G=!0,fe||(fe=!0,C()))),H},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(H){var Z=x;return function(){var se=x;x=Z;try{return H.apply(this,arguments)}finally{x=se}}}}(Ld)),Ld}var B_;function OA(){return B_||(B_=1,Ud.exports=DA()),Ud.exports}var jd={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function kA(){if(q_)return nn;q_=1;var s=Sm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,b){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:R==null?null:""+R,children:p,containerInfo:y,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,nn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,b)},nn.flushSync=function(p){var y=f.T,b=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=y,r.p=b,r.d.f()}},nn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},nn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},nn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,R=m(b,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:x,fetchPriority:P}):b==="script"&&r.d.X(p,{crossOrigin:R,integrity:x,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},nn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},nn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,R=m(b,y.crossOrigin);r.d.L(p,b,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},nn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=m(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},nn.requestFormReset=function(p){r.d.r(p)},nn.unstable_batchedUpdates=function(p,y){return p(y)},nn.useFormState=function(p,y,b){return f.H.useFormState(p,y,b)},nn.useFormStatus=function(){return f.H.useHostTransitionStatus()},nn.version="19.1.0",nn}var H_;function MA(){if(H_)return jd.exports;H_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),jd.exports=kA(),jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function VA(){if(F_)return Rl;F_=1;var s=OA(),e=Sm(),n=MA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(r(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,R=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),re=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function C(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function de(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case F:return"Profiler";case K:return"StrictMode";case le:return"Suspense";case fe:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case re:return(t.displayName||"Context")+".Provider";case oe:return(t._context.displayName||"Context")+".Consumer";case he:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return i=t.displayName||null,i!==null?i:de(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return de(t(i))}catch{}}return null}var we=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},_e=[],k=-1;function $(t){return{current:t}}function ee(t){0>k||(t.current=_e[k],_e[k]=null,k--)}function ie(t,i){k++,_e[k]=t.current,t.current=i}var pe=$(null),Ee=$(null),Se=$(null),bt=$(null);function et(t,i){switch(ie(Se,i),ie(Ee,t),ie(pe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?c_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=c_(i),t=h_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(pe),ie(pe,t)}function On(){ee(pe),ee(Ee),ee(Se)}function ue(t){t.memoizedState!==null&&ie(bt,t);var i=pe.current,a=h_(i,t.type);i!==a&&(ie(Ee,t),ie(pe,a))}function Ne(t){Ee.current===t&&(ee(pe),ee(Ee)),bt.current===t&&(ee(bt),bl._currentValue=se)}var Pe=Object.prototype.hasOwnProperty,qe=s.unstable_scheduleCallback,De=s.unstable_cancelCallback,Ct=s.unstable_shouldYield,ls=s.unstable_requestPaint,Nt=s.unstable_now,kn=s.unstable_getCurrentPriorityLevel,lr=s.unstable_ImmediatePriority,us=s.unstable_UserBlockingPriority,cs=s.unstable_NormalPriority,vo=s.unstable_LowPriority,Si=s.unstable_IdlePriority,Eo=s.log,cu=s.unstable_setDisableYieldValue,dt=null,Ze=null;function En(t){if(typeof Eo=="function"&&cu(t),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(dt,t)}catch{}}var en=Math.clz32?Math.clz32:ur,hu=Math.log,Vh=Math.LN2;function ur(t){return t>>>=0,t===0?32:31-(hu(t)/Vh|0)|0}var cr=256,hr=4194304;function Yn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jr(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=Yn(l):(v&=T,v!==0?h=Yn(v):a||(a=T&~t,a!==0&&(h=Yn(a))))):(T=l&~d,T!==0?h=Yn(T):v!==0?h=Yn(v):a||(a=l&~t,a!==0&&(h=Yn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function fr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function bo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function To(){var t=cr;return cr<<=1,(cr&4194048)===0&&(cr=256),t}function Ao(){var t=hr;return hr<<=1,(hr&62914560)===0&&(hr=4194304),t}function xi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ri(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wo(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,z=t.hiddenUpdates;for(a=v&~a;0<a;){var X=31-en(a),te=1<<X;T[X]=0,O[X]=-1;var B=z[X];if(B!==null)for(z[X]=null,X=0;X<B.length;X++){var q=B[X];q!==null&&(q.lane&=-536870913)}a&=~te}l!==0&&ni(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function ni(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-en(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function So(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-en(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function hs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ea(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function fs(){var t=Z.p;return t!==0?t:(t=window.event,t===void 0?32:N_(t.type))}function fu(t,i){var a=Z.p;try{return Z.p=t,i()}finally{Z.p=a}}var ut=Math.random().toString(36).slice(2),Dt="__reactFiber$"+ut,Tt="__reactProps$"+ut,Mn="__reactContainer$"+ut,xo="__reactEvents$"+ut,Ph="__reactListeners$"+ut,ds="__reactHandles$"+ut,du="__reactResources$"+ut,dr="__reactMarker$"+ut;function ms(t){delete t[Dt],delete t[Tt],delete t[xo],delete t[Ph],delete t[ds]}function Ii(t){var i=t[Dt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Mn]||a[Dt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=g_(t);t!==null;){if(a=t[Dt])return a;t=g_(t)}return i}t=a,a=t.parentNode}return null}function ii(t){if(t=t[Dt]||t[Mn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function si(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function ln(t){var i=t[du];return i||(i=t[du]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function yt(t){t[dr]=!0}var Ro=new Set,ta={};function Kn(t,i){Ci(t,i),Ci(t+"Capture",i)}function Ci(t,i){for(ta[t]=i,t=0;t<i.length;t++)Ro.add(i[t])}var mu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gu={},mr={};function pu(t){return Pe.call(mr,t)?!0:Pe.call(gu,t)?!1:mu.test(t)?mr[t]=!0:(gu[t]=!0,!1)}function gs(t,i,a){if(pu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ri(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Gt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var gr,yu;function Ni(t){if(gr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);gr=i&&i[1]||"",yu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+t+yu}var na=!1;function ia(t,i){if(!t||na)return"";na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(q){var B=q}Reflect.construct(t,[],te)}else{try{te.call()}catch(q){B=q}t.call(te.prototype)}}else{try{throw Error()}catch(q){B=q}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var O=v.split(`
`),z=T.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===z.length)for(l=O.length-1,h=z.length-1;1<=l&&0<=h&&O[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==z[h]){var X=`
`+O[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{na=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ni(a):""}function Io(t){switch(t.tag){case 26:case 27:case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return ia(t.type,!1);case 11:return ia(t.type.render,!1);case 1:return ia(t.type,!0);case 31:return Ni("Activity");default:return""}}function sa(t){try{var i="";do i+=Io(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Co(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Uh(t){var i=Co(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ra(t){t._valueTracker||(t._valueTracker=Uh(t))}function No(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Co(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function pr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Lh=/[\n"\\]/g;function At(t){return t.replace(Lh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function bn(t,i,a,l,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+un(i)):t.value!==""+un(i)&&(t.value=""+un(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?ps(t,v,un(i)):a!=null?ps(t,v,un(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+un(T):t.removeAttribute("name")}function yr(t,i,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+un(a):"",i=i!=null?""+un(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function ps(t,i,a){i==="number"&&pr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Di(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+un(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function tt(t,i,a){if(i!=null&&(i=""+un(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+un(a):""}function _r(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(we(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=un(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Vn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _u(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||vr.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Do(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&_u(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&_u(t,d,i[d])}function Oo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function aa(t){return zh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Oi=null;function Pn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ki=null,Mi=null;function ko(t){var i=ii(t);if(i&&(t=i.stateNode)){var a=t[Tt]||null;e:switch(t=i.stateNode,i.type){case"input":if(bn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Tt]||null;if(!h)throw Error(r(90));bn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&No(l)}break e;case"textarea":tt(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Di(t,!!a.multiple,i,!1)}}}var ai=!1;function vu(t,i,a){if(ai)return t(i,a);ai=!0;try{var l=t(i);return l}finally{if(ai=!1,(ki!==null||Mi!==null)&&(fc(),ki&&(i=ki,t=Mi,Mi=ki=null,ko(i),t)))for(i=0;i<t.length;i++)ko(t[i])}}function Er(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Tt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Un=!1;if($n)try{var br={};Object.defineProperty(br,"passive",{get:function(){Un=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{Un=!1}var oi=null,ys=null,Vi=null;function Mo(){if(Vi)return Vi;var t,i=ys,a=i.length,l,h="value"in oi?oi.value:oi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Vi=h.slice(t,1<l?1-l:void 0)}function li(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ui(){return!0}function Vo(){return!1}function jt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ui:Vo,this.isPropagationStopped=Vo,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),i}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=jt($e),Tr=b({},$e,{view:0,detail:0}),Eu=jt(Tr),la,ua,ci,Ar=b({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ci&&(ci&&t.type==="mousemove"?(la=t.screenX-ci.screenX,ua=t.screenY-ci.screenY):ua=la=0,ci=t),la)},movementY:function(t){return"movementY"in t?t.movementY:ua}}),Ln=jt(Ar),bu=b({},Ar,{dataTransfer:0}),Bh=jt(bu),wr=b({},Tr,{relatedTarget:0}),ca=jt(wr),Po=b({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),ha=jt(Po),Tu=b({},$e,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fa=jt(Tu),qh=b({},$e,{data:0}),Uo=jt(qh),Sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=wu[t])?!!i[t]:!1}function xr(){return Lo}var Su=b({},Tr,{key:function(t){if(t.key){var i=Sr[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Au[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(t){return t.type==="keypress"?li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),da=jt(Su),xu=b({},Ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jo=jt(xu),Pi=b({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),Ru=jt(Pi),Iu=b({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=jt(Iu),Nu=b({},Ar,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ma=jt(Nu),cn=b({},$e,{newState:0,oldState:0}),Du=jt(cn),Ou=[9,13,27,32],hi=$n&&"CompositionEvent"in window,c=null;$n&&"documentMode"in document&&(c=document.documentMode);var g=$n&&"TextEvent"in window&&!c,_=$n&&(!hi||c&&8<c&&11>=c),w=" ",L=!1;function Y(t,i){switch(t){case"keyup":return Ou.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var He=!1;function Ot(t,i){switch(t){case"compositionend":return ce(i);case"keypress":return i.which!==32?null:(L=!0,w);case"textInput":return t=i.data,t===w&&L?null:t;default:return null}}function Fe(t,i){if(He)return t==="compositionend"||!hi&&Y(t,i)?(t=Mo(),Vi=ys=oi=null,He=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!zt[t.type]:i==="textarea"}function Ui(t,i,a,l){ki?Mi?Mi.push(l):Mi=[l]:ki=l,i=_c(i,"onChange"),0<i.length&&(a=new oa("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Qt=null,fi=null;function zo(t){r_(t,0)}function ku(t){var i=si(t);if(No(i))return t}function xg(t,i){if(t==="change")return i}var Rg=!1;if($n){var Hh;if($n){var Fh="oninput"in document;if(!Fh){var Ig=document.createElement("div");Ig.setAttribute("oninput","return;"),Fh=typeof Ig.oninput=="function"}Hh=Fh}else Hh=!1;Rg=Hh&&(!document.documentMode||9<document.documentMode)}function Cg(){Qt&&(Qt.detachEvent("onpropertychange",Ng),fi=Qt=null)}function Ng(t){if(t.propertyName==="value"&&ku(fi)){var i=[];Ui(i,fi,t,Pn(t)),vu(zo,i)}}function nT(t,i,a){t==="focusin"?(Cg(),Qt=i,fi=a,Qt.attachEvent("onpropertychange",Ng)):t==="focusout"&&Cg()}function iT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(fi)}function sT(t,i){if(t==="click")return ku(i)}function rT(t,i){if(t==="input"||t==="change")return ku(i)}function aT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Tn=typeof Object.is=="function"?Object.is:aT;function Bo(t,i){if(Tn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Pe.call(i,h)||!Tn(t[h],i[h]))return!1}return!0}function Dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Og(t,i){var a=Dg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dg(a)}}function kg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?kg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=pr(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=pr(t.document)}return i}function Gh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var oT=$n&&"documentMode"in document&&11>=document.documentMode,ga=null,Qh=null,qo=null,Yh=!1;function Vg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yh||ga==null||ga!==pr(l)||(l=ga,"selectionStart"in l&&Gh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),qo&&Bo(qo,l)||(qo=l,l=_c(Qh,"onSelect"),0<l.length&&(i=new oa("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ga)))}function Rr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var pa={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionrun:Rr("Transition","TransitionRun"),transitionstart:Rr("Transition","TransitionStart"),transitioncancel:Rr("Transition","TransitionCancel"),transitionend:Rr("Transition","TransitionEnd")},Kh={},Pg={};$n&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Ir(t){if(Kh[t])return Kh[t];if(!pa[t])return t;var i=pa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pg)return Kh[t]=i[a];return t}var Ug=Ir("animationend"),Lg=Ir("animationiteration"),jg=Ir("animationstart"),lT=Ir("transitionrun"),uT=Ir("transitionstart"),cT=Ir("transitioncancel"),zg=Ir("transitionend"),Bg=new Map,$h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$h.push("scrollEnd");function Xn(t,i){Bg.set(t,i),Kn(i,[t])}var qg=new WeakMap;function jn(t,i){if(typeof t=="object"&&t!==null){var a=qg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:sa(i)},qg.set(t,i),i)}return{value:t,source:i,stack:sa(i)}}var zn=[],ya=0,Xh=0;function Mu(){for(var t=ya,i=Xh=ya=0;i<t;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var h=zn[i];zn[i++]=null;var d=zn[i];if(zn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Hg(a,h,d)}}function Vu(t,i,a,l){zn[ya++]=t,zn[ya++]=i,zn[ya++]=a,zn[ya++]=l,Xh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Zh(t,i,a,l){return Vu(t,i,a,l),Pu(t)}function _a(t,i){return Vu(t,null,null,i),Pu(t)}function Hg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-en(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Pu(t){if(50<dl)throw dl=0,sd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var va={};function hT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,i,a,l){return new hT(t,i,a,l)}function Wh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Li(t,i){var a=t.alternate;return a===null?(a=An(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Fg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Uu(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Wh(t)&&(v=1);else if(typeof t=="string")v=dA(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=An(31,a,i,h),t.elementType=A,t.lanes=d,t;case G:return Cr(a.children,h,d,i);case K:v=8,h|=24;break;case F:return t=An(12,a,i,h|2),t.elementType=F,t.lanes=d,t;case le:return t=An(13,a,i,h),t.elementType=le,t.lanes=d,t;case fe:return t=An(19,a,i,h),t.elementType=fe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:case re:v=10;break e;case oe:v=9;break e;case he:v=11;break e;case M:v=14;break e;case S:v=16,l=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=An(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Cr(t,i,a,l){return t=An(7,t,l,i),t.lanes=a,t}function Jh(t,i,a){return t=An(6,t,null,i),t.lanes=a,t}function ef(t,i,a){return i=An(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ea=[],ba=0,Lu=null,ju=0,Bn=[],qn=0,Nr=null,ji=1,zi="";function Dr(t,i){Ea[ba++]=ju,Ea[ba++]=Lu,Lu=t,ju=i}function Gg(t,i,a){Bn[qn++]=ji,Bn[qn++]=zi,Bn[qn++]=Nr,Nr=t;var l=ji;t=zi;var h=32-en(l)-1;l&=~(1<<h),a+=1;var d=32-en(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,ji=1<<32-en(i)+h|a<<h|l,zi=d+t}else ji=1<<d|a<<h|l,zi=t}function tf(t){t.return!==null&&(Dr(t,1),Gg(t,1,0))}function nf(t){for(;t===Lu;)Lu=Ea[--ba],Ea[ba]=null,ju=Ea[--ba],Ea[ba]=null;for(;t===Nr;)Nr=Bn[--qn],Bn[qn]=null,zi=Bn[--qn],Bn[qn]=null,ji=Bn[--qn],Bn[qn]=null}var hn=null,mt=null,Ke=!1,Or=null,di=!1,sf=Error(r(519));function kr(t){var i=Error(r(418,""));throw Go(jn(i,t)),sf}function Qg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Dt]=t,i[Tt]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<gl.length;a++)je(gl[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),yr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ra(i);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),_r(i,l.value,l.defaultValue,l.children),ra(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||u_(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=vc),i=!0):i=!1,i||kr(t)}function Yg(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 13:di=!1;return;case 27:case 3:di=!0;return;default:hn=hn.return}}function Ho(t){if(t!==hn)return!1;if(!Ke)return Yg(t),Ke=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Ed(t.type,t.memoizedProps)),a=!a),a&&mt&&kr(t),Yg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){mt=Wn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}mt=null}}else i===27?(i=mt,ks(t.type)?(t=wd,wd=null,mt=t):mt=i):mt=hn?Wn(t.stateNode.nextSibling):null;return!0}function Fo(){mt=hn=null,Ke=!1}function Kg(){var t=Or;return t!==null&&(yn===null?yn=t:yn.push.apply(yn,t),Or=null),t}function Go(t){Or===null?Or=[t]:Or.push(t)}var rf=$(null),Mr=null,Bi=null;function _s(t,i,a){ie(rf,i._currentValue),i._currentValue=a}function qi(t){t._currentValue=rf.current,ee(rf)}function af(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function of(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var O=0;O<i.length;O++)if(T.context===i[O]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),af(d.return,a,t),l||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),af(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Qo(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=h.type;Tn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===bt.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(bl):t=[bl])}h=h.return}t!==null&&of(i,t,a,l),i.flags|=262144}function zu(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vr(t){Mr=t,Bi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function tn(t){return $g(Mr,t)}function Bu(t,i){return Mr===null&&Vr(t),$g(t,i)}function $g(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Bi===null){if(t===null)throw Error(r(308));Bi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Bi=Bi.next=i;return a}var fT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},dT=s.unstable_scheduleCallback,mT=s.unstable_NormalPriority,Mt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lf(){return{controller:new fT,data:new Map,refCount:0}}function Yo(t){t.refCount--,t.refCount===0&&dT(mT,function(){t.controller.abort()})}var Ko=null,uf=0,Ta=0,Aa=null;function gT(t,i){if(Ko===null){var a=Ko=[];uf=0,Ta=hd(),Aa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return uf++,i.then(Xg,Xg),i}function Xg(){if(--uf===0&&Ko!==null){Aa!==null&&(Aa.status="fulfilled");var t=Ko;Ko=null,Ta=0,Aa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function pT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Zg=H.S;H.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&gT(t,i),Zg!==null&&Zg(t,i)};var Pr=$(null);function cf(){var t=Pr.current;return t!==null?t:at.pooledCache}function qu(t,i){i===null?ie(Pr,Pr.current):ie(Pr,i.pool)}function Wg(){var t=cf();return t===null?null:{parent:Mt._currentValue,pool:t}}var $o=Error(r(460)),Jg=Error(r(474)),Hu=Error(r(542)),hf={then:function(){}};function ep(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fu(){}function tp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Fu,Fu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ip(t),t;default:if(typeof i.status=="string")i.then(Fu,Fu);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ip(t),t}throw Xo=i,$o}}var Xo=null;function np(){if(Xo===null)throw Error(r(459));var t=Xo;return Xo=null,t}function ip(t){if(t===$o||t===Hu)throw Error(r(483))}var vs=!1;function ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function df(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Es(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function bs(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Pu(t),Hg(t,null,a),i}return Vu(t,l,i,a),Pu(t)}function Zo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,So(t,a)}}function mf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var gf=!1;function Wo(){if(gf){var t=Aa;if(t!==null)throw t}}function Jo(t,i,a,l){gf=!1;var h=t.updateQueue;vs=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var O=T,z=O.next;O.next=null,v===null?d=z:v.next=z,v=O;var X=t.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==v&&(T===null?X.firstBaseUpdate=z:T.next=z,X.lastBaseUpdate=O))}if(d!==null){var te=h.baseState;v=0,X=z=O=null,T=d;do{var B=T.lane&-536870913,q=B!==T.lane;if(q?(Ge&B)===B:(l&B)===B){B!==0&&B===Ta&&(gf=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ie=t,Te=T;B=i;var st=a;switch(Te.tag){case 1:if(Ie=Te.payload,typeof Ie=="function"){te=Ie.call(st,te,B);break e}te=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Te.payload,B=typeof Ie=="function"?Ie.call(st,te,B):Ie,B==null)break e;te=b({},te,B);break e;case 2:vs=!0}}B=T.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(z=X=q,O=te):X=X.next=q,v|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);X===null&&(O=te),h.baseState=O,h.firstBaseUpdate=z,h.lastBaseUpdate=X,d===null&&(h.shared.lanes=0),Cs|=v,t.lanes=v,t.memoizedState=te}}function sp(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function rp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)sp(a[t],i)}var wa=$(null),Gu=$(0);function ap(t,i){t=$i,ie(Gu,t),ie(wa,i),$i=t|i.baseLanes}function pf(){ie(Gu,$i),ie(wa,wa.current)}function yf(){$i=Gu.current,ee(wa),ee(Gu)}var Ts=0,Me=null,nt=null,wt=null,Qu=!1,Sa=!1,Ur=!1,Yu=0,el=0,xa=null,yT=0;function _t(){throw Error(r(321))}function _f(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Tn(t[a],i[a]))return!1;return!0}function vf(t,i,a,l,h,d){return Ts=d,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=t===null||t.memoizedState===null?Hp:Fp,Ur=!1,d=a(l,h),Ur=!1,Sa&&(d=lp(i,a,l,h)),op(t),d}function op(t){H.H=Ju;var i=nt!==null&&nt.next!==null;if(Ts=0,wt=nt=Me=null,Qu=!1,el=0,xa=null,i)throw Error(r(300));t===null||Bt||(t=t.dependencies,t!==null&&zu(t)&&(Bt=!0))}function lp(t,i,a,l){Me=t;var h=0;do{if(Sa&&(xa=null),el=0,Sa=!1,25<=h)throw Error(r(301));if(h+=1,wt=nt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=wT,d=i(a,l)}while(Sa);return d}function _T(){var t=H.H,i=t.useState()[0];return i=typeof i.then=="function"?tl(i):i,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(Me.flags|=1024),i}function Ef(){var t=Yu!==0;return Yu=0,t}function bf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Tf(t){if(Qu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Qu=!1}Ts=0,wt=nt=Me=null,Sa=!1,el=Yu=0,xa=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Me.memoizedState=wt=t:wt=wt.next=t,wt}function St(){if(nt===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var i=wt===null?Me.memoizedState:wt.next;if(i!==null)wt=i,nt=t;else{if(t===null)throw Me.alternate===null?Error(r(467)):Error(r(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},wt===null?Me.memoizedState=wt=t:wt=wt.next=t}return wt}function Af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(t){var i=el;return el+=1,xa===null&&(xa=[]),t=tp(xa,t,i),i=Me,(wt===null?i.memoizedState:wt.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Hp:Fp),t}function Ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return tl(t);if(t.$$typeof===re)return tn(t)}throw Error(r(438,String(t)))}function wf(t){var i=null,a=Me.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Af(),Me.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=D;return i.index++,a}function Hi(t,i){return typeof i=="function"?i(t):i}function $u(t){var i=St();return Sf(i,nt,t)}function Sf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=v=null,O=null,z=i,X=!1;do{var te=z.lane&-536870913;if(te!==z.lane?(Ge&te)===te:(Ts&te)===te){var B=z.revertLane;if(B===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),te===Ta&&(X=!0);else if((Ts&B)===B){z=z.next,B===Ta&&(X=!0);continue}else te={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},O===null?(T=O=te,v=d):O=O.next=te,Me.lanes|=B,Cs|=B;te=z.action,Ur&&a(d,te),d=z.hasEagerState?z.eagerState:a(d,te)}else B={lane:te,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},O===null?(T=O=B,v=d):O=O.next=B,Me.lanes|=te,Cs|=te;z=z.next}while(z!==null&&z!==i);if(O===null?v=d:O.next=T,!Tn(d,t.memoizedState)&&(Bt=!0,X&&(a=Aa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=O,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function xf(t){var i=St(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);Tn(d,i.memoizedState)||(Bt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function up(t,i,a){var l=Me,h=St(),d=Ke;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!Tn((nt||h).memoizedState,a);v&&(h.memoizedState=a,Bt=!0),h=h.queue;var T=fp.bind(null,l,h,t);if(nl(2048,8,T,[t]),h.getSnapshot!==i||v||wt!==null&&wt.memoizedState.tag&1){if(l.flags|=2048,Ra(9,Xu(),hp.bind(null,l,h,a,i),null),at===null)throw Error(r(349));d||(Ts&124)!==0||cp(l,i,a)}return a}function cp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Me.updateQueue,i===null?(i=Af(),Me.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function hp(t,i,a,l){i.value=a,i.getSnapshot=l,dp(i)&&mp(t)}function fp(t,i,a){return a(function(){dp(i)&&mp(t)})}function dp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Tn(t,a)}catch{return!0}}function mp(t){var i=_a(t,2);i!==null&&In(i,t,2)}function Rf(t){var i=gn();if(typeof t=="function"){var a=t;if(t=a(),Ur){En(!0);try{a()}finally{En(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:t},i}function gp(t,i,a,l){return t.baseState=a,Sf(t,nt,typeof l=="function"?l:Hi)}function vT(t,i,a,l,h){if(Wu(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,pp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function pp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=H.T,v={};H.T=v;try{var T=a(h,l),O=H.S;O!==null&&O(v,T),yp(t,i,T)}catch(z){If(t,i,z)}finally{H.T=d}}else try{d=a(h,l),yp(t,i,d)}catch(z){If(t,i,z)}}function yp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){_p(t,i,l)},function(l){return If(t,i,l)}):_p(t,i,a)}function _p(t,i,a){i.status="fulfilled",i.value=a,vp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,pp(t,a)))}function If(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,vp(i),i=i.next;while(i!==l)}t.action=null}function vp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Ep(t,i){return i}function bp(t,i){if(Ke){var a=at.formState;if(a!==null){e:{var l=Me;if(Ke){if(mt){t:{for(var h=mt,d=di;h.nodeType!==8;){if(!d){h=null;break t}if(h=Wn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){mt=Wn(h.nextSibling),l=h.data==="F!";break e}}kr(l)}l=!1}l&&(i=a[0])}}return a=gn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ep,lastRenderedState:i},a.queue=l,a=zp.bind(null,Me,l),l.dispatch=a,l=Rf(!1),d=kf.bind(null,Me,!1,l.queue),l=gn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=vT.bind(null,Me,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Tp(t){var i=St();return Ap(i,nt,t)}function Ap(t,i,a){if(i=Sf(t,i,Ep)[0],t=$u(Hi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=tl(i)}catch(v){throw v===$o?Hu:v}else l=i;i=St();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Me.flags|=2048,Ra(9,Xu(),ET.bind(null,h,a),null)),[l,d,t]}function ET(t,i){t.action=i}function wp(t){var i=St(),a=nt;if(a!==null)return Ap(i,a,t);St(),i=i.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ra(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Me.updateQueue,i===null&&(i=Af(),Me.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Xu(){return{destroy:void 0,resource:void 0}}function Sp(){return St().memoizedState}function Zu(t,i,a,l){var h=gn();l=l===void 0?null:l,Me.flags|=t,h.memoizedState=Ra(1|i,Xu(),a,l)}function nl(t,i,a,l){var h=St();l=l===void 0?null:l;var d=h.memoizedState.inst;nt!==null&&l!==null&&_f(l,nt.memoizedState.deps)?h.memoizedState=Ra(i,d,a,l):(Me.flags|=t,h.memoizedState=Ra(1|i,d,a,l))}function xp(t,i){Zu(8390656,8,t,i)}function Rp(t,i){nl(2048,8,t,i)}function Ip(t,i){return nl(4,2,t,i)}function Cp(t,i){return nl(4,4,t,i)}function Np(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Dp(t,i,a){a=a!=null?a.concat([t]):null,nl(4,4,Np.bind(null,i,t),a)}function Cf(){}function Op(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&_f(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function kp(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&_f(i,l[1]))return l[0];if(l=t(),Ur){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,i],l}function Nf(t,i,a){return a===void 0||(Ts&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Py(),Me.lanes|=t,Cs|=t,a)}function Mp(t,i,a,l){return Tn(a,i)?a:wa.current!==null?(t=Nf(t,a,l),Tn(t,i)||(Bt=!0),t):(Ts&42)===0?(Bt=!0,t.memoizedState=a):(t=Py(),Me.lanes|=t,Cs|=t,i)}function Vp(t,i,a,l,h){var d=Z.p;Z.p=d!==0&&8>d?d:8;var v=H.T,T={};H.T=T,kf(t,!1,i,a);try{var O=h(),z=H.S;if(z!==null&&z(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=pT(O,l);il(t,i,X,Rn(t))}else il(t,i,l,Rn(t))}catch(te){il(t,i,{then:function(){},status:"rejected",reason:te},Rn())}finally{Z.p=d,H.T=v}}function bT(){}function Df(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=Pp(t).queue;Vp(t,h,i,se,a===null?bT:function(){return Up(t),a(l)})}function Pp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:se},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Up(t){var i=Pp(t).next.queue;il(t,i,{},Rn())}function Of(){return tn(bl)}function Lp(){return St().memoizedState}function jp(){return St().memoizedState}function TT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();t=Es(a);var l=bs(i,t,a);l!==null&&(In(l,i,a),Zo(l,i,a)),i={cache:lf()},t.payload=i;return}i=i.return}}function AT(t,i,a){var l=Rn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Wu(t)?Bp(i,a):(a=Zh(t,i,a,l),a!==null&&(In(a,t,l),qp(a,i,l)))}function zp(t,i,a){var l=Rn();il(t,i,a,l)}function il(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wu(t))Bp(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,Tn(T,v))return Vu(t,i,h,0),at===null&&Mu(),!1}catch{}finally{}if(a=Zh(t,i,h,l),a!==null)return In(a,t,l),qp(a,i,l),!0}return!1}function kf(t,i,a,l){if(l={lane:2,revertLane:hd(),action:l,hasEagerState:!1,eagerState:null,next:null},Wu(t)){if(i)throw Error(r(479))}else i=Zh(t,a,l,2),i!==null&&In(i,t,2)}function Wu(t){var i=t.alternate;return t===Me||i!==null&&i===Me}function Bp(t,i){Sa=Qu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function qp(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,So(t,a)}}var Ju={readContext:tn,use:Ku,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},Hp={readContext:tn,use:Ku,useCallback:function(t,i){return gn().memoizedState=[t,i===void 0?null:i],t},useContext:tn,useEffect:xp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Zu(4194308,4,Np.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Zu(4194308,4,t,i)},useInsertionEffect:function(t,i){Zu(4,2,t,i)},useMemo:function(t,i){var a=gn();i=i===void 0?null:i;var l=t();if(Ur){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=gn();if(a!==void 0){var h=a(i);if(Ur){En(!0);try{a(i)}finally{En(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=AT.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var i=gn();return t={current:t},i.memoizedState=t},useState:function(t){t=Rf(t);var i=t.queue,a=zp.bind(null,Me,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Cf,useDeferredValue:function(t,i){var a=gn();return Nf(a,t,i)},useTransition:function(){var t=Rf(!1);return t=Vp.bind(null,Me,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Me,h=gn();if(Ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),at===null)throw Error(r(349));(Ge&124)!==0||cp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,xp(fp.bind(null,l,d,t),[t]),l.flags|=2048,Ra(9,Xu(),hp.bind(null,l,d,a,i),null),a},useId:function(){var t=gn(),i=at.identifierPrefix;if(Ke){var a=zi,l=ji;a=(l&~(1<<32-en(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Yu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=yT++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Of,useFormState:bp,useActionState:bp,useOptimistic:function(t){var i=gn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=kf.bind(null,Me,!0,a),a.dispatch=i,[t,i]},useMemoCache:wf,useCacheRefresh:function(){return gn().memoizedState=TT.bind(null,Me)}},Fp={readContext:tn,use:Ku,useCallback:Op,useContext:tn,useEffect:Rp,useImperativeHandle:Dp,useInsertionEffect:Ip,useLayoutEffect:Cp,useMemo:kp,useReducer:$u,useRef:Sp,useState:function(){return $u(Hi)},useDebugValue:Cf,useDeferredValue:function(t,i){var a=St();return Mp(a,nt.memoizedState,t,i)},useTransition:function(){var t=$u(Hi)[0],i=St().memoizedState;return[typeof t=="boolean"?t:tl(t),i]},useSyncExternalStore:up,useId:Lp,useHostTransitionStatus:Of,useFormState:Tp,useActionState:Tp,useOptimistic:function(t,i){var a=St();return gp(a,nt,t,i)},useMemoCache:wf,useCacheRefresh:jp},wT={readContext:tn,use:Ku,useCallback:Op,useContext:tn,useEffect:Rp,useImperativeHandle:Dp,useInsertionEffect:Ip,useLayoutEffect:Cp,useMemo:kp,useReducer:xf,useRef:Sp,useState:function(){return xf(Hi)},useDebugValue:Cf,useDeferredValue:function(t,i){var a=St();return nt===null?Nf(a,t,i):Mp(a,nt.memoizedState,t,i)},useTransition:function(){var t=xf(Hi)[0],i=St().memoizedState;return[typeof t=="boolean"?t:tl(t),i]},useSyncExternalStore:up,useId:Lp,useHostTransitionStatus:Of,useFormState:wp,useActionState:wp,useOptimistic:function(t,i){var a=St();return nt!==null?gp(a,nt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:wf,useCacheRefresh:jp},Ia=null,sl=0;function ec(t){var i=sl;return sl+=1,Ia===null&&(Ia=[]),tp(Ia,t,i)}function rl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function tc(t,i){throw i.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Gp(t){var i=t._init;return i(t._payload)}function Qp(t){function i(U,V){if(t){var j=U.deletions;j===null?(U.deletions=[V],U.flags|=16):j.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function h(U,V){return U=Li(U,V),U.index=0,U.sibling=null,U}function d(U,V,j){return U.index=j,t?(j=U.alternate,j!==null?(j=j.index,j<V?(U.flags|=67108866,V):j):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,V,j,W){return V===null||V.tag!==6?(V=Jh(j,U.mode,W),V.return=U,V):(V=h(V,j),V.return=U,V)}function O(U,V,j,W){var ye=j.type;return ye===G?X(U,V,j.props.children,W,j.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&Gp(ye)===V.type)?(V=h(V,j.props),rl(V,j),V.return=U,V):(V=Uu(j.type,j.key,j.props,null,U.mode,W),rl(V,j),V.return=U,V)}function z(U,V,j,W){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=ef(j,U.mode,W),V.return=U,V):(V=h(V,j.children||[]),V.return=U,V)}function X(U,V,j,W,ye){return V===null||V.tag!==7?(V=Cr(j,U.mode,W,ye),V.return=U,V):(V=h(V,j),V.return=U,V)}function te(U,V,j){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Jh(""+V,U.mode,j),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return j=Uu(V.type,V.key,V.props,null,U.mode,j),rl(j,V),j.return=U,j;case P:return V=ef(V,U.mode,j),V.return=U,V;case S:var W=V._init;return V=W(V._payload),te(U,V,j)}if(we(V)||C(V))return V=Cr(V,U.mode,j,null),V.return=U,V;if(typeof V.then=="function")return te(U,ec(V),j);if(V.$$typeof===re)return te(U,Bu(U,V),j);tc(U,V)}return null}function B(U,V,j,W){var ye=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ye!==null?null:T(U,V,""+j,W);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case x:return j.key===ye?O(U,V,j,W):null;case P:return j.key===ye?z(U,V,j,W):null;case S:return ye=j._init,j=ye(j._payload),B(U,V,j,W)}if(we(j)||C(j))return ye!==null?null:X(U,V,j,W,null);if(typeof j.then=="function")return B(U,V,ec(j),W);if(j.$$typeof===re)return B(U,V,Bu(U,j),W);tc(U,j)}return null}function q(U,V,j,W,ye){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return U=U.get(j)||null,T(V,U,""+W,ye);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return U=U.get(W.key===null?j:W.key)||null,O(V,U,W,ye);case P:return U=U.get(W.key===null?j:W.key)||null,z(V,U,W,ye);case S:var Ue=W._init;return W=Ue(W._payload),q(U,V,j,W,ye)}if(we(W)||C(W))return U=U.get(j)||null,X(V,U,W,ye,null);if(typeof W.then=="function")return q(U,V,j,ec(W),ye);if(W.$$typeof===re)return q(U,V,j,Bu(V,W),ye);tc(V,W)}return null}function Ie(U,V,j,W){for(var ye=null,Ue=null,ve=V,Ae=V=0,Ht=null;ve!==null&&Ae<j.length;Ae++){ve.index>Ae?(Ht=ve,ve=null):Ht=ve.sibling;var Ye=B(U,ve,j[Ae],W);if(Ye===null){ve===null&&(ve=Ht);break}t&&ve&&Ye.alternate===null&&i(U,ve),V=d(Ye,V,Ae),Ue===null?ye=Ye:Ue.sibling=Ye,Ue=Ye,ve=Ht}if(Ae===j.length)return a(U,ve),Ke&&Dr(U,Ae),ye;if(ve===null){for(;Ae<j.length;Ae++)ve=te(U,j[Ae],W),ve!==null&&(V=d(ve,V,Ae),Ue===null?ye=ve:Ue.sibling=ve,Ue=ve);return Ke&&Dr(U,Ae),ye}for(ve=l(ve);Ae<j.length;Ae++)Ht=q(ve,U,Ae,j[Ae],W),Ht!==null&&(t&&Ht.alternate!==null&&ve.delete(Ht.key===null?Ae:Ht.key),V=d(Ht,V,Ae),Ue===null?ye=Ht:Ue.sibling=Ht,Ue=Ht);return t&&ve.forEach(function(Ls){return i(U,Ls)}),Ke&&Dr(U,Ae),ye}function Te(U,V,j,W){if(j==null)throw Error(r(151));for(var ye=null,Ue=null,ve=V,Ae=V=0,Ht=null,Ye=j.next();ve!==null&&!Ye.done;Ae++,Ye=j.next()){ve.index>Ae?(Ht=ve,ve=null):Ht=ve.sibling;var Ls=B(U,ve,Ye.value,W);if(Ls===null){ve===null&&(ve=Ht);break}t&&ve&&Ls.alternate===null&&i(U,ve),V=d(Ls,V,Ae),Ue===null?ye=Ls:Ue.sibling=Ls,Ue=Ls,ve=Ht}if(Ye.done)return a(U,ve),Ke&&Dr(U,Ae),ye;if(ve===null){for(;!Ye.done;Ae++,Ye=j.next())Ye=te(U,Ye.value,W),Ye!==null&&(V=d(Ye,V,Ae),Ue===null?ye=Ye:Ue.sibling=Ye,Ue=Ye);return Ke&&Dr(U,Ae),ye}for(ve=l(ve);!Ye.done;Ae++,Ye=j.next())Ye=q(ve,U,Ae,Ye.value,W),Ye!==null&&(t&&Ye.alternate!==null&&ve.delete(Ye.key===null?Ae:Ye.key),V=d(Ye,V,Ae),Ue===null?ye=Ye:Ue.sibling=Ye,Ue=Ye);return t&&ve.forEach(function(SA){return i(U,SA)}),Ke&&Dr(U,Ae),ye}function st(U,V,j,W){if(typeof j=="object"&&j!==null&&j.type===G&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case x:e:{for(var ye=j.key;V!==null;){if(V.key===ye){if(ye=j.type,ye===G){if(V.tag===7){a(U,V.sibling),W=h(V,j.props.children),W.return=U,U=W;break e}}else if(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&Gp(ye)===V.type){a(U,V.sibling),W=h(V,j.props),rl(W,j),W.return=U,U=W;break e}a(U,V);break}else i(U,V);V=V.sibling}j.type===G?(W=Cr(j.props.children,U.mode,W,j.key),W.return=U,U=W):(W=Uu(j.type,j.key,j.props,null,U.mode,W),rl(W,j),W.return=U,U=W)}return v(U);case P:e:{for(ye=j.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(U,V.sibling),W=h(V,j.children||[]),W.return=U,U=W;break e}else{a(U,V);break}else i(U,V);V=V.sibling}W=ef(j,U.mode,W),W.return=U,U=W}return v(U);case S:return ye=j._init,j=ye(j._payload),st(U,V,j,W)}if(we(j))return Ie(U,V,j,W);if(C(j)){if(ye=C(j),typeof ye!="function")throw Error(r(150));return j=ye.call(j),Te(U,V,j,W)}if(typeof j.then=="function")return st(U,V,ec(j),W);if(j.$$typeof===re)return st(U,V,Bu(U,j),W);tc(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,V!==null&&V.tag===6?(a(U,V.sibling),W=h(V,j),W.return=U,U=W):(a(U,V),W=Jh(j,U.mode,W),W.return=U,U=W),v(U)):a(U,V)}return function(U,V,j,W){try{sl=0;var ye=st(U,V,j,W);return Ia=null,ye}catch(ve){if(ve===$o||ve===Hu)throw ve;var Ue=An(29,ve,null,U.mode);return Ue.lanes=W,Ue.return=U,Ue}finally{}}}var Ca=Qp(!0),Yp=Qp(!1),Hn=$(null),mi=null;function As(t){var i=t.alternate;ie(Vt,Vt.current&1),ie(Hn,t),mi===null&&(i===null||wa.current!==null||i.memoizedState!==null)&&(mi=t)}function Kp(t){if(t.tag===22){if(ie(Vt,Vt.current),ie(Hn,t),mi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(mi=t)}}else ws()}function ws(){ie(Vt,Vt.current),ie(Hn,Hn.current)}function Fi(t){ee(Hn),mi===t&&(mi=null),ee(Vt)}var Vt=$(0);function nc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ad(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Mf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Vf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Rn(),h=Es(l);h.payload=i,a!=null&&(h.callback=a),i=bs(t,h,l),i!==null&&(In(i,t,l),Zo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Rn(),h=Es(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=bs(t,h,l),i!==null&&(In(i,t,l),Zo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Rn(),l=Es(a);l.tag=2,i!=null&&(l.callback=i),i=bs(t,l,a),i!==null&&(In(i,t,a),Zo(i,t,a))}};function $p(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Bo(a,l)||!Bo(h,d):!0}function Xp(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Vf.enqueueReplaceState(i,i.state,null)}function Lr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var ic=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Zp(t){ic(t)}function Wp(t){console.error(t)}function Jp(t){ic(t)}function sc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function ey(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Pf(t,i,a){return a=Es(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(t,i)},a}function ty(t){return t=Es(t),t.tag=3,t}function ny(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){ey(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){ey(i,a,l),typeof h!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function ST(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Qo(i,a,h,!0),a=Hn.current,a!==null){switch(a.tag){case 13:return mi===null?ad():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===hf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),ld(t,l,h)),!1;case 22:return a.flags|=65536,l===hf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),ld(t,l,h)),!1}throw Error(r(435,a.tag))}return ld(t,l,h),ad(),!1}if(Ke)return i=Hn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==sf&&(t=Error(r(422),{cause:l}),Go(jn(t,a)))):(l!==sf&&(i=Error(r(423),{cause:l}),Go(jn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=jn(l,a),h=Pf(t.stateNode,l,h),mf(t,h),gt!==4&&(gt=2)),!1;var d=Error(r(520),{cause:l});if(d=jn(d,a),fl===null?fl=[d]:fl.push(d),gt!==4&&(gt=2),i===null)return!0;l=jn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Pf(a.stateNode,l,t),mf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ns===null||!Ns.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ty(h),ny(h,t,a,l),mf(a,h),!1}a=a.return}while(a!==null);return!1}var iy=Error(r(461)),Bt=!1;function Yt(t,i,a,l){i.child=t===null?Yp(i,null,a,l):Ca(i,t.child,a,l)}function sy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Vr(i),l=vf(t,i,a,v,d,h),T=Ef(),t!==null&&!Bt?(bf(t,i,h),Gi(t,i,h)):(Ke&&T&&tf(i),i.flags|=1,Yt(t,i,l,h),i.child)}function ry(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Wh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ay(t,i,d,l,h)):(t=Uu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Ff(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Bo,a(v,l)&&t.ref===i.ref)return Gi(t,i,h)}return i.flags|=1,t=Li(d,l),t.ref=i.ref,t.return=i,i.child=t}function ay(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Bo(d,l)&&t.ref===i.ref)if(Bt=!1,i.pendingProps=l=d,Ff(t,h))(t.flags&131072)!==0&&(Bt=!0);else return i.lanes=t.lanes,Gi(t,i,h)}return Uf(t,i,a,l,h)}function oy(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return ly(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&qu(i,d!==null?d.cachePool:null),d!==null?ap(i,d):pf(),Kp(i);else return i.lanes=i.childLanes=536870912,ly(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(qu(i,d.cachePool),ap(i,d),ws(),i.memoizedState=null):(t!==null&&qu(i,null),pf(),ws());return Yt(t,i,h,a),i.child}function ly(t,i,a,l){var h=cf();return h=h===null?null:{parent:Mt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&qu(i,null),pf(),Kp(i),t!==null&&Qo(t,i,l,!0),null}function rc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Uf(t,i,a,l,h){return Vr(i),a=vf(t,i,a,l,void 0,h),l=Ef(),t!==null&&!Bt?(bf(t,i,h),Gi(t,i,h)):(Ke&&l&&tf(i),i.flags|=1,Yt(t,i,a,h),i.child)}function uy(t,i,a,l,h,d){return Vr(i),i.updateQueue=null,a=lp(i,l,a,h),op(t),l=Ef(),t!==null&&!Bt?(bf(t,i,d),Gi(t,i,d)):(Ke&&l&&tf(i),i.flags|=1,Yt(t,i,a,d),i.child)}function cy(t,i,a,l,h){if(Vr(i),i.stateNode===null){var d=va,v=a.contextType;typeof v=="object"&&v!==null&&(d=tn(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Vf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},ff(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?tn(v):va,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Mf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Vf.enqueueReplaceState(d,d.state,null),Jo(i,l,d,h),Wo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,O=Lr(a,T);d.props=O;var z=d.context,X=a.contextType;v=va,typeof X=="object"&&X!==null&&(v=tn(X));var te=a.getDerivedStateFromProps;X=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||z!==v)&&Xp(i,d,l,v),vs=!1;var B=i.memoizedState;d.state=B,Jo(i,l,d,h),Wo(),z=i.memoizedState,T||B!==z||vs?(typeof te=="function"&&(Mf(i,a,te,l),z=i.memoizedState),(O=vs||$p(i,a,O,l,B,z,v))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=v,l=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,df(t,i),v=i.memoizedProps,X=Lr(a,v),d.props=X,te=i.pendingProps,B=d.context,z=a.contextType,O=va,typeof z=="object"&&z!==null&&(O=tn(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==te||B!==O)&&Xp(i,d,l,O),vs=!1,B=i.memoizedState,d.state=B,Jo(i,l,d,h),Wo();var q=i.memoizedState;v!==te||B!==q||vs||t!==null&&t.dependencies!==null&&zu(t.dependencies)?(typeof T=="function"&&(Mf(i,a,T,l),q=i.memoizedState),(X=vs||$p(i,a,X,l,B,q,O)||t!==null&&t.dependencies!==null&&zu(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,q,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,q,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=O,l=X):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,rc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Ca(i,t.child,null,h),i.child=Ca(i,null,a,h)):Yt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Gi(t,i,h),t}function hy(t,i,a,l){return Fo(),i.flags|=256,Yt(t,i,a,l),i.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jf(t){return{baseLanes:t,cachePool:Wg()}}function zf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Fn),t}function fy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ke){if(h?As(i):ws(),Ke){var T=mt,O;if(O=T){e:{for(O=T,T=di;O.nodeType!==8;){if(!T){T=null;break e}if(O=Wn(O.nextSibling),O===null){T=null;break e}}T=O}T!==null?(i.memoizedState={dehydrated:T,treeContext:Nr!==null?{id:ji,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},O=An(18,null,null,0),O.stateNode=T,O.return=i,i.child=O,hn=i,mt=null,O=!0):O=!1}O||kr(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Ad(T)?i.lanes=32:i.lanes=536870912,null;Fi(i)}return T=l.children,l=l.fallback,h?(ws(),h=i.mode,T=ac({mode:"hidden",children:T},h),l=Cr(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=jf(a),h.childLanes=zf(t,v,a),i.memoizedState=Lf,l):(As(i),Bf(i,T))}if(O=t.memoizedState,O!==null&&(T=O.dehydrated,T!==null)){if(d)i.flags&256?(As(i),i.flags&=-257,i=qf(t,i,a)):i.memoizedState!==null?(ws(),i.child=t.child,i.flags|=128,i=null):(ws(),h=l.fallback,T=i.mode,l=ac({mode:"visible",children:l.children},T),h=Cr(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ca(i,t.child,null,a),l=i.child,l.memoizedState=jf(a),l.childLanes=zf(t,v,a),i.memoizedState=Lf,i=h);else if(As(i),Ad(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var z=v.dgst;v=z,l=Error(r(419)),l.stack="",l.digest=v,Go({value:l,source:null,stack:null}),i=qf(t,i,a)}else if(Bt||Qo(t,i,a,!1),v=(a&t.childLanes)!==0,Bt||v){if(v=at,v!==null&&(l=a&-a,l=(l&42)!==0?1:hs(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,_a(t,l),In(v,t,l),iy;T.data==="$?"||ad(),i=qf(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,mt=Wn(T.nextSibling),hn=i,Ke=!0,Or=null,di=!1,t!==null&&(Bn[qn++]=ji,Bn[qn++]=zi,Bn[qn++]=Nr,ji=t.id,zi=t.overflow,Nr=i),i=Bf(i,l.children),i.flags|=4096);return i}return h?(ws(),h=l.fallback,T=i.mode,O=t.child,z=O.sibling,l=Li(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,z!==null?h=Li(z,h):(h=Cr(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=t.child.memoizedState,T===null?T=jf(a):(O=T.cachePool,O!==null?(z=Mt._currentValue,O=O.parent!==z?{parent:z,pool:z}:O):O=Wg(),T={baseLanes:T.baseLanes|a,cachePool:O}),h.memoizedState=T,h.childLanes=zf(t,v,a),i.memoizedState=Lf,l):(As(i),a=t.child,t=a.sibling,a=Li(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Bf(t,i){return i=ac({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function ac(t,i){return t=An(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function qf(t,i,a){return Ca(i,t.child,null,a),t=Bf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function dy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),af(t.return,i,a)}function Hf(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function my(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Yt(t,i,l.children,a),l=Vt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dy(t,a,i);else if(t.tag===19)dy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ie(Vt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&nc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Hf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&nc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Hf(i,!0,a,null,d);break;case"together":Hf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Gi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Cs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Qo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Li(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Li(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Ff(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&zu(t)))}function xT(t,i,a){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),_s(i,Mt,t.memoizedState.cache),Fo();break;case 27:case 5:ue(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:_s(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(As(i),i.flags|=128,null):(a&i.child.childLanes)!==0?fy(t,i,a):(As(i),t=Gi(t,i,a),t!==null?t.sibling:null);As(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Qo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return my(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(Vt,Vt.current),l)break;return null;case 22:case 23:return i.lanes=0,oy(t,i,a);case 24:_s(i,Mt,t.memoizedState.cache)}return Gi(t,i,a)}function gy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Bt=!0;else{if(!Ff(t,a)&&(i.flags&128)===0)return Bt=!1,xT(t,i,a);Bt=(t.flags&131072)!==0}else Bt=!1,Ke&&(i.flags&1048576)!==0&&Gg(i,ju,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Wh(l)?(t=Lr(l,t),i.tag=1,i=cy(null,i,l,t,a)):(i.tag=0,i=Uf(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===he){i.tag=11,i=sy(null,i,l,t,a);break e}else if(h===M){i.tag=14,i=ry(null,i,l,t,a);break e}}throw i=de(l)||l,Error(r(306,i,""))}}return i;case 0:return Uf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Lr(l,i.pendingProps),cy(t,i,l,h,a);case 3:e:{if(et(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,df(t,i),Jo(i,l,null,a);var v=i.memoizedState;if(l=v.cache,_s(i,Mt,l),l!==d.cache&&of(i,[Mt],a,!0),Wo(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=hy(t,i,l,a);break e}else if(l!==h){h=jn(Error(r(424)),i),Go(h),i=hy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(mt=Wn(t.firstChild),hn=i,Ke=!0,Or=null,di=!0,a=Yp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fo(),l===h){i=Gi(t,i,a);break e}Yt(t,i,l,a)}i=i.child}return i;case 26:return rc(t,i),t===null?(a=v_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,t=i.pendingProps,l=Ec(Se.current).createElement(a),l[Dt]=i,l[Tt]=t,$t(l,a,t),yt(l),i.stateNode=l):i.memoizedState=v_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ue(i),t===null&&Ke&&(l=i.stateNode=p_(i.type,i.pendingProps,Se.current),hn=i,di=!0,h=mt,ks(i.type)?(wd=h,mt=Wn(l.firstChild)):mt=h),Yt(t,i,i.pendingProps.children,a),rc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ke&&((h=l=mt)&&(l=eA(l,i.type,i.pendingProps,di),l!==null?(i.stateNode=l,hn=i,mt=Wn(l.firstChild),di=!1,h=!0):h=!1),h||kr(i)),ue(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Ed(h,d)?l=null:v!==null&&Ed(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=vf(t,i,_T,null,null,a),bl._currentValue=h),rc(t,i),Yt(t,i,l,a),i.child;case 6:return t===null&&Ke&&((t=a=mt)&&(a=tA(a,i.pendingProps,di),a!==null?(i.stateNode=a,hn=i,mt=null,t=!0):t=!1),t||kr(i)),null;case 13:return fy(t,i,a);case 4:return et(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ca(i,null,l,a):Yt(t,i,l,a),i.child;case 11:return sy(t,i,i.type,i.pendingProps,a);case 7:return Yt(t,i,i.pendingProps,a),i.child;case 8:return Yt(t,i,i.pendingProps.children,a),i.child;case 12:return Yt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,_s(i,i.type,l.value),Yt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Vr(i),h=tn(h),l=l(h),i.flags|=1,Yt(t,i,l,a),i.child;case 14:return ry(t,i,i.type,i.pendingProps,a);case 15:return ay(t,i,i.type,i.pendingProps,a);case 19:return my(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=ac(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Li(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return oy(t,i,a);case 24:return Vr(i),l=tn(Mt),t===null?(h=cf(),h===null&&(h=at,d=lf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},ff(i),_s(i,Mt,h)):((t.lanes&a)!==0&&(df(t,i),Jo(i,null,null,a),Wo()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),_s(i,Mt,l)):(l=d.cache,_s(i,Mt,l),l!==h.cache&&of(i,[Mt],a,!0))),Yt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Qi(t){t.flags|=4}function py(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!w_(i)){if(i=Hn.current,i!==null&&((Ge&4194048)===Ge?mi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||i!==mi))throw Xo=hf,Jg;t.flags|=8192}}function oc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ao():536870912,t.lanes|=i,ka|=i)}function al(t,i){if(!Ke)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ht(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function RT(t,i,a){var l=i.pendingProps;switch(nf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return ht(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),qi(Mt),On(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ho(i)?Qi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kg())),ht(i),null;case 26:return a=i.memoizedState,t===null?(Qi(i),a!==null?(ht(i),py(i,a)):(ht(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Qi(i),ht(i),py(i,a)):(ht(i),i.flags&=-16777217):(t.memoizedProps!==l&&Qi(i),ht(i),i.flags&=-16777217),null;case 27:Ne(i),a=Se.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Qi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ht(i),null}t=pe.current,Ho(i)?Qg(i):(t=p_(h,l,a),i.stateNode=t,Qi(i))}return ht(i),null;case 5:if(Ne(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Qi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ht(i),null}if(t=pe.current,Ho(i))Qg(i);else{switch(h=Ec(Se.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Dt]=i,t[Tt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch($t(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Qi(i)}}return ht(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Qi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Se.current,Ho(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=hn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Dt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||u_(t.nodeValue,a)),t||kr(i)}else t=Ec(t).createTextNode(l),t[Dt]=i,i.stateNode=t}return ht(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ho(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Dt]=i}else Fo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),h=!1}else h=Kg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Fi(i),i):(Fi(i),null)}if(Fi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),oc(i,i.updateQueue),ht(i),null;case 4:return On(),t===null&&gd(i.stateNode.containerInfo),ht(i),null;case 10:return qi(i.type),ht(i),null;case 19:if(ee(Vt),h=i.memoizedState,h===null)return ht(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)al(h,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=nc(t),d!==null){for(i.flags|=128,al(h,!1),t=d.updateQueue,i.updateQueue=t,oc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Fg(a,t),a=a.sibling;return ie(Vt,Vt.current&1|2),i.child}t=t.sibling}h.tail!==null&&Nt()>cc&&(i.flags|=128,l=!0,al(h,!1),i.lanes=4194304)}else{if(!l)if(t=nc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,oc(i,t),al(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ke)return ht(i),null}else 2*Nt()-h.renderingStartTime>cc&&a!==536870912&&(i.flags|=128,l=!0,al(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Nt(),i.sibling=null,t=Vt.current,ie(Vt,l?t&1|2:t&1),i):(ht(i),null);case 22:case 23:return Fi(i),yf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),a=i.updateQueue,a!==null&&oc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ee(Pr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),qi(Mt),ht(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function IT(t,i){switch(nf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return qi(Mt),On(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ne(i),null;case 13:if(Fi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Fo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ee(Vt),null;case 4:return On(),null;case 10:return qi(i.type),null;case 22:case 23:return Fi(i),yf(),t!==null&&ee(Pr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return qi(Mt),null;case 25:return null;default:return null}}function yy(t,i){switch(nf(i),i.tag){case 3:qi(Mt),On();break;case 26:case 27:case 5:Ne(i);break;case 4:On();break;case 13:Fi(i);break;case 19:ee(Vt);break;case 10:qi(i.type);break;case 22:case 23:Fi(i),yf(),t!==null&&ee(Pr);break;case 24:qi(Mt)}}function ol(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){rt(i,i.return,T)}}function Ss(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var O=a,z=T;try{z()}catch(X){rt(h,O,X)}}}l=l.next}while(l!==d)}}catch(X){rt(i,i.return,X)}}function _y(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{rp(i,a)}catch(l){rt(t,t.return,l)}}}function vy(t,i,a){a.props=Lr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,i,l)}}function ll(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){rt(t,i,h)}}function gi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){rt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){rt(t,i,h)}else a.current=null}function Ey(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){rt(t,t.return,h)}}function Gf(t,i,a){try{var l=t.stateNode;$T(l,t.type,a,i),l[Tt]=i}catch(h){rt(t,t.return,h)}}function by(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ks(t.type)||t.tag===4}function Qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||by(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ks(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=vc));else if(l!==4&&(l===27&&ks(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Yf(t,i,a),t=t.sibling;t!==null;)Yf(t,i,a),t=t.sibling}function lc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&ks(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(lc(t,i,a),t=t.sibling;t!==null;)lc(t,i,a),t=t.sibling}function Ty(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);$t(i,l,a),i[Dt]=t,i[Tt]=a}catch(d){rt(t,t.return,d)}}var Yi=!1,vt=!1,Kf=!1,Ay=typeof WeakSet=="function"?WeakSet:Set,qt=null;function CT(t,i){if(t=t.containerInfo,_d=xc,t=Mg(t),Gh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,O=-1,z=0,X=0,te=t,B=null;t:for(;;){for(var q;te!==a||h!==0&&te.nodeType!==3||(T=v+h),te!==d||l!==0&&te.nodeType!==3||(O=v+l),te.nodeType===3&&(v+=te.nodeValue.length),(q=te.firstChild)!==null;)B=te,te=q;for(;;){if(te===t)break t;if(B===a&&++z===h&&(T=v),B===d&&++X===l&&(O=v),(q=te.nextSibling)!==null)break;te=B,B=te.parentNode}te=q}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(vd={focusedElem:t,selectionRange:a},xc=!1,qt=i;qt!==null;)if(i=qt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,qt=t;else for(;qt!==null;){switch(i=qt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ie=Lr(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ie,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){rt(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Td(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Td(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,qt=t;break}qt=i.return}}function wy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:xs(t,a),l&4&&ol(5,a);break;case 1:if(xs(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){rt(a,a.return,v)}else{var h=Lr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){rt(a,a.return,v)}}l&64&&_y(a),l&512&&ll(a,a.return);break;case 3:if(xs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{rp(t,i)}catch(v){rt(a,a.return,v)}}break;case 27:i===null&&l&4&&Ty(a);case 26:case 5:xs(t,a),i===null&&l&4&&Ey(a),l&512&&ll(a,a.return);break;case 12:xs(t,a);break;case 13:xs(t,a),l&4&&Ry(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=LT.bind(null,a),nA(t,a))));break;case 22:if(l=a.memoizedState!==null||Yi,!l){i=i!==null&&i.memoizedState!==null||vt,h=Yi;var d=vt;Yi=l,(vt=i)&&!d?Rs(t,a,(a.subtreeFlags&8772)!==0):xs(t,a),Yi=h,vt=d}break;case 30:break;default:xs(t,a)}}function Sy(t){var i=t.alternate;i!==null&&(t.alternate=null,Sy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ms(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,pn=!1;function Ki(t,i,a){for(a=a.child;a!==null;)xy(t,i,a),a=a.sibling}function xy(t,i,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(dt,a)}catch{}switch(a.tag){case 26:vt||gi(a,i),Ki(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:vt||gi(a,i);var l=ct,h=pn;ks(a.type)&&(ct=a.stateNode,pn=!1),Ki(t,i,a),yl(a.stateNode),ct=l,pn=h;break;case 5:vt||gi(a,i);case 6:if(l=ct,h=pn,ct=null,Ki(t,i,a),ct=l,pn=h,ct!==null)if(pn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(d){rt(a,i,d)}else try{ct.removeChild(a.stateNode)}catch(d){rt(a,i,d)}break;case 18:ct!==null&&(pn?(t=ct,m_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Sl(t)):m_(ct,a.stateNode));break;case 4:l=ct,h=pn,ct=a.stateNode.containerInfo,pn=!0,Ki(t,i,a),ct=l,pn=h;break;case 0:case 11:case 14:case 15:vt||Ss(2,a,i),vt||Ss(4,a,i),Ki(t,i,a);break;case 1:vt||(gi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&vy(a,i,l)),Ki(t,i,a);break;case 21:Ki(t,i,a);break;case 22:vt=(l=vt)||a.memoizedState!==null,Ki(t,i,a),vt=l;break;default:Ki(t,i,a)}}function Ry(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Sl(t)}catch(a){rt(i,i.return,a)}}function NT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ay),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ay),i;default:throw Error(r(435,t.tag))}}function $f(t,i){var a=NT(t);i.forEach(function(l){var h=jT.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function wn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ks(T.type)){ct=T.stateNode,pn=!1;break e}break;case 5:ct=T.stateNode,pn=!1;break e;case 3:case 4:ct=T.stateNode.containerInfo,pn=!0;break e}T=T.return}if(ct===null)throw Error(r(160));xy(d,v,h),ct=null,pn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Iy(i,t),i=i.sibling}var Zn=null;function Iy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wn(i,t),Sn(t),l&4&&(Ss(3,t,t.return),ol(3,t),Ss(5,t,t.return));break;case 1:wn(i,t),Sn(t),l&512&&(vt||a===null||gi(a,a.return)),l&64&&Yi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Zn;if(wn(i,t),Sn(t),l&512&&(vt||a===null||gi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[dr]||d[Dt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),$t(d,l,a),d[Dt]=t,yt(d),l=d;break e;case"link":var v=T_("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(l),$t(d,l,a),h.head.appendChild(d);break;case"meta":if(v=T_("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(l),$t(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Dt]=t,yt(d),l=d}t.stateNode=l}else A_(h,t.type,t.stateNode);else t.stateNode=b_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?A_(h,t.type,t.stateNode):b_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:wn(i,t),Sn(t),l&512&&(vt||a===null||gi(a,a.return)),a!==null&&l&4&&Gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(wn(i,t),Sn(t),l&512&&(vt||a===null||gi(a,a.return)),t.flags&32){h=t.stateNode;try{Vn(h,"")}catch(q){rt(t,t.return,q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Kf=!0);break;case 6:if(wn(i,t),Sn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(q){rt(t,t.return,q)}}break;case 3:if(Ac=null,h=Zn,Zn=bc(i.containerInfo),wn(i,t),Zn=h,Sn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Sl(i.containerInfo)}catch(q){rt(t,t.return,q)}Kf&&(Kf=!1,Cy(t));break;case 4:l=Zn,Zn=bc(t.stateNode.containerInfo),wn(i,t),Sn(t),Zn=l;break;case 12:wn(i,t),Sn(t);break;case 13:wn(i,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(td=Nt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$f(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,z=Yi,X=vt;if(Yi=z||h,vt=X||O,wn(i,t),vt=X,Yi=z,Sn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||O||Yi||vt||jr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=O.stateNode;var te=O.memoizedProps.style,B=te!=null&&te.hasOwnProperty("display")?te.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){rt(O,O.return,q)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(q){rt(O,O.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,$f(t,a))));break;case 19:wn(i,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$f(t,l)));break;case 30:break;case 21:break;default:wn(i,t),Sn(t)}}function Sn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(by(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Qf(t);lc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Vn(v,""),a.flags&=-33);var T=Qf(t);lc(t,T,v);break;case 3:case 4:var O=a.stateNode.containerInfo,z=Qf(t);Yf(t,z,O);break;default:throw Error(r(161))}}catch(X){rt(t,t.return,X)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Cy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Cy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function xs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)wy(t,i.alternate,i),i=i.sibling}function jr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ss(4,i,i.return),jr(i);break;case 1:gi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vy(i,i.return,a),jr(i);break;case 27:yl(i.stateNode);case 26:case 5:gi(i,i.return),jr(i);break;case 22:i.memoizedState===null&&jr(i);break;case 30:jr(i);break;default:jr(i)}t=t.sibling}}function Rs(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Rs(h,d,a),ol(4,d);break;case 1:if(Rs(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){rt(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)sp(O[h],T)}catch(z){rt(l,l.return,z)}}a&&v&64&&_y(d),ll(d,d.return);break;case 27:Ty(d);case 26:case 5:Rs(h,d,a),a&&l===null&&v&4&&Ey(d),ll(d,d.return);break;case 12:Rs(h,d,a);break;case 13:Rs(h,d,a),a&&v&4&&Ry(h,d);break;case 22:d.memoizedState===null&&Rs(h,d,a),ll(d,d.return);break;case 30:break;default:Rs(h,d,a)}i=i.sibling}}function Xf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Yo(a))}function Zf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Yo(t))}function pi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ny(t,i,a,l),i=i.sibling}function Ny(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:pi(t,i,a,l),h&2048&&ol(9,i);break;case 1:pi(t,i,a,l);break;case 3:pi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Yo(t)));break;case 12:if(h&2048){pi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){rt(i,i.return,O)}}else pi(t,i,a,l);break;case 13:pi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?pi(t,i,a,l):ul(t,i):d._visibility&2?pi(t,i,a,l):(d._visibility|=2,Na(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Xf(v,i);break;case 24:pi(t,i,a,l),h&2048&&Zf(i.alternate,i);break;default:pi(t,i,a,l)}}function Na(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,T=a,O=l,z=v.flags;switch(v.tag){case 0:case 11:case 15:Na(d,v,T,O,h),ol(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?Na(d,v,T,O,h):ul(d,v):(X._visibility|=2,Na(d,v,T,O,h)),h&&z&2048&&Xf(v.alternate,v);break;case 24:Na(d,v,T,O,h),h&&z&2048&&Zf(v.alternate,v);break;default:Na(d,v,T,O,h)}i=i.sibling}}function ul(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:ul(a,l),h&2048&&Xf(l.alternate,l);break;case 24:ul(a,l),h&2048&&Zf(l.alternate,l);break;default:ul(a,l)}i=i.sibling}}var cl=8192;function Da(t){if(t.subtreeFlags&cl)for(t=t.child;t!==null;)Dy(t),t=t.sibling}function Dy(t){switch(t.tag){case 26:Da(t),t.flags&cl&&t.memoizedState!==null&&gA(Zn,t.memoizedState,t.memoizedProps);break;case 5:Da(t);break;case 3:case 4:var i=Zn;Zn=bc(t.stateNode.containerInfo),Da(t),Zn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=cl,cl=16777216,Da(t),cl=i):Da(t));break;default:Da(t)}}function Oy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function hl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qt=l,My(l,t)}Oy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ky(t),t=t.sibling}function ky(t){switch(t.tag){case 0:case 11:case 15:hl(t),t.flags&2048&&Ss(9,t,t.return);break;case 3:hl(t);break;case 12:hl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,uc(t)):hl(t);break;default:hl(t)}}function uc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qt=l,My(l,t)}Oy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ss(8,i,i.return),uc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,uc(i));break;default:uc(i)}t=t.sibling}}function My(t,i){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Ss(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Yo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qt=l;else e:for(a=t;qt!==null;){l=qt;var h=l.sibling,d=l.return;if(Sy(l),l===a){qt=null;break e}if(h!==null){h.return=d,qt=h;break e}qt=d}}}var DT={getCacheForType:function(t){var i=tn(Mt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},OT=typeof WeakMap=="function"?WeakMap:Map,We=0,at=null,Le=null,Ge=0,Je=0,xn=null,Is=!1,Oa=!1,Wf=!1,$i=0,gt=0,Cs=0,zr=0,Jf=0,Fn=0,ka=0,fl=null,yn=null,ed=!1,td=0,cc=1/0,hc=null,Ns=null,Kt=0,Ds=null,Ma=null,Va=0,nd=0,id=null,Vy=null,dl=0,sd=null;function Rn(){if((We&2)!==0&&Ge!==0)return Ge&-Ge;if(H.T!==null){var t=Ta;return t!==0?t:hd()}return fs()}function Py(){Fn===0&&(Fn=(Ge&536870912)===0||Ke?To():536870912);var t=Hn.current;return t!==null&&(t.flags|=32),Fn}function In(t,i,a){(t===at&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Pa(t,0),Os(t,Ge,Fn,!1)),Ri(t,a),((We&2)===0||t!==at)&&(t===at&&((We&2)===0&&(zr|=a),gt===4&&Os(t,Ge,Fn,!1)),yi(t))}function Uy(t,i,a){if((We&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||fr(t,i),h=l?VT(t,i):od(t,i,!0),d=l;do{if(h===0){Oa&&!l&&Os(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!kT(a)){h=od(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=fl;var O=T.current.memoizedState.isDehydrated;if(O&&(Pa(T,v).flags|=256),v=od(T,v,!1),v!==2){if(Wf&&!O){T.errorRecoveryDisabledLanes|=d,zr|=d,h=4;break e}d=yn,yn=h,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Pa(t,0),Os(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Os(l,i,Fn,!Is);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=td+300-Nt(),10<h)){if(Os(l,i,Fn,!Is),Jr(l,0,!0)!==0)break e;l.timeoutHandle=f_(Ly.bind(null,l,a,yn,hc,ed,i,Fn,zr,ka,Is,d,2,-0,0),h);break e}Ly(l,a,yn,hc,ed,i,Fn,zr,ka,Is,d,0,-0,0)}}break}while(!0);yi(t)}function Ly(t,i,a,l,h,d,v,T,O,z,X,te,B,q){if(t.timeoutHandle=-1,te=i.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:mA},Dy(i),te=pA(),te!==null)){t.cancelPendingCommit=te(Gy.bind(null,t,i,d,a,l,h,v,T,O,X,1,B,q)),Os(t,d,v,!z);return}Gy(t,i,d,a,l,h,v,T,O)}function kT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Tn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Os(t,i,a,l){i&=~Jf,i&=~zr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-en(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&ni(t,a,i)}function fc(){return(We&6)===0?(ml(0),!1):!0}function rd(){if(Le!==null){if(Je===0)var t=Le.return;else t=Le,Bi=Mr=null,Tf(t),Ia=null,sl=0,t=Le;for(;t!==null;)yy(t.alternate,t),t=t.return;Le=null}}function Pa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,ZT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),rd(),at=t,Le=a=Li(t.current,null),Ge=i,Je=0,xn=null,Is=!1,Oa=fr(t,i),Wf=!1,ka=Fn=Jf=zr=Cs=gt=0,yn=fl=null,ed=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-en(l),d=1<<h;i|=t[h],l&=~d}return $i=i,Mu(),a}function jy(t,i){Me=null,H.H=Ju,i===$o||i===Hu?(i=np(),Je=3):i===Jg?(i=np(),Je=4):Je=i===iy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,xn=i,Le===null&&(gt=1,sc(t,jn(i,t.current)))}function zy(){var t=H.H;return H.H=Ju,t===null?Ju:t}function By(){var t=H.A;return H.A=DT,t}function ad(){gt=4,Is||(Ge&4194048)!==Ge&&Hn.current!==null||(Oa=!0),(Cs&134217727)===0&&(zr&134217727)===0||at===null||Os(at,Ge,Fn,!1)}function od(t,i,a){var l=We;We|=2;var h=zy(),d=By();(at!==t||Ge!==i)&&(hc=null,Pa(t,i)),i=!1;var v=gt;e:do try{if(Je!==0&&Le!==null){var T=Le,O=xn;switch(Je){case 8:rd(),v=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(i=!0);var z=Je;if(Je=0,xn=null,Ua(t,T,O,z),a&&Oa){v=0;break e}break;default:z=Je,Je=0,xn=null,Ua(t,T,O,z)}}MT(),v=gt;break}catch(X){jy(t,X)}while(!0);return i&&t.shellSuspendCounter++,Bi=Mr=null,We=l,H.H=h,H.A=d,Le===null&&(at=null,Ge=0,Mu()),v}function MT(){for(;Le!==null;)qy(Le)}function VT(t,i){var a=We;We|=2;var l=zy(),h=By();at!==t||Ge!==i?(hc=null,cc=Nt()+500,Pa(t,i)):Oa=fr(t,i);e:do try{if(Je!==0&&Le!==null){i=Le;var d=xn;t:switch(Je){case 1:Je=0,xn=null,Ua(t,i,d,1);break;case 2:case 9:if(ep(d)){Je=0,xn=null,Hy(i);break}i=function(){Je!==2&&Je!==9||at!==t||(Je=7),yi(t)},d.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:ep(d)?(Je=0,xn=null,Hy(i)):(Je=0,xn=null,Ua(t,i,d,7));break;case 5:var v=null;switch(Le.tag){case 26:v=Le.memoizedState;case 5:case 27:var T=Le;if(!v||w_(v)){Je=0,xn=null;var O=T.sibling;if(O!==null)Le=O;else{var z=T.return;z!==null?(Le=z,dc(z)):Le=null}break t}}Je=0,xn=null,Ua(t,i,d,5);break;case 6:Je=0,xn=null,Ua(t,i,d,6);break;case 8:rd(),gt=6;break e;default:throw Error(r(462))}}PT();break}catch(X){jy(t,X)}while(!0);return Bi=Mr=null,H.H=l,H.A=h,We=a,Le!==null?0:(at=null,Ge=0,Mu(),gt)}function PT(){for(;Le!==null&&!Ct();)qy(Le)}function qy(t){var i=gy(t.alternate,t,$i);t.memoizedProps=t.pendingProps,i===null?dc(t):Le=i}function Hy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=uy(a,i,i.pendingProps,i.type,void 0,Ge);break;case 11:i=uy(a,i,i.pendingProps,i.type.render,i.ref,Ge);break;case 5:Tf(i);default:yy(a,i),i=Le=Fg(i,$i),i=gy(a,i,$i)}t.memoizedProps=t.pendingProps,i===null?dc(t):Le=i}function Ua(t,i,a,l){Bi=Mr=null,Tf(i),Ia=null,sl=0;var h=i.return;try{if(ST(t,h,i,a,Ge)){gt=1,sc(t,jn(a,t.current)),Le=null;return}}catch(d){if(h!==null)throw Le=h,d;gt=1,sc(t,jn(a,t.current)),Le=null;return}i.flags&32768?(Ke||l===1?t=!0:Oa||(Ge&536870912)!==0?t=!1:(Is=t=!0,(l===2||l===9||l===3||l===6)&&(l=Hn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Fy(i,t)):dc(i)}function dc(t){var i=t;do{if((i.flags&32768)!==0){Fy(i,Is);return}t=i.return;var a=RT(i.alternate,i,$i);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);gt===0&&(gt=5)}function Fy(t,i){do{var a=IT(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);gt=6,Le=null}function Gy(t,i,a,l,h,d,v,T,O){t.cancelPendingCommit=null;do mc();while(Kt!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Xh,wo(t,a,d,v,T,O),t===at&&(Le=at=null,Ge=0),Ma=i,Ds=t,Va=a,nd=d,id=h,Vy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,zT(cs,function(){return Xy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,h=Z.p,Z.p=2,v=We,We|=4;try{CT(t,i,a)}finally{We=v,Z.p=h,H.T=l}}Kt=1,Qy(),Yy(),Ky()}}function Qy(){if(Kt===1){Kt=0;var t=Ds,i=Ma,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=Z.p;Z.p=2;var h=We;We|=4;try{Iy(i,t);var d=vd,v=Mg(t.containerInfo),T=d.focusedElem,O=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&kg(T.ownerDocument.documentElement,T)){if(O!==null&&Gh(T)){var z=O.start,X=O.end;if(X===void 0&&(X=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(X,T.value.length);else{var te=T.ownerDocument||document,B=te&&te.defaultView||window;if(B.getSelection){var q=B.getSelection(),Ie=T.textContent.length,Te=Math.min(O.start,Ie),st=O.end===void 0?Te:Math.min(O.end,Ie);!q.extend&&Te>st&&(v=st,st=Te,Te=v);var U=Og(T,Te),V=Og(T,st);if(U&&V&&(q.rangeCount!==1||q.anchorNode!==U.node||q.anchorOffset!==U.offset||q.focusNode!==V.node||q.focusOffset!==V.offset)){var j=te.createRange();j.setStart(U.node,U.offset),q.removeAllRanges(),Te>st?(q.addRange(j),q.extend(V.node,V.offset)):(j.setEnd(V.node,V.offset),q.addRange(j))}}}}for(te=[],q=T;q=q.parentNode;)q.nodeType===1&&te.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<te.length;T++){var W=te[T];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}xc=!!_d,vd=_d=null}finally{We=h,Z.p=l,H.T=a}}t.current=i,Kt=2}}function Yy(){if(Kt===2){Kt=0;var t=Ds,i=Ma,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=Z.p;Z.p=2;var h=We;We|=4;try{wy(t,i.alternate,i)}finally{We=h,Z.p=l,H.T=a}}Kt=3}}function Ky(){if(Kt===4||Kt===3){Kt=0,ls();var t=Ds,i=Ma,a=Va,l=Vy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Kt=5:(Kt=0,Ma=Ds=null,$y(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ns=null),ea(a),i=i.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(dt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=H.T,h=Z.p,Z.p=2,H.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];d(T.value,{componentStack:T.stack})}}finally{H.T=i,Z.p=h}}(Va&3)!==0&&mc(),yi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===sd?dl++:(dl=0,sd=t):dl=0,ml(0)}}function $y(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Yo(i)))}function mc(t){return Qy(),Yy(),Ky(),Xy()}function Xy(){if(Kt!==5)return!1;var t=Ds,i=nd;nd=0;var a=ea(Va),l=H.T,h=Z.p;try{Z.p=32>a?32:a,H.T=null,a=id,id=null;var d=Ds,v=Va;if(Kt=0,Ma=Ds=null,Va=0,(We&6)!==0)throw Error(r(331));var T=We;if(We|=4,ky(d.current),Ny(d,d.current,v,a),We=T,ml(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(dt,d)}catch{}return!0}finally{Z.p=h,H.T=l,$y(t,i)}}function Zy(t,i,a){i=jn(a,i),i=Pf(t.stateNode,i,2),t=bs(t,i,2),t!==null&&(Ri(t,2),yi(t))}function rt(t,i,a){if(t.tag===3)Zy(t,t,a);else for(;i!==null;){if(i.tag===3){Zy(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ns===null||!Ns.has(l))){t=jn(a,t),a=ty(2),l=bs(i,a,2),l!==null&&(ny(a,l,i,t),Ri(l,2),yi(l));break}}i=i.return}}function ld(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new OT;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Wf=!0,h.add(a),t=UT.bind(null,t,i,a),i.then(t,t))}function UT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,at===t&&(Ge&a)===a&&(gt===4||gt===3&&(Ge&62914560)===Ge&&300>Nt()-td?(We&2)===0&&Pa(t,0):Jf|=a,ka===Ge&&(ka=0)),yi(t)}function Wy(t,i){i===0&&(i=Ao()),t=_a(t,i),t!==null&&(Ri(t,i),yi(t))}function LT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Wy(t,a)}function jT(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Wy(t,a)}function zT(t,i){return qe(t,i)}var gc=null,La=null,ud=!1,pc=!1,cd=!1,Br=0;function yi(t){t!==La&&t.next===null&&(La===null?gc=La=t:La=La.next=t),pc=!0,ud||(ud=!0,qT())}function ml(t,i){if(!cd&&pc){cd=!0;do for(var a=!1,l=gc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-en(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,n_(l,d))}else d=Ge,d=Jr(l,l===at?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||fr(l,d)||(a=!0,n_(l,d));l=l.next}while(a);cd=!1}}function BT(){Jy()}function Jy(){pc=ud=!1;var t=0;Br!==0&&(XT()&&(t=Br),Br=0);for(var i=Nt(),a=null,l=gc;l!==null;){var h=l.next,d=e_(l,i);d===0?(l.next=null,a===null?gc=h:a.next=h,h===null&&(La=a)):(a=l,(t!==0||(d&3)!==0)&&(pc=!0)),l=h}ml(t)}function e_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-en(d),T=1<<v,O=h[v];O===-1?((T&a)===0||(T&l)!==0)&&(h[v]=bo(T,i)):O<=i&&(t.expiredLanes|=T),d&=~T}if(i=at,a=Ge,a=Jr(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&De(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||fr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&De(l),ea(a)){case 2:case 8:a=us;break;case 32:a=cs;break;case 268435456:a=Si;break;default:a=cs}return l=t_.bind(null,t),a=qe(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&De(l),t.callbackPriority=2,t.callbackNode=null,2}function t_(t,i){if(Kt!==0&&Kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mc()&&t.callbackNode!==a)return null;var l=Ge;return l=Jr(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Uy(t,l,i),e_(t,Nt()),t.callbackNode!=null&&t.callbackNode===a?t_.bind(null,t):null)}function n_(t,i){if(mc())return null;Uy(t,i,!0)}function qT(){WT(function(){(We&6)!==0?qe(lr,BT):Jy()})}function hd(){return Br===0&&(Br=To()),Br}function i_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:aa(""+t)}function s_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function HT(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=i_((h[Tt]||null).action),v=l.submitter;v&&(i=(i=v[Tt]||null)?i_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new oa("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Br!==0){var O=v?s_(h,v):new FormData(h);Df(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(T.preventDefault(),O=v?s_(h,v):new FormData(h),Df(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var fd=0;fd<$h.length;fd++){var dd=$h[fd],FT=dd.toLowerCase(),GT=dd[0].toUpperCase()+dd.slice(1);Xn(FT,"on"+GT)}Xn(Ug,"onAnimationEnd"),Xn(Lg,"onAnimationIteration"),Xn(jg,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(lT,"onTransitionRun"),Xn(uT,"onTransitionStart"),Xn(cT,"onTransitionCancel"),Xn(zg,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function r_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],O=T.instance,z=T.currentTarget;if(T=T.listener,O!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(X){ic(X)}h.currentTarget=null,d=O}else for(v=0;v<l.length;v++){if(T=l[v],O=T.instance,z=T.currentTarget,T=T.listener,O!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(X){ic(X)}h.currentTarget=null,d=O}}}}function je(t,i){var a=i[xo];a===void 0&&(a=i[xo]=new Set);var l=t+"__bubble";a.has(l)||(a_(i,t,2,!1),a.add(l))}function md(t,i,a){var l=0;i&&(l|=4),a_(a,t,l,i)}var yc="_reactListening"+Math.random().toString(36).slice(2);function gd(t){if(!t[yc]){t[yc]=!0,Ro.forEach(function(a){a!=="selectionchange"&&(QT.has(a)||md(a,!1,t),md(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[yc]||(i[yc]=!0,md("selectionchange",!1,i))}}function a_(t,i,a,l){switch(N_(i)){case 2:var h=vA;break;case 8:h=EA;break;default:h=Cd}a=h.bind(null,i,a,t),h=void 0,!Un||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function pd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=Ii(T),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){l=d=v;continue e}T=T.parentNode}}l=l.return}vu(function(){var z=d,X=Pn(a),te=[];e:{var B=Bg.get(t);if(B!==void 0){var q=oa,Ie=t;switch(t){case"keypress":if(li(a)===0)break e;case"keydown":case"keyup":q=da;break;case"focusin":Ie="focus",q=ca;break;case"focusout":Ie="blur",q=ca;break;case"beforeblur":case"afterblur":q=ca;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Bh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Ru;break;case Ug:case Lg:case jg:q=ha;break;case zg:q=Cu;break;case"scroll":case"scrollend":q=Eu;break;case"wheel":q=ma;break;case"copy":case"cut":case"paste":q=fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=jo;break;case"toggle":case"beforetoggle":q=Du}var Te=(i&4)!==0,st=!Te&&(t==="scroll"||t==="scrollend"),U=Te?B!==null?B+"Capture":null:B;Te=[];for(var V=z,j;V!==null;){var W=V;if(j=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||j===null||U===null||(W=Er(V,U),W!=null&&Te.push(pl(V,W,j))),st)break;V=V.return}0<Te.length&&(B=new q(B,Ie,null,a,X),te.push({event:B,listeners:Te}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&a!==Oi&&(Ie=a.relatedTarget||a.fromElement)&&(Ii(Ie)||Ie[Mn]))break e;if((q||B)&&(B=X.window===X?X:(B=X.ownerDocument)?B.defaultView||B.parentWindow:window,q?(Ie=a.relatedTarget||a.toElement,q=z,Ie=Ie?Ii(Ie):null,Ie!==null&&(st=u(Ie),Te=Ie.tag,Ie!==st||Te!==5&&Te!==27&&Te!==6)&&(Ie=null)):(q=null,Ie=z),q!==Ie)){if(Te=Ln,W="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Te=jo,W="onPointerLeave",U="onPointerEnter",V="pointer"),st=q==null?B:si(q),j=Ie==null?B:si(Ie),B=new Te(W,V+"leave",q,a,X),B.target=st,B.relatedTarget=j,W=null,Ii(X)===z&&(Te=new Te(U,V+"enter",Ie,a,X),Te.target=j,Te.relatedTarget=st,W=Te),st=W,q&&Ie)t:{for(Te=q,U=Ie,V=0,j=Te;j;j=ja(j))V++;for(j=0,W=U;W;W=ja(W))j++;for(;0<V-j;)Te=ja(Te),V--;for(;0<j-V;)U=ja(U),j--;for(;V--;){if(Te===U||U!==null&&Te===U.alternate)break t;Te=ja(Te),U=ja(U)}Te=null}else Te=null;q!==null&&o_(te,B,q,Te,!1),Ie!==null&&st!==null&&o_(te,st,Ie,Te,!0)}}e:{if(B=z?si(z):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var ye=xg;else if(kt(B))if(Rg)ye=rT;else{ye=iT;var Ue=nT}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Oo(z.elementType)&&(ye=xg):ye=sT;if(ye&&(ye=ye(t,z))){Ui(te,ye,a,X);break e}Ue&&Ue(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&ps(B,"number",B.value)}switch(Ue=z?si(z):window,t){case"focusin":(kt(Ue)||Ue.contentEditable==="true")&&(ga=Ue,Qh=z,qo=null);break;case"focusout":qo=Qh=ga=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,Vg(te,a,X);break;case"selectionchange":if(oT)break;case"keydown":case"keyup":Vg(te,a,X)}var ve;if(hi)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else He?Y(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(_&&a.locale!=="ko"&&(He||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&He&&(ve=Mo()):(oi=X,ys="value"in oi?oi.value:oi.textContent,He=!0)),Ue=_c(z,Ae),0<Ue.length&&(Ae=new Uo(Ae,t,null,a,X),te.push({event:Ae,listeners:Ue}),ve?Ae.data=ve:(ve=ce(a),ve!==null&&(Ae.data=ve)))),(ve=g?Ot(t,a):Fe(t,a))&&(Ae=_c(z,"onBeforeInput"),0<Ae.length&&(Ue=new Uo("onBeforeInput","beforeinput",null,a,X),te.push({event:Ue,listeners:Ae}),Ue.data=ve)),HT(te,t,z,a,X)}r_(te,i)})}function pl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function _c(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Er(t,a),h!=null&&l.unshift(pl(t,h,d)),h=Er(t,i),h!=null&&l.push(pl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function ja(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function o_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,O=T.alternate,z=T.stateNode;if(T=T.tag,O!==null&&O===l)break;T!==5&&T!==26&&T!==27||z===null||(O=z,h?(z=Er(a,d),z!=null&&v.unshift(pl(a,z,O))):h||(z=Er(a,d),z!=null&&v.push(pl(a,z,O)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var YT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function l_(t){return(typeof t=="string"?t:""+t).replace(YT,`
`).replace(KT,"")}function u_(t,i){return i=l_(i),l_(t)===i}function vc(){}function it(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Vn(t,""+l);break;case"className":ri(t,"class",l);break;case"tabIndex":ri(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(t,a,l);break;case"style":Do(t,l,d);break;case"data":if(i!=="object"){ri(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=aa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&it(t,i,"name",h.name,h,null),it(t,i,"formEncType",h.formEncType,h,null),it(t,i,"formMethod",h.formMethod,h,null),it(t,i,"formTarget",h.formTarget,h,null)):(it(t,i,"encType",h.encType,h,null),it(t,i,"method",h.method,h,null),it(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=aa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=vc);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=aa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),gs(t,"popover",l);break;case"xlinkActuate":Gt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Gt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Gt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Gt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Gt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Gt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Gt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Gt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Gt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":gs(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=jh.get(a)||a,gs(t,a,l))}}function yd(t,i,a,l,h,d){switch(a){case"style":Do(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&Vn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=vc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ta.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Tt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):gs(t,a,l)}}}function $t(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:it(t,i,d,v,a,null)}}h&&it(t,i,"srcSet",a.srcSet,a,null),l&&it(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var T=d=v=h=null,O=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":v=X;break;case"checked":O=X;break;case"defaultChecked":z=X;break;case"value":d=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,i));break;default:it(t,i,l,X,a,null)}}yr(t,d,T,O,z,v,h,!1),ra(t);return;case"select":je("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:it(t,i,h,T,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Di(t,!!l,i,!1):a!=null&&Di(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:it(t,i,v,T,a,null)}_r(t,l,h,d),ra(t);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(t,i,O,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<gl.length;l++)je(gl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:it(t,i,z,l,a,null)}return;default:if(Oo(i)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&yd(t,i,X,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&it(t,i,T,l,a,null))}function $T(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,O=null,z=null,X=null;for(q in a){var te=a[q];if(a.hasOwnProperty(q)&&te!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":O=te;default:l.hasOwnProperty(q)||it(t,i,q,null,l,te)}}for(var B in l){var q=l[B];if(te=a[B],l.hasOwnProperty(B)&&(q!=null||te!=null))switch(B){case"type":d=q;break;case"name":h=q;break;case"checked":z=q;break;case"defaultChecked":X=q;break;case"value":v=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:q!==te&&it(t,i,B,q,l,te)}}bn(t,v,T,O,z,X,d,h);return;case"select":q=v=T=B=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":q=O;default:l.hasOwnProperty(d)||it(t,i,d,null,l,O)}for(h in l)if(d=l[h],O=a[h],l.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":B=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==O&&it(t,i,h,d,l,O)}i=T,a=v,l=q,B!=null?Di(t,!!a,B,!1):!!l!=!!a&&(i!=null?Di(t,!!a,i,!0):Di(t,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:it(t,i,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&it(t,i,v,h,l,d)}tt(t,B,q);return;case"option":for(var Ie in a)if(B=a[Ie],a.hasOwnProperty(Ie)&&B!=null&&!l.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:it(t,i,Ie,null,l,B)}for(O in l)if(B=l[O],q=a[O],l.hasOwnProperty(O)&&B!==q&&(B!=null||q!=null))switch(O){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:it(t,i,O,B,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)B=a[Te],a.hasOwnProperty(Te)&&B!=null&&!l.hasOwnProperty(Te)&&it(t,i,Te,null,l,B);for(z in l)if(B=l[z],q=a[z],l.hasOwnProperty(z)&&B!==q&&(B!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:it(t,i,z,B,l,q)}return;default:if(Oo(i)){for(var st in a)B=a[st],a.hasOwnProperty(st)&&B!==void 0&&!l.hasOwnProperty(st)&&yd(t,i,st,void 0,l,B);for(X in l)B=l[X],q=a[X],!l.hasOwnProperty(X)||B===q||B===void 0&&q===void 0||yd(t,i,X,B,l,q);return}}for(var U in a)B=a[U],a.hasOwnProperty(U)&&B!=null&&!l.hasOwnProperty(U)&&it(t,i,U,null,l,B);for(te in l)B=l[te],q=a[te],!l.hasOwnProperty(te)||B===q||B==null&&q==null||it(t,i,te,B,l,q)}var _d=null,vd=null;function Ec(t){return t.nodeType===9?t:t.ownerDocument}function c_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Ed(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bd=null;function XT(){var t=window.event;return t&&t.type==="popstate"?t===bd?!1:(bd=t,!0):(bd=null,!1)}var f_=typeof setTimeout=="function"?setTimeout:void 0,ZT=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(t){return d_.resolve(null).then(t).catch(JT)}:f_;function JT(t){setTimeout(function(){throw t})}function ks(t){return t==="head"}function m_(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&yl(v.documentElement),a&2&&yl(v.body),a&4)for(a=v.head,yl(a),v=a.firstChild;v;){var T=v.nextSibling,O=v.nodeName;v[dr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){t.removeChild(d),Sl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Sl(i)}function Td(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Td(a),ms(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function eA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[dr])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function tA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wn(t.nextSibling),t===null))return null;return t}function Ad(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function nA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var wd=null;function g_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function p_(t,i,a){switch(i=Ec(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function yl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ms(t)}var Gn=new Map,y_=new Set;function bc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xi=Z.d;Z.d={f:iA,r:sA,D:rA,C:aA,L:oA,m:lA,X:cA,S:uA,M:hA};function iA(){var t=Xi.f(),i=fc();return t||i}function sA(t){var i=ii(t);i!==null&&i.tag===5&&i.type==="form"?Up(i):Xi.r(t)}var za=typeof document>"u"?null:document;function __(t,i,a){var l=za;if(l&&typeof i=="string"&&i){var h=At(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),y_.has(h)||(y_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),$t(i,"link",t),yt(i),l.head.appendChild(i)))}}function rA(t){Xi.D(t),__("dns-prefetch",t,null)}function aA(t,i){Xi.C(t,i),__("preconnect",t,i)}function oA(t,i,a){Xi.L(t,i,a);var l=za;if(l&&t&&i){var h='link[rel="preload"][as="'+At(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+At(a.imageSizes)+'"]')):h+='[href="'+At(t)+'"]';var d=h;switch(i){case"style":d=Ba(t);break;case"script":d=qa(t)}Gn.has(d)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Gn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(_l(d))||i==="script"&&l.querySelector(vl(d))||(i=l.createElement("link"),$t(i,"link",t),yt(i),l.head.appendChild(i)))}}function lA(t,i){Xi.m(t,i);var a=za;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+At(l)+'"][href="'+At(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=qa(t)}if(!Gn.has(d)&&(t=b({rel:"modulepreload",href:t},i),Gn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(d)))return}l=a.createElement("link"),$t(l,"link",t),yt(l),a.head.appendChild(l)}}}function uA(t,i,a){Xi.S(t,i,a);var l=za;if(l&&t){var h=ln(l).hoistableStyles,d=Ba(t);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(_l(d)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Gn.get(d))&&Sd(t,a);var O=v=l.createElement("link");yt(O),$t(O,"link",t),O._p=new Promise(function(z,X){O.onload=z,O.onerror=X}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Tc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function cA(t,i){Xi.X(t,i);var a=za;if(a&&t){var l=ln(a).hoistableScripts,h=qa(t),d=l.get(h);d||(d=a.querySelector(vl(h)),d||(t=b({src:t,async:!0},i),(i=Gn.get(h))&&xd(t,i),d=a.createElement("script"),yt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function hA(t,i){Xi.M(t,i);var a=za;if(a&&t){var l=ln(a).hoistableScripts,h=qa(t),d=l.get(h);d||(d=a.querySelector(vl(h)),d||(t=b({src:t,async:!0,type:"module"},i),(i=Gn.get(h))&&xd(t,i),d=a.createElement("script"),yt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function v_(t,i,a,l){var h=(h=Se.current)?bc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ba(a.href),a=ln(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ba(a.href);var d=ln(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(_l(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Gn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(t,a),d||fA(h,t,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qa(a),a=ln(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ba(t){return'href="'+At(t)+'"'}function _l(t){return'link[rel="stylesheet"]['+t+"]"}function E_(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function fA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),$t(i,"link",a),yt(i),t.head.appendChild(i))}function qa(t){return'[src="'+At(t)+'"]'}function vl(t){return"script[async]"+t}function b_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+At(a.href)+'"]');if(l)return i.instance=l,yt(l),l;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),yt(l),$t(l,"style",h),Tc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Ba(a.href);var d=t.querySelector(_l(h));if(d)return i.state.loading|=4,i.instance=d,yt(d),d;l=E_(a),(h=Gn.get(h))&&Sd(l,h),d=(t.ownerDocument||t).createElement("link"),yt(d);var v=d;return v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),$t(d,"link",l),i.state.loading|=4,Tc(d,a.precedence,t),i.instance=d;case"script":return d=qa(a.src),(h=t.querySelector(vl(d)))?(i.instance=h,yt(h),h):(l=a,(h=Gn.get(d))&&(l=b({},a),xd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),yt(h),$t(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Tc(l,a.precedence,t));return i.instance}function Tc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Sd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function xd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ac=null;function T_(t,i,a){if(Ac===null){var l=new Map,h=Ac=new Map;h.set(a,l)}else h=Ac,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[dr]||d[Dt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function A_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function dA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function w_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var El=null;function mA(){}function gA(t,i,a){if(El===null)throw Error(r(475));var l=El;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ba(a.href),d=t.querySelector(_l(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=wc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,yt(d);return}d=t.ownerDocument||t,a=E_(a),(h=Gn.get(h))&&Sd(a,h),d=d.createElement("link"),yt(d);var v=d;v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),$t(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=wc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function pA(){if(El===null)throw Error(r(475));var t=El;return t.stylesheets&&t.count===0&&Rd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Rd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function wc(){if(this.count--,this.count===0){if(this.stylesheets)Rd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Sc=null;function Rd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Sc=new Map,i.forEach(yA,t),Sc=null,wc.call(t))}function yA(t,i){if(!(i.state.loading&4)){var a=Sc.get(t);if(a)var l=a.get(null);else{a=new Map,Sc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=wc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var bl={$$typeof:re,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function _A(t,i,a,l,h,d,v,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function S_(t,i,a,l,h,d,v,T,O,z,X,te){return t=new _A(t,i,a,v,T,O,z,te),i=1,d===!0&&(i|=24),d=An(3,null,null,i),t.current=d,d.stateNode=t,i=lf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},ff(d),t}function x_(t){return t?(t=va,t):va}function R_(t,i,a,l,h,d){h=x_(h),l.context===null?l.context=h:l.pendingContext=h,l=Es(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=bs(t,l,i),a!==null&&(In(a,t,i),Zo(a,t,i))}function I_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Id(t,i){I_(t,i),(t=t.alternate)&&I_(t,i)}function C_(t){if(t.tag===13){var i=_a(t,67108864);i!==null&&In(i,t,67108864),Id(t,67108864)}}var xc=!0;function vA(t,i,a,l){var h=H.T;H.T=null;var d=Z.p;try{Z.p=2,Cd(t,i,a,l)}finally{Z.p=d,H.T=h}}function EA(t,i,a,l){var h=H.T;H.T=null;var d=Z.p;try{Z.p=8,Cd(t,i,a,l)}finally{Z.p=d,H.T=h}}function Cd(t,i,a,l){if(xc){var h=Nd(l);if(h===null)pd(t,i,l,Rc,a),D_(t,l);else if(TA(h,t,i,a,l))l.stopPropagation();else if(D_(t,l),i&4&&-1<bA.indexOf(t)){for(;h!==null;){var d=ii(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Yn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var O=1<<31-en(v);T.entanglements[1]|=O,v&=~O}yi(d),(We&6)===0&&(cc=Nt()+500,ml(0))}}break;case 13:T=_a(d,2),T!==null&&In(T,d,2),fc(),Id(d,2)}if(d=Nd(l),d===null&&pd(t,i,l,Rc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else pd(t,i,l,null,a)}}function Nd(t){return t=Pn(t),Dd(t)}var Rc=null;function Dd(t){if(Rc=null,t=Ii(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Rc=t,null}function N_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case lr:return 2;case us:return 8;case cs:case vo:return 32;case Si:return 268435456;default:return 32}default:return 32}}var Od=!1,Ms=null,Vs=null,Ps=null,Tl=new Map,Al=new Map,Us=[],bA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(t,i){switch(t){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Tl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(i.pointerId)}}function wl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=ii(i),i!==null&&C_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function TA(t,i,a,l,h){switch(i){case"focusin":return Ms=wl(Ms,t,i,a,l,h),!0;case"dragenter":return Vs=wl(Vs,t,i,a,l,h),!0;case"mouseover":return Ps=wl(Ps,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Tl.set(d,wl(Tl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Al.set(d,wl(Al.get(d)||null,t,i,a,l,h)),!0}return!1}function O_(t){var i=Ii(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,fu(t.priority,function(){if(a.tag===13){var l=Rn();l=hs(l);var h=_a(a,l);h!==null&&In(h,a,l),Id(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Nd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Oi=l,a.target.dispatchEvent(l),Oi=null}else return i=ii(a),i!==null&&C_(i),t.blockedOn=a,!1;i.shift()}return!0}function k_(t,i,a){Ic(t)&&a.delete(i)}function AA(){Od=!1,Ms!==null&&Ic(Ms)&&(Ms=null),Vs!==null&&Ic(Vs)&&(Vs=null),Ps!==null&&Ic(Ps)&&(Ps=null),Tl.forEach(k_),Al.forEach(k_)}function Cc(t,i){t.blockedOn===i&&(t.blockedOn=null,Od||(Od=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,AA)))}var Nc=null;function M_(t){Nc!==t&&(Nc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Nc===t&&(Nc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Dd(l||a)===null)continue;break}var d=ii(a);d!==null&&(t.splice(i,3),i-=3,Df(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Sl(t){function i(O){return Cc(O,t)}Ms!==null&&Cc(Ms,t),Vs!==null&&Cc(Vs,t),Ps!==null&&Cc(Ps,t),Tl.forEach(i),Al.forEach(i);for(var a=0;a<Us.length;a++){var l=Us[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Us.length&&(a=Us[0],a.blockedOn===null);)O_(a),a.blockedOn===null&&Us.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Tt]||null;if(typeof d=="function")v||M_(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Tt]||null)T=v.formAction;else if(Dd(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),M_(a)}}}function kd(t){this._internalRoot=t}Dc.prototype.render=kd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Rn();R_(a,l,t,i,null,null)},Dc.prototype.unmount=kd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;R_(t.current,2,null,t,null,null),fc(),i[Mn]=null}};function Dc(t){this._internalRoot=t}Dc.prototype.unstable_scheduleHydration=function(t){if(t){var i=fs();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Us.length&&i!==0&&i<Us[a].priority;a++);Us.splice(a,0,t),a===0&&O_(t)}};var V_=e.version;if(V_!=="19.1.0")throw Error(r(527,V_,"19.1.0"));Z.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var wA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{dt=Oc.inject(wA),Ze=Oc}catch{}}return Rl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=Zp,d=Wp,v=Jp,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=S_(t,1,!1,null,null,a,l,h,d,v,T,null),t[Mn]=i.current,gd(t),new kd(i)},Rl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=Zp,v=Wp,T=Jp,O=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=S_(t,1,!0,i,a??null,l,h,d,v,T,O,z),i.context=x_(null),a=i.current,l=Rn(),l=hs(l),h=Es(l),h.callback=null,bs(a,h,l),a=l,i.current.lanes=a,Ri(i,a),yi(i),t[Mn]=i.current,gd(t),new Dc(i)},Rl.version="19.1.0",Rl}var G_;function PA(){if(G_)return Pd.exports;G_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Pd.exports=VA(),Pd.exports}var UA=PA();const LA=()=>{};var Q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},jA=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],m=s[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},x0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,m=f?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,b=u>>2,R=(u&3)<<4|m>>4;let x=(m&15)<<2|y>>6,P=y&63;p||(P=64,f||(x=64)),r.push(n[b],n[R],n[x],n[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(S0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):jA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const R=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||R==null)throw new zA;const x=u<<2|m>>4;if(r.push(x),y!==64){const P=m<<4&240|y>>2;if(r.push(P),R!==64){const G=y<<6&192|R;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class zA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BA=function(s){const e=S0(s);return x0.encodeByteArray(e,!0)},$c=function(s){return BA(s).replace(/\./g,"")},R0=function(s){try{return x0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=()=>qA().__FIREBASE_DEFAULTS__,FA=()=>{if(typeof process>"u"||typeof Q_>"u")return;const s=Q_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},GA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&R0(s[1]);return e&&JSON.parse(e)},mh=()=>{try{return LA()||HA()||FA()||GA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},I0=s=>{var e,n;return(n=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},QA=s=>{const e=I0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},C0=()=>{var s;return(s=mh())===null||s===void 0?void 0:s.config},N0=s=>{var e;return(e=mh())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(s){return s.endsWith(".cloudworkstations.dev")}async function D0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[$c(JSON.stringify(n)),$c(JSON.stringify(f)),""].join(".")}const Ml={};function $A(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ml))Ml[e]?s.emulator.push(e):s.prod.push(e);return s}function XA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Y_=!1;function O0(s,e){if(typeof window>"u"||typeof document>"u"||!uo(window.location.host)||Ml[s]===e||Ml[s]||Y_)return;Ml[s]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=$A().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,P){x.setAttribute("width","24"),x.setAttribute("id",P),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Y_=!0,f()},x}function b(x,P){x.setAttribute("id",P),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function R(){const x=XA(r),P=n("text"),G=document.getElementById(P)||document.createElement("span"),K=n("learnmore"),F=document.getElementById(K)||document.createElement("a"),Q=n("preprendIcon"),oe=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const re=x.element;m(re),b(F,K);const he=y();p(oe,Q),re.append(oe,G,F,he),document.body.appendChild(re)}u?(G.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function WA(){var s;const e=(s=mh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ew(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function tw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nw(){const s=on();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function iw(){return!WA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sw(){try{return typeof indexedDB=="object"}catch{return!1}}function rw(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="FirebaseError";class rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aw,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xl.prototype.create)}}class Xl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?ow(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new rs(o,m,r)}}function ow(s,e){return s.replace(lw,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const lw=/\{\$([^}]+)}/g;function uw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Zs(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(K_(u)&&K_(f)){if(!Zs(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function K_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Il(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Cl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function cw(s,e){const n=new hw(s,e);return n.subscribe.bind(n)}class hw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=zd),o.error===void 0&&(o.error=zd),o.complete===void 0&&(o.complete=zd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fw(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function zd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(s){return s&&s._delegate?s._delegate:s}class Fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gw(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mw(s){return s===qr?void 0:s}function gw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const yw={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},_w=ze.INFO,vw={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},Ew=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=vw[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=_w,this._logHandler=Ew,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const bw=(s,e)=>e.some(n=>s instanceof n);let $_,X_;function Tw(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Aw(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k0=new WeakMap,Wd=new WeakMap,M0=new WeakMap,Bd=new WeakMap,Rm=new WeakMap;function ww(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(Gs(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&k0.set(n,s)}).catch(()=>{}),Rm.set(e,s),e}function Sw(s){if(Wd.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Wd.set(s,e)}let Jd={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Wd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||M0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gs(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function xw(s){Jd=s(Jd)}function Rw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(qd(this),e,...n);return M0.set(r,e.sort?e.sort():[e]),Gs(r)}:Aw().includes(s)?function(...e){return s.apply(qd(this),e),Gs(k0.get(this))}:function(...e){return Gs(s.apply(qd(this),e))}}function Iw(s){return typeof s=="function"?Rw(s):(s instanceof IDBTransaction&&Sw(s),bw(s,Tw())?new Proxy(s,Jd):s)}function Gs(s){if(s instanceof IDBRequest)return ww(s);if(Bd.has(s))return Bd.get(s);const e=Iw(s);return e!==s&&(Bd.set(s,e),Rm.set(e,s)),e}const qd=s=>Rm.get(s);function Cw(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),m=Gs(f);return r&&f.addEventListener("upgradeneeded",p=>{r(Gs(f.result),p.oldVersion,p.newVersion,Gs(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const Nw=["get","getKey","getAll","getAllKeys","count"],Dw=["put","add","delete","clear"],Hd=new Map;function Z_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Dw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Nw.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return Hd.set(e,u),u}xw(s=>({...s,get:(e,n,r)=>Z_(e,n)||s.get(e,n,r),has:(e,n)=>!!Z_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kw(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const em="@firebase/app",W_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new xm("@firebase/app"),Mw="@firebase/app-compat",Vw="@firebase/analytics-compat",Pw="@firebase/analytics",Uw="@firebase/app-check-compat",Lw="@firebase/app-check",jw="@firebase/auth",zw="@firebase/auth-compat",Bw="@firebase/database",qw="@firebase/data-connect",Hw="@firebase/database-compat",Fw="@firebase/functions",Gw="@firebase/functions-compat",Qw="@firebase/installations",Yw="@firebase/installations-compat",Kw="@firebase/messaging",$w="@firebase/messaging-compat",Xw="@firebase/performance",Zw="@firebase/performance-compat",Ww="@firebase/remote-config",Jw="@firebase/remote-config-compat",eS="@firebase/storage",tS="@firebase/storage-compat",nS="@firebase/firestore",iS="@firebase/ai",sS="@firebase/firestore-compat",rS="firebase",aS="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="[DEFAULT]",oS={[em]:"fire-core",[Mw]:"fire-core-compat",[Pw]:"fire-analytics",[Vw]:"fire-analytics-compat",[Lw]:"fire-app-check",[Uw]:"fire-app-check-compat",[jw]:"fire-auth",[zw]:"fire-auth-compat",[Bw]:"fire-rtdb",[qw]:"fire-data-connect",[Hw]:"fire-rtdb-compat",[Fw]:"fire-fn",[Gw]:"fire-fn-compat",[Qw]:"fire-iid",[Yw]:"fire-iid-compat",[Kw]:"fire-fcm",[$w]:"fire-fcm-compat",[Xw]:"fire-perf",[Zw]:"fire-perf-compat",[Ww]:"fire-rc",[Jw]:"fire-rc-compat",[eS]:"fire-gcs",[tS]:"fire-gcs-compat",[nS]:"fire-fst",[sS]:"fire-fst-compat",[iS]:"fire-vertex","fire-js":"fire-js",[rS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,lS=new Map,nm=new Map;function J_(s,e){try{s.container.addComponent(e)}catch(n){es.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Wa(s){const e=s.name;if(nm.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;nm.set(e,s);for(const n of Xc.values())J_(n,s);for(const n of lS.values())J_(n,s);return!0}function Im(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Qn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new Xl("app","Firebase",uS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=aS;function V0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Qs.create("bad-app-name",{appName:String(o)});if(n||(n=C0()),!n)throw Qs.create("no-options");const u=Xc.get(o);if(u){if(Zs(n,u.options)&&Zs(r,u.config))return u;throw Qs.create("duplicate-app",{appName:o})}const f=new pw(o);for(const p of nm.values())f.addComponent(p);const m=new cS(n,r,f);return Xc.set(o,m),m}function P0(s=tm){const e=Xc.get(s);if(!e&&s===tm&&C0())return V0();if(!e)throw Qs.create("no-app",{appName:s});return e}function Ys(s,e,n){var r;let o=(r=oS[s])!==null&&r!==void 0?r:s;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(m.join(" "));return}Wa(new Fr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="firebase-heartbeat-database",fS=1,Bl="firebase-heartbeat-store";let Fd=null;function U0(){return Fd||(Fd=Cw(hS,fS,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Qs.create("idb-open",{originalErrorMessage:s.message})})),Fd}async function dS(s){try{const n=(await U0()).transaction(Bl),r=await n.objectStore(Bl).get(L0(s));return await n.done,r}catch(e){if(e instanceof rs)es.warn(e.message);else{const n=Qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});es.warn(n.message)}}}async function ev(s,e){try{const r=(await U0()).transaction(Bl,"readwrite");await r.objectStore(Bl).put(e,L0(s)),await r.done}catch(n){if(n instanceof rs)es.warn(n.message);else{const r=Qs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});es.warn(r.message)}}}function L0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=1024,gS=30;class pS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _S(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=tv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>gS){const f=vS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tv(),{heartbeatsToSend:r,unsentEntries:o}=yS(this._heartbeatsCache.heartbeats),u=$c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return es.warn(n),""}}}function tv(){return new Date().toISOString().substring(0,10)}function yS(s,e=mS){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),nv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),nv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _S{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sw()?rw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function nv(s){return $c(JSON.stringify({version:2,heartbeats:s})).length}function vS(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(s){Wa(new Fr("platform-logger",e=>new Ow(e),"PRIVATE")),Wa(new Fr("heartbeat",e=>new pS(e),"PRIVATE")),Ys(em,W_,s),Ys(em,W_,"esm2017"),Ys("fire-js","")}ES("");var bS="firebase",TS="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(bS,TS,"app");function Cm(s,e){var n={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(n[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(n[r[o]]=s[r[o]]);return n}function j0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AS=j0,z0=new Xl("auth","Firebase",j0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new xm("@firebase/auth");function wS(s,...e){Zc.logLevel<=ze.WARN&&Zc.warn(`Auth (${co}): ${s}`,...e)}function jc(s,...e){Zc.logLevel<=ze.ERROR&&Zc.error(`Auth (${co}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(s,...e){throw Nm(s,...e)}function vi(s,...e){return Nm(s,...e)}function B0(s,e,n){const r=Object.assign(Object.assign({},AS()),{[e]:n});return new Xl("auth","Firebase",r).create(e,{appName:s.name})}function Ji(s){return B0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return z0.create(s,...e)}function xe(s,e,...n){if(!s)throw Nm(e,...n)}function Zi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw jc(e),new Error(e)}function ts(s,e){s||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function SS(){return iv()==="http:"||iv()==="https:"}function iv(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SS()||ew()||"connection"in navigator)?navigator.onLine:!0}function RS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ts(n>e,"Short delay should be less than long delay!"),this.isMobile=ZA()||tw()}get(){return xS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(s,e){ts(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NS=new Wl(3e4,6e4);function rr(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function as(s,e,n,r,o={}){return H0(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const m=Zl(Object.assign({key:s.config.apiKey},f)).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y=Object.assign({method:e,headers:p},u);return JA()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&uo(s.emulatorConfig.host)&&(y.credentials="include"),q0.fetch()(await F0(s,s.config.apiHost,n,m),y)})}async function H0(s,e,n){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},IS),e);try{const o=new OS(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw kc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw kc(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw kc(s,"user-disabled",f);const b=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw B0(s,b,y);ei(s,b)}}catch(o){if(o instanceof rs)throw o;ei(s,"network-request-failed",{message:String(o)})}}async function Jl(s,e,n,r,o={}){const u=await as(s,e,n,r,o);return"mfaPendingCredential"in u&&ei(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function F0(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?Dm(s.config,o):`${s.config.apiScheme}://${o}`;return CS.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function DS(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vi(this.auth,"network-request-failed")),NS.get())})}}function kc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=vi(s,e,r);return o.customData._tokenResponse=n,o}function sv(s){return s!==void 0&&s.enterprise!==void 0}class kS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MS(s,e){return as(s,"GET","/v2/recaptchaConfig",rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(s,e){return as(s,"POST","/v1/accounts:delete",e)}async function Wc(s,e){return as(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PS(s,e=!1){const n=pt(s),r=await n.getIdToken(e),o=Om(r);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Vl(Gd(o.auth_time)),issuedAtTime:Vl(Gd(o.iat)),expirationTime:Vl(Gd(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Gd(s){return Number(s)*1e3}function Om(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return jc("JWT malformed, contained fewer than 3 sections"),null;try{const o=R0(n);return o?JSON.parse(o):(jc("Failed to decode base64 JWT payload"),null)}catch(o){return jc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function rv(s){const e=Om(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rs&&US(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function US({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vl(this.lastLoginAt),this.creationTime=Vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(s){var e;const n=s.auth,r=await s.getIdToken(),o=await Ja(s,Wc(n,{idToken:r}));xe(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?G0(u.providerUserInfo):[],m=zS(s.providerData,f),p=s.isAnonymous,y=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),b=p?y:!1,R={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new sm(u.createdAt,u.lastLoginAt),isAnonymous:b};Object.assign(s,R)}async function jS(s){const e=pt(s);await Jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zS(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function G0(s){return s.map(e=>{var{providerId:n}=e,r=Cm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(s,e){const n=await H0(s,{},async()=>{const r=Zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await F0(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return s.emulatorConfig&&uo(s.emulatorConfig.host)&&(p.credentials="include"),q0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qS(s,e){return as(s,"POST","/v2/accounts:revokeToken",rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await BS(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new Ka;return r&&(xe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(xe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,u=Cm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new sm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PS(this,e)}reload(){return jS(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await Ja(this,VS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,u,f,m,p,y,b;const R=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(o=n.email)!==null&&o!==void 0?o:void 0,P=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,G=(f=n.photoURL)!==null&&f!==void 0?f:void 0,K=(m=n.tenantId)!==null&&m!==void 0?m:void 0,F=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Q=(y=n.createdAt)!==null&&y!==void 0?y:void 0,oe=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:re,emailVerified:he,isAnonymous:le,providerData:fe,stsTokenManager:M}=n;xe(re&&M,e,"internal-error");const S=Ka.fromJSON(this.name,M);xe(typeof re=="string",e,"internal-error"),js(R,e.name),js(x,e.name),xe(typeof he=="boolean",e,"internal-error"),xe(typeof le=="boolean",e,"internal-error"),js(P,e.name),js(G,e.name),js(K,e.name),js(F,e.name),js(Q,e.name),js(oe,e.name);const A=new Jn({uid:re,auth:e,email:x,emailVerified:he,displayName:R,isAnonymous:le,photoURL:G,phoneNumber:P,tenantId:K,stsTokenManager:S,createdAt:Q,lastLoginAt:oe});return fe&&Array.isArray(fe)&&(A.providerData=fe.map(D=>Object.assign({},D))),F&&(A._redirectEventId=F),A}static async _fromIdTokenResponse(e,n,r=!1){const o=new Ka;o.updateFromServerResponse(n);const u=new Jn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Jc(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?G0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ka;m.updateFromIdToken(r);const p=new Jn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new sm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;function Wi(s){ts(s instanceof Function,"Expected a class definition");let e=av.get(s);return e?(ts(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,av.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Q0.type="NONE";const ov=Q0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(s,e,n){return`firebase:${s}:${e}:${n}`}class $a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=zc(this.userKey,o.apiKey,u),this.fullPersistenceKey=zc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wc(this.auth,{idToken:e}).catch(()=>{});return n?Jn._fromGetAccountInfoResponse(this.auth,n,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $a(Wi(ov),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Wi(ov);const f=zc(r,e.config.apiKey,e.name);let m=null;for(const y of n)try{const b=await y._get(f);if(b){let R;if(typeof b=="string"){const x=await Wc(e,{idToken:b}).catch(()=>{});if(!x)break;R=await Jn._fromGetAccountInfoResponse(e,x,b)}else R=Jn._fromJSON(e,b);y!==u&&(m=R),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new $a(u,e,r):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new $a(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(X0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W0(e))return"Blackberry";if(J0(e))return"Webos";if(K0(e))return"Safari";if((e.includes("chrome/")||$0(e))&&!e.includes("edge/"))return"Chrome";if(Z0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y0(s=on()){return/firefox\//i.test(s)}function K0(s=on()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $0(s=on()){return/crios\//i.test(s)}function X0(s=on()){return/iemobile/i.test(s)}function Z0(s=on()){return/android/i.test(s)}function W0(s=on()){return/blackberry/i.test(s)}function J0(s=on()){return/webos/i.test(s)}function km(s=on()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function HS(s=on()){var e;return km(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FS(){return nw()&&document.documentMode===10}function eE(s=on()){return km(s)||Z0(s)||J0(s)||W0(s)||/windows phone/i.test(s)||X0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(s,e=[]){let n;switch(s){case"Browser":n=lv(on());break;case"Worker":n=`${lv(on())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(s,e={}){return as(s,"GET","/v2/passwordPolicy",rr(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=6;class KS{constructor(e){var n,r,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:YS,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uv(this),this.idTokenSubscription=new uv(this),this.beforeStateQueue=new GS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wc(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Ji(this));const n=e?pt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QS(this),n=new KS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xr(s){return pt(s)}class uv{constructor(e){this.auth=e,this.observer=null,this.addObserver=cw(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XS(s){gh=s}function nE(s){return gh.loadJS(s)}function ZS(){return gh.recaptchaEnterpriseScript}function WS(){return gh.gapiScript}function JS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class e1{constructor(){this.enterprise=new t1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class t1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const n1="recaptcha-enterprise",iE="NO_RECAPTCHA";class i1{constructor(e){this.type=n1,this.auth=Xr(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{MS(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new kS(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;sv(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(iE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e1().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!n&&sv(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=ZS();p.length!==0&&(p+=m),nE(p).then(()=>{o(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function cv(s,e,n,r=!1,o=!1){const u=new i1(s);let f;if(o)f=iE;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function rm(s,e,n,r,o){var u;if(!((u=s._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await cv(s,e,n,n==="getOobCode");return r(s,f)}else return r(s,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await cv(s,e,n,n==="getOobCode");return r(s,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(s,e){const n=Im(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Zs(u,e??{}))return o;ei(o,"already-initialized")}return n.initialize({options:e})}function r1(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wi);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function a1(s,e,n){const r=Xr(s);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=sE(e),{host:f,port:m}=o1(e),p=m===null?"":`:${m}`,y={url:`${u}//${f}${p}/`},b=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(Zs(y,r.config.emulator)&&Zs(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,uo(f)?(D0(`${u}//${f}${p}`),O0("Auth",!0)):l1()}function sE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function o1(s){const e=sE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:hv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:hv(f)}}}function hv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function l1(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,n){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function u1(s,e){return as(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(s,e){return Jl(s,"POST","/v1/accounts:signInWithPassword",rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(s,e){return Jl(s,"POST","/v1/accounts:signInWithEmailLink",rr(s,e))}async function f1(s,e){return Jl(s,"POST","/v1/accounts:signInWithEmailLink",rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends Mm{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new ql(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ql(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,n,"signInWithPassword",c1);case"emailLink":return h1(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,r,"signUpPassword",u1);case"emailLink":return f1(e,{idToken:n,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(s,e){return Jl(s,"POST","/v1/accounts:signInWithIdp",rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="http://localhost";class Gr extends Mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,u=Cm(n,["providerId","signInMethod"]);if(!r||!o)return null;const f=new Gr(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Xa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xa(e,n)}buildRequest(){const e={requestUri:d1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g1(s){const e=Il(Cl(s)).link,n=e?Il(Cl(e)).deep_link_id:null,r=Il(Cl(s)).deep_link_id;return(r?Il(Cl(r)).link:null)||r||n||e||s}class Vm{constructor(e){var n,r,o,u,f,m;const p=Il(Cl(e)),y=(n=p.apiKey)!==null&&n!==void 0?n:null,b=(r=p.oobCode)!==null&&r!==void 0?r:null,R=m1((o=p.mode)!==null&&o!==void 0?o:null);xe(y&&b&&R,"argument-error"),this.apiKey=y,this.operation=R,this.code=b,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.lang)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=g1(e);try{return new Vm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return ql._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vm.parseLink(n);return xe(r,"argument-error"),ql._fromEmailAndCode(e,r.code,r.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends rE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends eu{constructor(){super("facebook.com")}static credential(e){return Gr._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gr._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends eu{constructor(){super("github.com")}static credential(e){return Gr._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends eu{constructor(){super("twitter.com")}static credential(e,n){return Gr._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(s,e){return Jl(s,"POST","/v1/accounts:signUp",rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await Jn._fromIdTokenResponse(e,r,o),f=fv(r);return new Qr({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=fv(r);return new Qr({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function fv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends rs{constructor(e,n,r,o){var u;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,eh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new eh(e,n,r,o)}}function aE(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?eh._fromErrorAndOperation(s,u,e,r):u})}async function y1(s,e,n=!1){const r=await Ja(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Qr._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(s,e,n=!1){const{auth:r}=s;if(Qn(r.app))return Promise.reject(Ji(r));const o="reauthenticate";try{const u=await Ja(s,aE(r,o,e,s),n);xe(u.idToken,r,"internal-error");const f=Om(u.idToken);xe(f,r,"internal-error");const{sub:m}=f;return xe(s.uid===m,r,"user-mismatch"),Qr._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ei(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(s,e,n=!1){if(Qn(s.app))return Promise.reject(Ji(s));const r="signIn",o=await aE(s,r,e),u=await Qr._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function v1(s,e){return oE(Xr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(s){const e=Xr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E1(s,e,n){if(Qn(s.app))return Promise.reject(Ji(s));const r=Xr(s),f=await rm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&lE(s),p}),m=await Qr._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function b1(s,e,n){return Qn(s.app)?Promise.reject(Ji(s)):v1(pt(s),ho.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lE(s),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(s,e){return as(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=pt(s),u={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await Ja(r,T1(r.auth,u));r.displayName=f.displayName||null,r.photoURL=f.photoUrl||null;const m=r.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(f)}function w1(s,e,n,r){return pt(s).onIdTokenChanged(e,n,r)}function S1(s,e,n){return pt(s).beforeAuthStateChanged(e,n)}function x1(s,e,n,r){return pt(s).onAuthStateChanged(e,n,r)}function R1(s){return pt(s).signOut()}const th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(th,"1"),this.storage.removeItem(th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=1e3,C1=10;class cE extends uE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);FS()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,C1):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},I1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const N1=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends uE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hE.type="SESSION";const fE=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new ph(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),p=await D1(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const y=Pm("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(R){const x=R;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(b),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}function k1(s){Ei().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function M1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V1(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function P1(){return dE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="firebaseLocalStorageDb",U1=1,nh="firebaseLocalStorage",gE="fbase_key";class tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yh(s,e){return s.transaction([nh],e?"readwrite":"readonly").objectStore(nh)}function L1(){const s=indexedDB.deleteDatabase(mE);return new tu(s).toPromise()}function am(){const s=indexedDB.open(mE,U1);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(nh,{keyPath:gE})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(nh)?e(r):(r.close(),await L1(),e(await am()))})})}async function dv(s,e,n){const r=yh(s,!0).put({[gE]:e,value:n});return new tu(r).toPromise()}async function j1(s,e){const n=yh(s,!1).get(e),r=await new tu(n).toPromise();return r===void 0?null:r.value}function mv(s,e){const n=yh(s,!0).delete(e);return new tu(n).toPromise()}const z1=800,B1=3;class pE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>B1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(P1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await M1(),!this.activeServiceWorker)return;this.sender=new O1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await dv(e,th,"1"),await mv(e,th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>j1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=yh(o,!1).getAll();return new tu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pE.type="LOCAL";const q1=pE;new Wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s,e){return e?Wi(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends Mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function F1(s){return oE(s.auth,new Um(s),s.bypassAuthState)}function G1(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),_1(n,new Um(s),s.bypassAuthState)}async function Q1(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),y1(n,new Um(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F1;case"linkViaPopup":case"linkViaRedirect":return Q1;case"reauthViaPopup":case"reauthViaRedirect":return G1;default:ei(this.auth,"internal-error")}}resolve(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Wl(2e3,1e4);class Ya extends yE{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){ts(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y1.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="pendingRedirect",Bc=new Map;class $1 extends yE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bc.get(this.auth._key());if(!e){try{const r=await X1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X1(s,e){const n=J1(e),r=W1(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function Z1(s,e){Bc.set(s._key(),e)}function W1(s){return Wi(s._redirectPersistence)}function J1(s){return zc(K1,s.config.apiKey,s.name)}async function ex(s,e,n=!1){if(Qn(s.app))return Promise.reject(Ji(s));const r=Xr(s),o=H1(r,e),f=await new $1(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=10*60*1e3;class nx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ix(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_E(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tx&&this.cachedEventUids.clear(),this.cachedEventUids.has(gv(e))}saveEventToCache(e){this.cachedEventUids.add(gv(e)),this.lastProcessedEventTime=Date.now()}}function gv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function _E({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ix(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _E(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(s,e={}){return as(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ax=/^https?/;async function ox(s){if(s.config.emulator)return;const{authorizedDomains:e}=await sx(s);for(const n of e)try{if(lx(n))return}catch{}ei(s,"unauthorized-domain")}function lx(s){const e=im(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!ax.test(n))return!1;if(rx.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=new Wl(3e4,6e4);function pv(){const s=Ei().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function cx(s){return new Promise((e,n)=>{var r,o,u;function f(){pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pv(),n(vi(s,"network-request-failed"))},timeout:ux.get()})}if(!((o=(r=Ei().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ei().gapi)===null||u===void 0)&&u.load)f();else{const m=JS("iframefcb");return Ei()[m]=()=>{gapi.load?f():n(vi(s,"network-request-failed"))},nE(`${WS()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw qc=null,e})}let qc=null;function hx(s){return qc=qc||cx(s),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Wl(5e3,15e3),dx="__/auth/iframe",mx="emulator/auth/iframe",gx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},px=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yx(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Dm(e,mx):`https://${s.config.authDomain}/${dx}`,r={apiKey:e.apiKey,appName:s.name,v:co},o=px.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Zl(r).slice(1)}`}async function _x(s){const e=await hx(s),n=Ei().gapi;return xe(n,s,"internal-error"),e.open({where:document.body,url:yx(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=vi(s,"network-request-failed"),m=Ei().setTimeout(()=>{u(f)},fx.get());function p(){Ei().clearTimeout(m),o(r)}r.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ex=500,bx=600,Tx="_blank",Ax="http://localhost";class yv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wx(s,e,n,r=Ex,o=bx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p=Object.assign(Object.assign({},vx),{width:r.toString(),height:o.toString(),top:u,left:f}),y=on().toLowerCase();n&&(m=$0(y)?Tx:n),Y0(y)&&(e=e||Ax,p.scrollbars="yes");const b=Object.entries(p).reduce((x,[P,G])=>`${x}${P}=${G},`,"");if(HS(y)&&m!=="_self")return Sx(e||"",m),new yv(null);const R=window.open(e||"",m,b);xe(R,s,"popup-blocked");try{R.focus()}catch{}return new yv(R)}function Sx(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="__/auth/handler",Rx="emulator/auth/handler",Ix=encodeURIComponent("fac");async function _v(s,e,n,r,o,u){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:co,eventId:o};if(e instanceof rE){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",uw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,R]of Object.entries({}))f[b]=R}if(e instanceof eu){const b=e.getScopes().filter(R=>R!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await s._getAppCheckToken(),y=p?`#${Ix}=${encodeURIComponent(p)}`:"";return`${Cx(s)}?${Zl(m).slice(1)}${y}`}function Cx({config:s}){return s.emulator?Dm(s,Rx):`https://${s.authDomain}/${xx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="webStorageSupport";class Nx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fE,this._completeRedirectFn=ex,this._overrideRedirectResult=Z1}async _openPopup(e,n,r,o){var u;ts((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await _v(e,n,r,im(),o);return wx(e,f,Pm())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await _v(e,n,r,im(),o);return k1(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ts(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _x(e),r=new nx(e);return n.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qd,{type:Qd},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Qd];f!==void 0&&n(!!f),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ox(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eE()||K0()||km()}}const Dx=Nx;var vv="@firebase/auth",Ev="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Mx(s){Wa(new Fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;xe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tE(s)},y=new $S(r,o,u,p);return r1(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wa(new Fr("auth-internal",e=>{const n=Xr(e.getProvider("auth").getImmediate());return(r=>new Ox(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(vv,Ev,kx(s)),Ys(vv,Ev,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=5*60,Px=N0("authIdTokenMaxAge")||Vx;let bv=null;const Ux=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Px)return;const o=n==null?void 0:n.token;bv!==o&&(bv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Lx(s=P0()){const e=Im(s,"auth");if(e.isInitialized())return e.getImmediate();const n=s1(s,{popupRedirectResolver:Dx,persistence:[q1,N1,fE]}),r=N0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=Ux(u.toString());S1(n,f,()=>f(n.currentUser)),w1(n,m=>f(m))}}const o=I0("auth");return o&&a1(n,`http://${o}`),n}function jx(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}XS({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=vi("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",jx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Mx("Browser");var Tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,vE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,S){function A(){}A.prototype=S.prototype,M.D=S.prototype,M.prototype=new A,M.prototype.constructor=M,M.C=function(D,N,C){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return S.prototype[N].apply(D,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,S,A){A||(A=0);var D=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)D[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;16>N;++N)D[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=M.g[0],A=M.g[1],N=M.g[2];var C=M.g[3],I=S+(C^A&(N^C))+D[0]+3614090360&4294967295;S=A+(I<<7&4294967295|I>>>25),I=C+(N^S&(A^N))+D[1]+3905402710&4294967295,C=S+(I<<12&4294967295|I>>>20),I=N+(A^C&(S^A))+D[2]+606105819&4294967295,N=C+(I<<17&4294967295|I>>>15),I=A+(S^N&(C^S))+D[3]+3250441966&4294967295,A=N+(I<<22&4294967295|I>>>10),I=S+(C^A&(N^C))+D[4]+4118548399&4294967295,S=A+(I<<7&4294967295|I>>>25),I=C+(N^S&(A^N))+D[5]+1200080426&4294967295,C=S+(I<<12&4294967295|I>>>20),I=N+(A^C&(S^A))+D[6]+2821735955&4294967295,N=C+(I<<17&4294967295|I>>>15),I=A+(S^N&(C^S))+D[7]+4249261313&4294967295,A=N+(I<<22&4294967295|I>>>10),I=S+(C^A&(N^C))+D[8]+1770035416&4294967295,S=A+(I<<7&4294967295|I>>>25),I=C+(N^S&(A^N))+D[9]+2336552879&4294967295,C=S+(I<<12&4294967295|I>>>20),I=N+(A^C&(S^A))+D[10]+4294925233&4294967295,N=C+(I<<17&4294967295|I>>>15),I=A+(S^N&(C^S))+D[11]+2304563134&4294967295,A=N+(I<<22&4294967295|I>>>10),I=S+(C^A&(N^C))+D[12]+1804603682&4294967295,S=A+(I<<7&4294967295|I>>>25),I=C+(N^S&(A^N))+D[13]+4254626195&4294967295,C=S+(I<<12&4294967295|I>>>20),I=N+(A^C&(S^A))+D[14]+2792965006&4294967295,N=C+(I<<17&4294967295|I>>>15),I=A+(S^N&(C^S))+D[15]+1236535329&4294967295,A=N+(I<<22&4294967295|I>>>10),I=S+(N^C&(A^N))+D[1]+4129170786&4294967295,S=A+(I<<5&4294967295|I>>>27),I=C+(A^N&(S^A))+D[6]+3225465664&4294967295,C=S+(I<<9&4294967295|I>>>23),I=N+(S^A&(C^S))+D[11]+643717713&4294967295,N=C+(I<<14&4294967295|I>>>18),I=A+(C^S&(N^C))+D[0]+3921069994&4294967295,A=N+(I<<20&4294967295|I>>>12),I=S+(N^C&(A^N))+D[5]+3593408605&4294967295,S=A+(I<<5&4294967295|I>>>27),I=C+(A^N&(S^A))+D[10]+38016083&4294967295,C=S+(I<<9&4294967295|I>>>23),I=N+(S^A&(C^S))+D[15]+3634488961&4294967295,N=C+(I<<14&4294967295|I>>>18),I=A+(C^S&(N^C))+D[4]+3889429448&4294967295,A=N+(I<<20&4294967295|I>>>12),I=S+(N^C&(A^N))+D[9]+568446438&4294967295,S=A+(I<<5&4294967295|I>>>27),I=C+(A^N&(S^A))+D[14]+3275163606&4294967295,C=S+(I<<9&4294967295|I>>>23),I=N+(S^A&(C^S))+D[3]+4107603335&4294967295,N=C+(I<<14&4294967295|I>>>18),I=A+(C^S&(N^C))+D[8]+1163531501&4294967295,A=N+(I<<20&4294967295|I>>>12),I=S+(N^C&(A^N))+D[13]+2850285829&4294967295,S=A+(I<<5&4294967295|I>>>27),I=C+(A^N&(S^A))+D[2]+4243563512&4294967295,C=S+(I<<9&4294967295|I>>>23),I=N+(S^A&(C^S))+D[7]+1735328473&4294967295,N=C+(I<<14&4294967295|I>>>18),I=A+(C^S&(N^C))+D[12]+2368359562&4294967295,A=N+(I<<20&4294967295|I>>>12),I=S+(A^N^C)+D[5]+4294588738&4294967295,S=A+(I<<4&4294967295|I>>>28),I=C+(S^A^N)+D[8]+2272392833&4294967295,C=S+(I<<11&4294967295|I>>>21),I=N+(C^S^A)+D[11]+1839030562&4294967295,N=C+(I<<16&4294967295|I>>>16),I=A+(N^C^S)+D[14]+4259657740&4294967295,A=N+(I<<23&4294967295|I>>>9),I=S+(A^N^C)+D[1]+2763975236&4294967295,S=A+(I<<4&4294967295|I>>>28),I=C+(S^A^N)+D[4]+1272893353&4294967295,C=S+(I<<11&4294967295|I>>>21),I=N+(C^S^A)+D[7]+4139469664&4294967295,N=C+(I<<16&4294967295|I>>>16),I=A+(N^C^S)+D[10]+3200236656&4294967295,A=N+(I<<23&4294967295|I>>>9),I=S+(A^N^C)+D[13]+681279174&4294967295,S=A+(I<<4&4294967295|I>>>28),I=C+(S^A^N)+D[0]+3936430074&4294967295,C=S+(I<<11&4294967295|I>>>21),I=N+(C^S^A)+D[3]+3572445317&4294967295,N=C+(I<<16&4294967295|I>>>16),I=A+(N^C^S)+D[6]+76029189&4294967295,A=N+(I<<23&4294967295|I>>>9),I=S+(A^N^C)+D[9]+3654602809&4294967295,S=A+(I<<4&4294967295|I>>>28),I=C+(S^A^N)+D[12]+3873151461&4294967295,C=S+(I<<11&4294967295|I>>>21),I=N+(C^S^A)+D[15]+530742520&4294967295,N=C+(I<<16&4294967295|I>>>16),I=A+(N^C^S)+D[2]+3299628645&4294967295,A=N+(I<<23&4294967295|I>>>9),I=S+(N^(A|~C))+D[0]+4096336452&4294967295,S=A+(I<<6&4294967295|I>>>26),I=C+(A^(S|~N))+D[7]+1126891415&4294967295,C=S+(I<<10&4294967295|I>>>22),I=N+(S^(C|~A))+D[14]+2878612391&4294967295,N=C+(I<<15&4294967295|I>>>17),I=A+(C^(N|~S))+D[5]+4237533241&4294967295,A=N+(I<<21&4294967295|I>>>11),I=S+(N^(A|~C))+D[12]+1700485571&4294967295,S=A+(I<<6&4294967295|I>>>26),I=C+(A^(S|~N))+D[3]+2399980690&4294967295,C=S+(I<<10&4294967295|I>>>22),I=N+(S^(C|~A))+D[10]+4293915773&4294967295,N=C+(I<<15&4294967295|I>>>17),I=A+(C^(N|~S))+D[1]+2240044497&4294967295,A=N+(I<<21&4294967295|I>>>11),I=S+(N^(A|~C))+D[8]+1873313359&4294967295,S=A+(I<<6&4294967295|I>>>26),I=C+(A^(S|~N))+D[15]+4264355552&4294967295,C=S+(I<<10&4294967295|I>>>22),I=N+(S^(C|~A))+D[6]+2734768916&4294967295,N=C+(I<<15&4294967295|I>>>17),I=A+(C^(N|~S))+D[13]+1309151649&4294967295,A=N+(I<<21&4294967295|I>>>11),I=S+(N^(A|~C))+D[4]+4149444226&4294967295,S=A+(I<<6&4294967295|I>>>26),I=C+(A^(S|~N))+D[11]+3174756917&4294967295,C=S+(I<<10&4294967295|I>>>22),I=N+(S^(C|~A))+D[2]+718787259&4294967295,N=C+(I<<15&4294967295|I>>>17),I=A+(C^(N|~S))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+C&4294967295}r.prototype.u=function(M,S){S===void 0&&(S=M.length);for(var A=S-this.blockSize,D=this.B,N=this.h,C=0;C<S;){if(N==0)for(;C<=A;)o(this,M,C),C+=this.blockSize;if(typeof M=="string"){for(;C<S;)if(D[N++]=M.charCodeAt(C++),N==this.blockSize){o(this,D),N=0;break}}else for(;C<S;)if(D[N++]=M[C++],N==this.blockSize){o(this,D),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;var A=8*this.o;for(S=M.length-8;S<M.length;++S)M[S]=A&255,A/=256;for(this.u(M),M=Array(16),S=A=0;4>S;++S)for(var D=0;32>D;D+=8)M[A++]=this.g[S]>>>D&255;return M};function u(M,S){var A=m;return Object.prototype.hasOwnProperty.call(A,M)?A[M]:A[M]=S(M)}function f(M,S){this.h=S;for(var A=[],D=!0,N=M.length-1;0<=N;N--){var C=M[N]|0;D&&C==S||(A[N]=C,D=!1)}this.g=A}var m={};function p(M){return-128<=M&&128>M?u(M,function(S){return new f([S|0],0>S?-1:0)}):new f([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return R;if(0>M)return F(y(-M));for(var S=[],A=1,D=0;M>=A;D++)S[D]=M/A|0,A*=4294967296;return new f(S,0)}function b(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return F(b(M.substring(1),S));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(S,8)),D=R,N=0;N<M.length;N+=8){var C=Math.min(8,M.length-N),I=parseInt(M.substring(N,N+C),S);8>C?(C=y(Math.pow(S,C)),D=D.j(C).add(y(I))):(D=D.j(A),D=D.add(y(I)))}return D}var R=p(0),x=p(1),P=p(16777216);s=f.prototype,s.m=function(){if(K(this))return-F(this).m();for(var M=0,S=1,A=0;A<this.g.length;A++){var D=this.i(A);M+=(0<=D?D:4294967296+D)*S,S*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(G(this))return"0";if(K(this))return"-"+F(this).toString(M);for(var S=y(Math.pow(M,6)),A=this,D="";;){var N=he(A,S).g;A=Q(A,N.j(S));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(M);if(A=N,G(A))return C+D;for(;6>C.length;)C="0"+C;D=C+D}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function G(M){if(M.h!=0)return!1;for(var S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function K(M){return M.h==-1}s.l=function(M){return M=Q(this,M),K(M)?-1:G(M)?0:1};function F(M){for(var S=M.g.length,A=[],D=0;D<S;D++)A[D]=~M.g[D];return new f(A,~M.h).add(x)}s.abs=function(){return K(this)?F(this):this},s.add=function(M){for(var S=Math.max(this.g.length,M.g.length),A=[],D=0,N=0;N<=S;N++){var C=D+(this.i(N)&65535)+(M.i(N)&65535),I=(C>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);D=I>>>16,C&=65535,I&=65535,A[N]=I<<16|C}return new f(A,A[A.length-1]&-2147483648?-1:0)};function Q(M,S){return M.add(F(S))}s.j=function(M){if(G(this)||G(M))return R;if(K(this))return K(M)?F(this).j(F(M)):F(F(this).j(M));if(K(M))return F(this.j(F(M)));if(0>this.l(P)&&0>M.l(P))return y(this.m()*M.m());for(var S=this.g.length+M.g.length,A=[],D=0;D<2*S;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var N=0;N<M.g.length;N++){var C=this.i(D)>>>16,I=this.i(D)&65535,de=M.i(N)>>>16,we=M.i(N)&65535;A[2*D+2*N]+=I*we,oe(A,2*D+2*N),A[2*D+2*N+1]+=C*we,oe(A,2*D+2*N+1),A[2*D+2*N+1]+=I*de,oe(A,2*D+2*N+1),A[2*D+2*N+2]+=C*de,oe(A,2*D+2*N+2)}for(D=0;D<S;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=S;D<2*S;D++)A[D]=0;return new f(A,0)};function oe(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function re(M,S){this.g=M,this.h=S}function he(M,S){if(G(S))throw Error("division by zero");if(G(M))return new re(R,R);if(K(M))return S=he(F(M),S),new re(F(S.g),F(S.h));if(K(S))return S=he(M,F(S)),new re(F(S.g),S.h);if(30<M.g.length){if(K(M)||K(S))throw Error("slowDivide_ only works with positive integers.");for(var A=x,D=S;0>=D.l(M);)A=le(A),D=le(D);var N=fe(A,1),C=fe(D,1);for(D=fe(D,2),A=fe(A,2);!G(D);){var I=C.add(D);0>=I.l(M)&&(N=N.add(A),C=I),D=fe(D,1),A=fe(A,1)}return S=Q(M,N.j(S)),new re(N,S)}for(N=R;0<=M.l(S);){for(A=Math.max(1,Math.floor(M.m()/S.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),C=y(A),I=C.j(S);K(I)||0<I.l(M);)A-=D,C=y(A),I=C.j(S);G(C)&&(C=x),N=N.add(C),M=Q(M,I)}return new re(N,M)}s.A=function(M){return he(this,M).h},s.and=function(M){for(var S=Math.max(this.g.length,M.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)&M.i(D);return new f(A,this.h&M.h)},s.or=function(M){for(var S=Math.max(this.g.length,M.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)|M.i(D);return new f(A,this.h|M.h)},s.xor=function(M){for(var S=Math.max(this.g.length,M.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)^M.i(D);return new f(A,this.h^M.h)};function le(M){for(var S=M.g.length+1,A=[],D=0;D<S;D++)A[D]=M.i(D)<<1|M.i(D-1)>>>31;return new f(A,M.h)}function fe(M,S){var A=S>>5;S%=32;for(var D=M.g.length-A,N=[],C=0;C<D;C++)N[C]=0<S?M.i(C+A)>>>S|M.i(C+A+1)<<32-S:M.i(C+A);return new f(N,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=b,Ks=f}).apply(typeof Tv<"u"?Tv:typeof self<"u"?self:typeof window<"u"?window:{});var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,Nl,bE,Hc,om,TE,AE,wE;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mc=="object"&&Mc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function o(c,g){if(g)e:{var _=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var L=c[w];if(!(L in _))break e;_=_[L]}c=c[c.length-1],w=_[c],g=g(w),g!=w&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,w=!1,L={next:function(){if(!w&&_<c.length){var Y=_++;return{value:g(Y,c[Y]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function b(c,g,_){return c.call.apply(c.bind,arguments)}function R(c,g,_){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),c.apply(g,L)}}return function(){return c.apply(g,arguments)}}function x(c,g,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:R,x.apply(null,arguments)}function P(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function G(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(w,L,Y){for(var ce=Array(arguments.length-2),He=2;He<arguments.length;He++)ce[He-2]=arguments[He];return g.prototype[L].apply(w,ce)}}function K(c){const g=c.length;if(0<g){const _=Array(g);for(let w=0;w<g;w++)_[w]=c[w];return _}return[]}function F(c,g){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const L=c.length||0,Y=w.length||0;c.length=L+Y;for(let ce=0;ce<Y;ce++)c[L+ce]=w[ce]}else c.push(w)}}class Q{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function oe(c){return/^[\s\xa0]*$/.test(c)}function re(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var le=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function fe(c,g,_){for(const w in c)g.call(_,c[w],w,c)}function M(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let _,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(_ in w)c[_]=w[_];for(let Y=0;Y<A.length;Y++)_=A[Y],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function N(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function C(c){m.setTimeout(()=>{throw c},0)}function I(){var c=_e;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class de{constructor(){this.h=this.g=null}add(g,_){const w=we.get();w.set(g,_),this.h?this.h.next=w:this.g=w,this.h=w}}var we=new Q(()=>new H,c=>c.reset());class H{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,se=!1,_e=new de,k=()=>{const c=m.Promise.resolve(void 0);Z=()=>{c.then($)}};var $=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(_){C(_)}var g=we;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}se=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c}();function Ee(c,g){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(le){e:{try{he(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Se[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ee.aa.h.call(this)}}G(Ee,ie);var Se={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var bt="closure_listenable_"+(1e6*Math.random()|0),et=0;function On(c,g,_,w,L){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!w,this.ha=L,this.key=++et,this.da=this.fa=!1}function ue(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ne(c){this.src=c,this.g={},this.h=0}Ne.prototype.add=function(c,g,_,w,L){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var ce=qe(c,g,w,L);return-1<ce?(g=c[ce],_||(g.fa=!1)):(g=new On(g,this.src,Y,!!w,L),g.fa=_,c.push(g)),g};function Pe(c,g){var _=g.type;if(_ in c.g){var w=c.g[_],L=Array.prototype.indexOf.call(w,g,void 0),Y;(Y=0<=L)&&Array.prototype.splice.call(w,L,1),Y&&(ue(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function qe(c,g,_,w){for(var L=0;L<c.length;++L){var Y=c[L];if(!Y.da&&Y.listener==g&&Y.capture==!!_&&Y.ha==w)return L}return-1}var De="closure_lm_"+(1e6*Math.random()|0),Ct={};function ls(c,g,_,w,L){if(Array.isArray(g)){for(var Y=0;Y<g.length;Y++)ls(c,g[Y],_,w,L);return null}return _=cu(_),c&&c[bt]?c.K(g,_,y(w)?!!w.capture:!1,L):Nt(c,g,_,!1,w,L)}function Nt(c,g,_,w,L,Y){if(!g)throw Error("Invalid event type");var ce=y(L)?!!L.capture:!!L,He=Si(c);if(He||(c[De]=He=new Ne(c)),_=He.add(g,_,w,ce,Y),_.proxy)return _;if(w=kn(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)pe||(L=ce),L===void 0&&(L=!1),c.addEventListener(g.toString(),w,L);else if(c.attachEvent)c.attachEvent(cs(g.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function kn(){function c(_){return g.call(c.src,c.listener,_)}const g=vo;return c}function lr(c,g,_,w,L){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)lr(c,g[Y],_,w,L);else w=y(w)?!!w.capture:!!w,_=cu(_),c&&c[bt]?(c=c.i,g=String(g).toString(),g in c.g&&(Y=c.g[g],_=qe(Y,_,w,L),-1<_&&(ue(Y[_]),Array.prototype.splice.call(Y,_,1),Y.length==0&&(delete c.g[g],c.h--)))):c&&(c=Si(c))&&(g=c.g[g.toString()],c=-1,g&&(c=qe(g,_,w,L)),(_=-1<c?g[c]:null)&&us(_))}function us(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[bt])Pe(g.i,c);else{var _=c.type,w=c.proxy;g.removeEventListener?g.removeEventListener(_,w,c.capture):g.detachEvent?g.detachEvent(cs(_),w):g.addListener&&g.removeListener&&g.removeListener(w),(_=Si(g))?(Pe(_,c),_.h==0&&(_.src=null,g[De]=null)):ue(c)}}}function cs(c){return c in Ct?Ct[c]:Ct[c]="on"+c}function vo(c,g){if(c.da)c=!0;else{g=new Ee(g,this);var _=c.listener,w=c.ha||c.src;c.fa&&us(c),c=_.call(w,g)}return c}function Si(c){return c=c[De],c instanceof Ne?c:null}var Eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(c){return typeof c=="function"?c:(c[Eo]||(c[Eo]=function(g){return c.handleEvent(g)}),c[Eo])}function dt(){ee.call(this),this.i=new Ne(this),this.M=this,this.F=null}G(dt,ee),dt.prototype[bt]=!0,dt.prototype.removeEventListener=function(c,g,_,w){lr(this,c,g,_,w)};function Ze(c,g){var _,w=c.F;if(w)for(_=[];w;w=w.F)_.push(w);if(c=c.M,w=g.type||g,typeof g=="string")g=new ie(g,c);else if(g instanceof ie)g.target=g.target||c;else{var L=g;g=new ie(w,c),D(g,L)}if(L=!0,_)for(var Y=_.length-1;0<=Y;Y--){var ce=g.g=_[Y];L=En(ce,w,!0,g)&&L}if(ce=g.g=c,L=En(ce,w,!0,g)&&L,L=En(ce,w,!1,g)&&L,_)for(Y=0;Y<_.length;Y++)ce=g.g=_[Y],L=En(ce,w,!1,g)&&L}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],w=0;w<_.length;w++)ue(_[w]);delete c.g[g],c.h--}}this.F=null},dt.prototype.K=function(c,g,_,w){return this.i.add(String(c),g,!1,_,w)},dt.prototype.L=function(c,g,_,w){return this.i.add(String(c),g,!0,_,w)};function En(c,g,_,w){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,Y=0;Y<g.length;++Y){var ce=g[Y];if(ce&&!ce.da&&ce.capture==_){var He=ce.listener,Ot=ce.ha||ce.src;ce.fa&&Pe(c.i,ce),L=He.call(Ot,w)!==!1&&L}}return L&&!w.defaultPrevented}function en(c,g,_){if(typeof c=="function")_&&(c=x(c,_));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function hu(c){c.g=en(()=>{c.g=null,c.i&&(c.i=!1,hu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Vh extends ee{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:hu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(c){ee.call(this),this.h=c,this.g={}}G(ur,ee);var cr=[];function hr(c){fe(c.g,function(g,_){this.g.hasOwnProperty(_)&&us(g)},c),c.g={}}ur.prototype.N=function(){ur.aa.N.call(this),hr(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=m.JSON.stringify,Jr=m.JSON.parse,fr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function bo(){}bo.prototype.h=null;function To(c){return c.h||(c.h=c.i())}function Ao(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ri(){ie.call(this,"d")}G(Ri,ie);function wo(){ie.call(this,"c")}G(wo,ie);var ni={},So=null;function hs(){return So=So||new dt}ni.La="serverreachability";function ea(c){ie.call(this,ni.La,c)}G(ea,ie);function fs(c){const g=hs();Ze(g,new ea(g))}ni.STAT_EVENT="statevent";function fu(c,g){ie.call(this,ni.STAT_EVENT,c),this.stat=g}G(fu,ie);function ut(c){const g=hs();Ze(g,new fu(g,c))}ni.Ma="timingevent";function Dt(c,g){ie.call(this,ni.Ma,c),this.size=g}G(Dt,ie);function Tt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function xo(c,g,_,w,L,Y){c.info(function(){if(c.g)if(Y)for(var ce="",He=Y.split("&"),Ot=0;Ot<He.length;Ot++){var Fe=He[Ot].split("=");if(1<Fe.length){var zt=Fe[0];Fe=Fe[1];var kt=zt.split("_");ce=2<=kt.length&&kt[1]=="type"?ce+(zt+"="+Fe+"&"):ce+(zt+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+g+`
`+_+`
`+ce})}function Ph(c,g,_,w,L,Y,ce){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+g+`
`+_+`
`+Y+" "+ce})}function ds(c,g,_,w){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+dr(c,_)+(w?" "+w:"")})}function du(c,g){c.info(function(){return"TIMEOUT: "+g})}Mn.prototype.info=function(){};function dr(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var w=_[c];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var Y=L[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<L.length;ce++)L[ce]=""}}}}return Yn(_)}catch{return g}}var ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ii;function si(){}G(si,bo),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ii=new si;function ln(c,g,_,w){this.j=c,this.i=g,this.l=_,this.R=w||1,this.U=new ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var Ro={},ta={};function Kn(c,g,_){c.L=1,c.v=_r(bn(g)),c.m=_,c.P=!0,Ci(c,null)}function Ci(c,g){c.F=Date.now(),mr(c),c.A=bn(c.v);var _=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),ko(_.i,"t",w),c.C=0,_=c.j.J,c.h=new yt,c.g=Cu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Vh(x(c.Y,c,c.g),c.O)),g=c.U,_=c.g,w=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(cr[0]=L.toString()),L=cr);for(var Y=0;Y<L.length;Y++){var ce=ls(_,L[Y],w||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),fs(),xo(c.i,c.u,c.A,c.l,c.R,c.m)}ln.prototype.ca=function(c){c=c.target;const g=this.M;g&&Ln(c)==3?g.j():this.Y(c)},ln.prototype.Y=function(c){try{if(c==this.g)e:{const kt=Ln(this.g);var g=this.g.Ba();const Ui=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||kt!=4||g==7||(g==8||0>=Ui?fs(3):fs(2)),gs(this);var _=this.g.Z();this.X=_;t:if(mu(this)){var w=bu(this.g);c="";var L=w.length,Y=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),ri(this);var ce="";break t}this.h.i=new m.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,c+=this.h.i.decode(w[g],{stream:!(Y&&g==L-1)});w.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,Ph(this.i,this.u,this.A,this.l,this.R,kt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Ot=this.g;if((He=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(He)){var Fe=He;break t}}Fe=null}if(_=Fe)ds(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gr(this,_);else{this.o=!1,this.s=3,ut(12),Gt(this),ri(this);break e}}if(this.P){_=!0;let Qt;for(;!this.J&&this.C<ce.length;)if(Qt=gu(this,ce),Qt==ta){kt==4&&(this.s=4,ut(14),_=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Ro){this.s=4,ut(15),ds(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else ds(this.i,this.l,Qt,null),gr(this,Qt);if(mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ce.length!=0||this.h.h||(this.s=1,ut(16),_=!1),this.o=this.o&&_,!_)ds(this.i,this.l,ce,"[Invalid Chunked Response]"),Gt(this),ri(this);else if(0<ce.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),xr(zt),zt.M=!0,ut(11))}}else ds(this.i,this.l,ce,null),gr(this,ce);kt==4&&Gt(this),this.o&&!this.J&&(kt==4?xu(this.j,this):(this.o=!1,mr(this)))}else Bh(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Gt(this),ri(this)}}}catch{}finally{}};function mu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gu(c,g){var _=c.C,w=g.indexOf(`
`,_);return w==-1?ta:(_=Number(g.substring(_,w)),isNaN(_)?Ro:(w+=1,w+_>g.length?ta:(g=g.slice(w,w+_),c.C=w+_,g)))}ln.prototype.cancel=function(){this.J=!0,Gt(this)};function mr(c){c.S=Date.now()+c.I,pu(c,c.I)}function pu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Tt(x(c.ba,c),g)}function gs(c){c.B&&(m.clearTimeout(c.B),c.B=null)}ln.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(du(this.i,this.A),this.L!=2&&(fs(),ut(17)),Gt(this),this.s=2,ri(this)):pu(this,this.S-c)};function ri(c){c.j.G==0||c.J||xu(c.j,c)}function Gt(c){gs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,hr(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function gr(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Io(_.h,c))){if(!c.K&&Io(_.h,c)&&_.G==3){try{var w=_.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)da(_),ha(_);else break e;Lo(_),ut(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Tt(x(_.Za,_),6e3));if(1>=ia(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Pi(_,11)}else if((c.K||_.g==c)&&da(_),!oe(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Fe=L[g];if(_.T=Fe[0],Fe=Fe[1],_.G==2)if(Fe[0]=="c"){_.K=Fe[1],_.ia=Fe[2];const zt=Fe[3];zt!=null&&(_.la=zt,_.j.info("VER="+_.la));const kt=Fe[4];kt!=null&&(_.Aa=kt,_.j.info("SVER="+_.Aa));const Ui=Fe[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(w=1.5*Ui,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const Qt=c.g;if(Qt){const fi=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var Y=w.h;Y.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(sa(Y,Y.h),Y.h=null))}if(w.D){const zo=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(w.ya=zo,tt(w.I,w.D,zo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ce=c;if(w.qa=Iu(w,w.J?w.ia:null,w.W),ce.K){un(w.h,ce);var He=ce,Ot=w.L;Ot&&(He.I=Ot),He.B&&(gs(He),mr(He)),w.g=ce}else wu(w);0<_.i.length&&fa(_)}else Fe[0]!="stop"&&Fe[0]!="close"||Pi(_,7);else _.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Pi(_,7):Po(_):Fe[0]!="noop"&&_.l&&_.l.ta(Fe),_.v=0)}}fs(4)}catch{}}var yu=class{constructor(c,g){this.g=c,this.map=g}};function Ni(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function na(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ia(c){return c.h?1:c.g?c.g.size:0}function Io(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function sa(c,g){c.g?c.g.add(g):c.h=g}function un(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ni.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Co(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return K(c.i)}function Uh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,w=0;w<_;w++)g.push(c[w]);return g}g=[],_=0;for(w in c)g[_++]=c[w];return g}function ra(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const w in c)g[_++]=w;return g}}}function No(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=ra(c),w=Uh(c),L=w.length,Y=0;Y<L;Y++)g.call(void 0,w[Y],_&&_[Y],c)}var pr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var w=c[_].indexOf("="),L=null;if(0<=w){var Y=c[_].substring(0,w);L=c[_].substring(w+1)}else Y=c[_];g(Y,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function At(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof At){this.h=c.h,yr(this,c.j),this.o=c.o,this.g=c.g,ps(this,c.s),this.l=c.l;var g=c.i,_=new Oi;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Di(this,_),this.m=c.m}else c&&(g=String(c).match(pr))?(this.h=!1,yr(this,g[1]||"",!0),this.o=Vn(g[2]||""),this.g=Vn(g[3]||"",!0),ps(this,g[4]),this.l=Vn(g[5]||"",!0),Di(this,g[6]||"",!0),this.m=Vn(g[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}At.prototype.toString=function(){var c=[],g=this.j;g&&c.push(vr(g,Do,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(vr(g,Do,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(vr(_,_.charAt(0)=="/"?jh:Oo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",vr(_,aa)),c.join("")};function bn(c){return new At(c)}function yr(c,g,_){c.j=_?Vn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ps(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Di(c,g,_){g instanceof Oi?(c.i=g,vu(c.i,c.h)):(_||(g=vr(g,zh)),c.i=new Oi(g,c.h))}function tt(c,g,_){c.i.set(g,_)}function _r(c){return tt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Vn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vr(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,_u),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function _u(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Do=/[#\/\?@]/g,Oo=/[#\?:]/g,jh=/[#\?]/g,zh=/[#\?@]/g,aa=/#/g;function Oi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Pn(c){c.g||(c.g=new Map,c.h=0,c.i&&Lh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}s=Oi.prototype,s.add=function(c,g){Pn(this),this.i=null,c=ai(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function ki(c,g){Pn(c),g=ai(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Mi(c,g){return Pn(c),g=ai(c,g),c.g.has(g)}s.forEach=function(c,g){Pn(this),this.g.forEach(function(_,w){_.forEach(function(L){c.call(g,L,w,this)},this)},this)},s.na=function(){Pn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let w=0;w<g.length;w++){const L=c[w];for(let Y=0;Y<L.length;Y++)_.push(g[w])}return _},s.V=function(c){Pn(this);let g=[];if(typeof c=="string")Mi(this,c)&&(g=g.concat(this.g.get(ai(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},s.set=function(c,g){return Pn(this),this.i=null,c=ai(this,c),Mi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},s.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ko(c,g,_){ki(c,g),0<_.length&&(c.i=null,c.g.set(ai(c,g),K(_)),c.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var w=g[_];const Y=encodeURIComponent(String(w)),ce=this.V(w);for(w=0;w<ce.length;w++){var L=Y;ce[w]!==""&&(L+="="+encodeURIComponent(String(ce[w]))),c.push(L)}}return this.i=c.join("&")};function ai(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function vu(c,g){g&&!c.j&&(Pn(c),c.i=null,c.g.forEach(function(_,w){var L=w.toLowerCase();w!=L&&(ki(this,w),ko(this,L,_))},c)),c.j=g}function Er(c,g){const _=new Mn;if(m.Image){const w=new Image;w.onload=P(Un,_,"TestLoadImage: loaded",!0,g,w),w.onerror=P(Un,_,"TestLoadImage: error",!1,g,w),w.onabort=P(Un,_,"TestLoadImage: abort",!1,g,w),w.ontimeout=P(Un,_,"TestLoadImage: timeout",!1,g,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else g(!1)}function $n(c,g){const _=new Mn,w=new AbortController,L=setTimeout(()=>{w.abort(),Un(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:w.signal}).then(Y=>{clearTimeout(L),Y.ok?Un(_,"TestPingServer: ok",!0,g):Un(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Un(_,"TestPingServer: error",!1,g)})}function Un(c,g,_,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(_)}catch{}}function br(){this.g=new fr}function oi(c,g,_){const w=_||"";try{No(c,function(L,Y){let ce=L;y(L)&&(ce=Yn(L)),g.push(w+Y+"="+encodeURIComponent(ce))})}catch(L){throw g.push(w+"type="+encodeURIComponent("_badmap")),L}}function ys(c){this.l=c.Ub||null,this.j=c.eb||!1}G(ys,bo),ys.prototype.g=function(){return new Vi(this.l,this.j)},ys.prototype.i=function(c){return function(){return c}}({});function Vi(c,g){dt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Vi,dt),s=Vi.prototype,s.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,ui(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?li(this):ui(this),this.readyState==3&&Mo(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,li(this))},s.Qa=function(c){this.g&&(this.response=c,li(this))},s.ga=function(){this.g&&li(this)};function li(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ui(c)}s.setRequestHeader=function(c,g){this.u.append(c,g)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function ui(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Vo(c){let g="";return fe(c,function(_,w){g+=w,g+=":",g+=_,g+=`\r
`}),g}function jt(c,g,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Vo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):tt(c,g,_))}function $e(c){dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G($e,dt);var oa=/^https?$/i,Tr=["POST","PUT"];s=$e.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,g,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ii.g(),this.v=this.o?To(this.o):To(ii),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Y){Eu(this,Y);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)_.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())_.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Tr,g,void 0))||w||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of _)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ar(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Eu(this,Y)}};function Eu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,la(c),ci(c)}function la(c){c.A||(c.A=!0,Ze(c,"complete"),Ze(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ze(this,"complete"),Ze(this,"abort"),ci(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),$e.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ua(this):this.bb())},s.bb=function(){ua(this)};function ua(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Ln(c)!=4||c.Z()!=2)){if(c.u&&Ln(c)==4)en(c.Ea,0,c);else if(Ze(c,"readystatechange"),Ln(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var w;if(w=ce===0){var L=String(c.D).match(pr)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),w=!oa.test(L?L.toLowerCase():"")}_=w}if(_)Ze(c,"complete"),Ze(c,"success");else{c.m=6;try{var Y=2<Ln(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",la(c)}}finally{ci(c)}}}}function ci(c,g){if(c.g){Ar(c);const _=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ze(c,"ready");try{_.onreadystatechange=w}catch{}}}function Ar(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Ln(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Jr(g)}};function bu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Bh(c){const g={};c=(c.g&&2<=Ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(oe(c[w]))continue;var _=N(c[w]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=g[L]||[];g[L]=Y,Y.push(_)}M(g,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ca(c){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,c),this.cb=wr("retryDelaySeedMs",1e4,c),this.Wa=wr("forwardChannelMaxRetries",2,c),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(c&&c.concurrentRequestLimit),this.Da=new br,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ca.prototype,s.la=8,s.G=1,s.connect=function(c,g,_,w){ut(0),this.W=c,this.H=g||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Iu(this,null,this.W),fa(this)};function Po(c){if(Tu(c),c.G==3){var g=c.U++,_=bn(c.I);if(tt(_,"SID",c.K),tt(_,"RID",g),tt(_,"TYPE","terminate"),Sr(c,_),g=new ln(c,c.j,g),g.L=2,g.v=_r(bn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=Cu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),mr(g)}Ru(c)}function ha(c){c.g&&(xr(c),c.g.cancel(),c.g=null)}function Tu(c){ha(c),c.u&&(m.clearTimeout(c.u),c.u=null),da(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function fa(c){if(!na(c.h)&&!c.s){c.s=!0;var g=c.Ga;Z||k(),se||(Z(),se=!0),_e.add(g,c),c.B=0}}function qh(c,g){return ia(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Tt(x(c.Ga,c,g),jo(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new ln(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=S(Y),D(Y,this.S)):Y=this.S),this.m!==null||this.O||(L.H=Y,Y=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Au(this,L,g),_=bn(this.I),tt(_,"RID",c),tt(_,"CVER",22),this.D&&tt(_,"X-HTTP-Session-Id",this.D),Sr(this,_),Y&&(this.O?g="headers="+encodeURIComponent(String(Vo(Y)))+"&"+g:this.m&&jt(_,this.m,Y)),sa(this.h,L),this.Ua&&tt(_,"TYPE","init"),this.P?(tt(_,"$req",g),tt(_,"SID","null"),L.T=!0,Kn(L,_,null)):Kn(L,_,g),this.G=2}}else this.G==3&&(c?Uo(this,c):this.i.length==0||na(this.h)||Uo(this))};function Uo(c,g){var _;g?_=g.l:_=c.U++;const w=bn(c.I);tt(w,"SID",c.K),tt(w,"RID",_),tt(w,"AID",c.T),Sr(c,w),c.m&&c.o&&jt(w,c.m,c.o),_=new ln(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Au(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),sa(c.h,_),Kn(_,w,g)}function Sr(c,g){c.H&&fe(c.H,function(_,w){tt(g,w,_)}),c.l&&No({},function(_,w){tt(g,w,_)})}function Au(c,g,_){_=Math.min(c.i.length,_);var w=c.l?x(c.l.Na,c.l,c):null;e:{var L=c.i;let Y=-1;for(;;){const ce=["count="+_];Y==-1?0<_?(Y=L[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let He=!0;for(let Ot=0;Ot<_;Ot++){let Fe=L[Ot].g;const zt=L[Ot].map;if(Fe-=Y,0>Fe)Y=Math.max(0,L[Ot].g-100),He=!1;else try{oi(zt,ce,"req"+Fe+"_")}catch{w&&w(zt)}}if(He){w=ce.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,w}function wu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Z||k(),se||(Z(),se=!0),_e.add(g,c),c.v=0}}function Lo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Tt(x(c.Fa,c),jo(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Tt(x(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),ha(this),Su(this))};function xr(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Su(c){c.g=new ln(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=bn(c.qa);tt(g,"RID","rpc"),tt(g,"SID",c.K),tt(g,"AID",c.T),tt(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&tt(g,"TO",c.ja),tt(g,"TYPE","xmlhttp"),Sr(c,g),c.m&&c.o&&jt(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=_r(bn(g)),_.m=null,_.P=!0,Ci(_,c)}s.Za=function(){this.C!=null&&(this.C=null,ha(this),Lo(this),ut(19))};function da(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function xu(c,g){var _=null;if(c.g==g){da(c),xr(c),c.g=null;var w=2}else if(Io(c.h,g))_=g.D,un(c.h,g),w=1;else return;if(c.G!=0){if(g.o)if(w==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=c.B;w=hs(),Ze(w,new Dt(w,_)),fa(c)}else wu(c);else if(L=g.s,L==3||L==0&&0<g.X||!(w==1&&qh(c,g)||w==2&&Lo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),L){case 1:Pi(c,5);break;case 4:Pi(c,10);break;case 3:Pi(c,6);break;default:Pi(c,2)}}}function jo(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Pi(c,g){if(c.j.info("Error code "+g),g==2){var _=x(c.fb,c),w=c.Xa;const L=!w;w=new At(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||yr(w,"https"),_r(w),L?Er(w.toString(),_):$n(w.toString(),_)}else ut(2);c.G=0,c.l&&c.l.sa(g),Ru(c),Tu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Ru(c){if(c.G=0,c.ka=[],c.l){const g=Co(c.h);(g.length!=0||c.i.length!=0)&&(F(c.ka,g),F(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function Iu(c,g,_){var w=_ instanceof At?bn(_):new At(_);if(w.g!="")g&&(w.g=g+"."+w.g),ps(w,w.s);else{var L=m.location;w=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var Y=new At(null);w&&yr(Y,w),g&&(Y.g=g),L&&ps(Y,L),_&&(Y.l=_),w=Y}return _=c.D,g=c.ya,_&&g&&tt(w,_,g),tt(w,"VER",c.la),Sr(c,w),w}function Cu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new $e(new ys({eb:_})):new $e(c.pa),g.Ha(c.J),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}s=Nu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ma(){}ma.prototype.g=function(c,g){return new cn(c,g)};function cn(c,g){dt.call(this),this.g=new ca(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!oe(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!oe(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new hi(this)}G(cn,dt),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Po(this.g)},cn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Yn(c),c=_);g.i.push(new yu(g.Ya++,c)),g.G==3&&fa(g)},cn.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,cn.aa.N.call(this)};function Du(c){Ri.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}G(Du,Ri);function Ou(){wo.call(this),this.status=1}G(Ou,wo);function hi(c){this.g=c}G(hi,Nu),hi.prototype.ua=function(){Ze(this.g,"a")},hi.prototype.ta=function(c){Ze(this.g,new Du(c))},hi.prototype.sa=function(c){Ze(this.g,new Ou)},hi.prototype.ra=function(){Ze(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,wE=function(){return new ma},AE=function(){return hs()},TE=ni,om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,Hc=ms,Ii.COMPLETE="complete",bE=Ii,Ao.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Nl=Ao,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,EE=$e}).apply(typeof Mc<"u"?Mc:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore",wv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new xm("@firebase/firestore");function Ha(){return Yr.logLevel}function ge(s,...e){if(Yr.logLevel<=ze.DEBUG){const n=e.map(Lm);Yr.debug(`Firestore (${fo}): ${s}`,...n)}}function ns(s,...e){if(Yr.logLevel<=ze.ERROR){const n=e.map(Lm);Yr.error(`Firestore (${fo}): ${s}`,...n)}}function eo(s,...e){if(Yr.logLevel<=ze.WARN){const n=e.map(Lm);Yr.warn(`Firestore (${fo}): ${s}`,...n)}}function Lm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,SE(s,r,n)}function SE(s,e,n){let r=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ns(r),new Error(r)}function Xe(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||SE(e,o,r)}function Oe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rn.UNAUTHENTICATED))}shutdown(){}}class Bx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qx{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new $s,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new $s)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new xE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class Hx{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Fx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Hx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Qx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Ve(s,e){return s<e?-1:s>e?1:0}function lm(s,e){let n=0;for(;n<s.length&&n<e.length;){const r=s.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return Ve(r,o);{const u=RE(),f=Yx(u.encode(xv(s,n)),u.encode(xv(e,n)));return f!==0?f:Ve(r,o)}}n+=r>65535?2:1}return Ve(s.length,e.length)}function xv(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function Yx(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Ve(s[n],e[n]);return Ve(s.length,e.length)}function to(s,e,n){return s.length===e.length&&s.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=-62135596800,Iv=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Iv);return new Ut(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Rv)throw new me(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ut(0,0))}static max(){return new Ce(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="__name__";class _i{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _i.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _i?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=_i.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ve(e.length,n.length)}static compareSegments(e,n){const r=_i.isNumericId(e),o=_i.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?_i.extractNumericId(e).compare(_i.extractNumericId(n)):lm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class ot extends _i{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const Kx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends _i{construct(e,n,r){return new Zt(e,n,r)}static isValidIdentifier(e){return Kx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cv}static keyField(){return new Zt([Cv])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new me(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new me(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ot.fromString(e))}static fromName(e){return new be(ot.fromString(e).popFirst(5))}static empty(){return new be(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ot(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function $x(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(r===1e9?new Ut(n+1,0):new Ut(n,r));return new Ws(o,be.empty(),e)}function Xx(s){return new Ws(s.readTime,s.key,Hl)}class Ws{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ws(Ce.min(),be.empty(),Hl)}static max(){return new Ws(Ce.max(),be.empty(),Hl)}}function Zx(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(s.documentKey,e.documentKey),n!==0?n:Ve(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==Wx)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>r(p))}),f=!0,u===o&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(o=>o?ne.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,u)=>{r.push(n.call(this,o,u))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next(b=>{f[y]=b,++m,m===u&&r(f)},b=>o(b))}})}static doWhile(e,n){return new ne((r,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):r()};u()})}}function eR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function go(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}_h.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function vh(s){return s==null}function ih(s){return s===0&&1/s==-1/0}function tR(s){return typeof s=="number"&&Number.isInteger(s)&&!ih(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="";function nR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Nv(e)),e=iR(s.get(n),e);return Nv(e)}function iR(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case CE:n+="";break;default:n+=u}}return n}function Nv(s){return s+CE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ar(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function NE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}}class Vc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Xt.RED,this.left=o??Xt.EMPTY,this.right=u??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Xt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ov(this.data.getIterator())}getIteratorFrom(e){return new Ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class Ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Lt(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new DE("Invalid base64 string: "+u):u}}(e);return new Jt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const sR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(s){if(Xe(!!s,39018),typeof s=="string"){let e=0;const n=sR.exec(s);if(Xe(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(s.seconds),nanos:Et(s.nanos)}}function Et(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function er(s){return typeof s=="string"?Jt.fromBase64String(s):Jt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="server_timestamp",kE="__type__",ME="__previous_value__",VE="__local_write_time__";function zm(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[kE])===null||n===void 0?void 0:n.stringValue)===OE}function Eh(s){const e=s.mapValue.fields[ME];return zm(e)?Eh(e):e}function Fl(s){const e=Js(s.mapValue.fields[VE].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,o,u,f,m,p,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b}}const sh="(default)";class Gl{constructor(e,n){this.projectId=e,this.database=n||sh}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===sh}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__type__",aR="__max__",Pc={mapValue:{}},UE="__vector__",rh="value";function tr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?zm(s)?4:lR(s)?9007199254740991:oR(s)?10:11:Re(28295,{value:s})}function Ai(s,e){if(s===e)return!0;const n=tr(s);if(n!==tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Fl(s).isEqual(Fl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Js(o.timestampValue),m=Js(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,u){return er(o.bytesValue).isEqual(er(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,u){return Et(o.geoPointValue.latitude)===Et(u.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(u.geoPointValue.longitude)}(s,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Et(o.integerValue)===Et(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Et(o.doubleValue),m=Et(u.doubleValue);return f===m?ih(f)===ih(m):isNaN(f)&&isNaN(m)}return!1}(s,e);case 9:return to(s.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Dv(f)!==Dv(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Ai(f[p],m[p])))return!1;return!0}(s,e);default:return Re(52216,{left:s})}}function Ql(s,e){return(s.values||[]).find(n=>Ai(n,e))!==void 0}function no(s,e){if(s===e)return 0;const n=tr(s),r=tr(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(s.booleanValue,e.booleanValue);case 2:return function(u,f){const m=Et(u.integerValue||u.doubleValue),p=Et(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(s,e);case 3:return kv(s.timestampValue,e.timestampValue);case 4:return kv(Fl(s),Fl(e));case 5:return lm(s.stringValue,e.stringValue);case 6:return function(u,f){const m=er(u),p=er(f);return m.compareTo(p)}(s.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let y=0;y<m.length&&y<p.length;y++){const b=Ve(m[y],p[y]);if(b!==0)return b}return Ve(m.length,p.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Ve(Et(u.latitude),Et(f.latitude));return m!==0?m:Ve(Et(u.longitude),Et(f.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return Mv(s.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,y,b;const R=u.fields||{},x=f.fields||{},P=(m=R[rh])===null||m===void 0?void 0:m.arrayValue,G=(p=x[rh])===null||p===void 0?void 0:p.arrayValue,K=Ve(((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0,((b=G==null?void 0:G.values)===null||b===void 0?void 0:b.length)||0);return K!==0?K:Mv(P,G)}(s.mapValue,e.mapValue);case 11:return function(u,f){if(u===Pc.mapValue&&f===Pc.mapValue)return 0;if(u===Pc.mapValue)return 1;if(f===Pc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=f.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let R=0;R<p.length&&R<b.length;++R){const x=lm(p[R],b[R]);if(x!==0)return x;const P=no(m[p[R]],y[b[R]]);if(P!==0)return P}return Ve(p.length,b.length)}(s.mapValue,e.mapValue);default:throw Re(23264,{Pe:n})}}function kv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ve(s,e);const n=Js(s),r=Js(e),o=Ve(n.seconds,r.seconds);return o!==0?o:Ve(n.nanos,r.nanos)}function Mv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=no(n[o],r[o]);if(u)return u}return Ve(n.length,r.length)}function io(s){return um(s)}function um(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const r=Js(n);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return er(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return be.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=um(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${um(n.fields[f])}`;return o+"}"}(s.mapValue):Re(61005,{value:s})}function Fc(s){switch(tr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(s);return e?16+Fc(e):16;case 5:return 2*s.stringValue.length;case 6:return er(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+Fc(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return ar(r.fields,(u,f)=>{o+=u.length+Fc(f)}),o}(s.mapValue);default:throw Re(13486,{value:s})}}function Vv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function cm(s){return!!s&&"integerValue"in s}function Bm(s){return!!s&&"arrayValue"in s}function Pv(s){return!!s&&"nullValue"in s}function Uv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Gc(s){return!!s&&"mapValue"in s}function oR(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[PE])===null||n===void 0?void 0:n.stringValue)===UE}function Pl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ar(s.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pl(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pl(s.arrayValue.values[n]);return e}return Object.assign({},s)}function lR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===aR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(n)}setAll(e){let n=Zt.emptyPath(),r={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=Pl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());Gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Gc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){ar(n,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new vn(Pl(this.value))}}function LE(s){const e=[];return ar(s.fields,(n,r)=>{const o=new Zt([n]);if(Gc(r)){const u=LE(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r,o,u,f,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new an(e,0,Ce.min(),Ce.min(),Ce.min(),vn.empty(),0)}static newFoundDocument(e,n,r,o){return new an(e,1,n,Ce.min(),r,o,0)}static newNoDocument(e,n){return new an(e,2,n,Ce.min(),Ce.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Ce.min(),Ce.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.position=e,this.inclusive=n}}function Lv(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=be.comparator(be.fromName(f.referenceValue),n.key):r=no(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function jv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ai(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function uR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{}class Rt extends jE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hR(e,n,r):n==="array-contains"?new mR(e,r):n==="in"?new gR(e,r):n==="not-in"?new pR(e,r):n==="array-contains-any"?new yR(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fR(e,r):new dR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(no(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends jE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ti(e,n)}matches(e){return zE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function zE(s){return s.op==="and"}function BE(s){return cR(s)&&zE(s)}function cR(s){for(const e of s.filters)if(e instanceof ti)return!1;return!0}function hm(s){if(s instanceof Rt)return s.field.canonicalString()+s.op.toString()+io(s.value);if(BE(s))return s.filters.map(e=>hm(e)).join(",");{const e=s.filters.map(n=>hm(n)).join(",");return`${s.op}(${e})`}}function qE(s,e){return s instanceof Rt?function(r,o){return o instanceof Rt&&r.op===o.op&&r.field.isEqual(o.field)&&Ai(r.value,o.value)}(s,e):s instanceof ti?function(r,o){return o instanceof ti&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&qE(f,o.filters[m]),!0):!1}(s,e):void Re(19439)}function HE(s){return s instanceof Rt?function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`}(s):s instanceof ti?function(n){return n.op.toString()+" {"+n.getFilters().map(HE).join(" ,")+"}"}(s):"Filter"}class hR extends Rt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class fR extends Rt{constructor(e,n){super(e,"in",n),this.keys=FE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dR extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=FE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FE(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class mR extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&Ql(n.arrayValue,this.value)}}class gR extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class pR extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class yR extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ql(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n=null,r=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function zv(s,e=null,n=[],r=[],o=null,u=null,f=null){return new _R(s,e,n,r,o,u,f)}function qm(s){const e=Oe(s);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>io(r)).join(",")),e.Ie=n}return e.Ie}function Hm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!uR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!qE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!jv(s.startAt,e.startAt)&&jv(s.endAt,e.endAt)}function fm(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n=null,r=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function vR(s,e,n,r,o,u,f,m){return new po(s,e,n,r,o,u,f,m)}function Fm(s){return new po(s)}function Bv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function GE(s){return s.collectionGroup!==null}function Ul(s){const e=Oe(s);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Lt(Zt.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Yl(u,r))}),n.has(Zt.keyField().canonicalString())||e.Ee.push(new Yl(Zt.keyField(),r))}return e.Ee}function bi(s){const e=Oe(s);return e.de||(e.de=ER(e,Ul(s))),e.de}function ER(s,e){if(s.limitType==="F")return zv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Yl(o.field,u)});const n=s.endAt?new ah(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ah(s.startAt.position,s.startAt.inclusive):null;return zv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function dm(s,e){const n=s.filters.concat([e]);return new po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function oh(s,e,n){return new po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function bh(s,e){return Hm(bi(s),bi(e))&&s.limitType===e.limitType}function QE(s){return`${qm(bi(s))}|lt:${s.limitType}`}function Fa(s){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>HE(o)).join(", ")}]`),vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>io(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>io(o)).join(",")),`Target(${r})`}(bi(s))}; limitType=${s.limitType})`}function Th(s,e){return e.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,e)&&function(r,o){for(const u of Ul(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(f,m,p){const y=Lv(f,m,p);return f.inclusive?y<=0:y<0}(r.startAt,Ul(r),o)||r.endAt&&!function(f,m,p){const y=Lv(f,m,p);return f.inclusive?y>=0:y>0}(r.endAt,Ul(r),o))}(s,e)}function bR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function YE(s){return(e,n)=>{let r=!1;for(const o of Ul(s)){const u=TR(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function TR(s,e,n){const r=s.field.isKeyField()?be.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),y=m.data.field(u);return p!==null&&y!==null?no(p,y):Re(42886)}(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ar(this.inner,(n,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new ft(be.comparator);function is(){return AR}const KE=new ft(be.comparator);function Dl(...s){let e=KE;for(const n of s)e=e.insert(n.key,n);return e}function $E(s){let e=KE;return s.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return Ll()}function XE(){return Ll()}function Ll(){return new Zr(s=>s.toString(),(s,e)=>s.isEqual(e))}const wR=new ft(be.comparator),SR=new Lt(be.comparator);function Be(...s){let e=SR;for(const n of s)e=e.add(n);return e}const xR=new Lt(Ve);function RR(){return xR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function ZE(s){return{integerValue:""+s}}function IR(s,e){return tR(e)?ZE(e):Gm(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this._=void 0}}function CR(s,e,n){return s instanceof Kl?function(o,u){const f={fields:{[kE]:{stringValue:OE},[VE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&zm(u)&&(u=Eh(u)),u&&(f.fields[ME]=u),{mapValue:f}}(n,e):s instanceof so?JE(s,e):s instanceof $l?eb(s,e):function(o,u){const f=WE(o,u),m=qv(f)+qv(o.Re);return cm(f)&&cm(o.Re)?ZE(m):Gm(o.serializer,m)}(s,e)}function NR(s,e,n){return s instanceof so?JE(s,e):s instanceof $l?eb(s,e):n}function WE(s,e){return s instanceof lh?function(r){return cm(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class Kl extends Ah{}class so extends Ah{constructor(e){super(),this.elements=e}}function JE(s,e){const n=tb(e);for(const r of s.elements)n.some(o=>Ai(o,r))||n.push(r);return{arrayValue:{values:n}}}class $l extends Ah{constructor(e){super(),this.elements=e}}function eb(s,e){let n=tb(e);for(const r of s.elements)n=n.filter(o=>!Ai(o,r));return{arrayValue:{values:n}}}class lh extends Ah{constructor(e,n){super(),this.serializer=e,this.Re=n}}function qv(s){return Et(s.integerValue||s.doubleValue)}function tb(s){return Bm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n){this.field=e,this.transform=n}}function DR(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof so&&o instanceof so||r instanceof $l&&o instanceof $l?to(r.elements,o.elements,Ai):r instanceof lh&&o instanceof lh?Ai(r.Re,o.Re):r instanceof Kl&&o instanceof Kl}(s.transform,e.transform)}class OR{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class wh{}function ib(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Sh(s.key,dn.none()):new nu(s.key,s.data,dn.none());{const n=s.data,r=vn.empty();let o=new Lt(Zt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new or(s.key,r,new Cn(o.toArray()),dn.none())}}function kR(s,e,n){s instanceof nu?function(o,u,f){const m=o.value.clone(),p=Fv(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(s,e,n):s instanceof or?function(o,u,f){if(!Qc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Fv(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(sb(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(s,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function jl(s,e,n,r){return s instanceof nu?function(u,f,m,p){if(!Qc(u.precondition,f))return m;const y=u.value.clone(),b=Gv(u.fieldTransforms,p,f);return y.setAll(b),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(s,e,n,r):s instanceof or?function(u,f,m,p){if(!Qc(u.precondition,f))return m;const y=Gv(u.fieldTransforms,p,f),b=f.data;return b.setAll(sb(u)),b.setAll(y),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(R=>R.field))}(s,e,n,r):function(u,f,m){return Qc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(s,e,n)}function MR(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=WE(r.transform,o||null);u!=null&&(n===null&&(n=vn.empty()),n.set(r.field,u))}return n||null}function Hv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&to(r,o,(u,f)=>DR(u,f))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class nu extends wh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class or extends wh{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function sb(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}}),e}function Fv(s,e,n){const r=new Map;Xe(s.length===n.length,32656,{Ve:n.length,me:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,m=e.data.field(u.field);r.set(u.field,NR(f,m,n[o]))}return r}function Gv(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,CR(u,f,e))}return r}class Sh extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VR extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&kR(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XE();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=ib(f,m);p!==null&&r.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,(n,r)=>Hv(n,r))&&to(this.baseMutations,e.baseMutations,(n,r)=>Hv(n,r))}}class Qm{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return wR}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Qm(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Qe;function jR(s){switch(s){case J.OK:return Re(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Re(15467,{code:s})}}function rb(s){if(s===void 0)return ns("GRPC error has no .code"),J.UNKNOWN;switch(s){case xt.OK:return J.OK;case xt.CANCELLED:return J.CANCELLED;case xt.UNKNOWN:return J.UNKNOWN;case xt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case xt.INTERNAL:return J.INTERNAL;case xt.UNAVAILABLE:return J.UNAVAILABLE;case xt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case xt.NOT_FOUND:return J.NOT_FOUND;case xt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case xt.ABORTED:return J.ABORTED;case xt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case xt.DATA_LOSS:return J.DATA_LOSS;default:return Re(39323,{code:s})}}(Qe=xt||(xt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new Ks([4294967295,4294967295],0);function Qv(s){const e=RE().encode(s),n=new vE;return n.update(e),new Uint8Array(n.digest())}function Yv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ks([n,r],0),new Ks([o,u],0)]}class Ym{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ol(`Invalid padding: ${n}`);if(r<0)throw new Ol(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ks.fromNumber(this.pe)}we(e,n,r){let o=e.add(n.multiply(Ks.fromNumber(r)));return o.compare(zR)===1&&(o=new Ks([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Qv(e),[r,o]=Yv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);if(!this.be(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Ym(u,o,n);return r.forEach(m=>f.insert(m)),f}insert(e){if(this.pe===0)return;const n=Qv(e),[r,o]=Yv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xh(Ce.min(),o,new ft(Ve),is(),Be())}}class iu{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new iu(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r,o){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=o}}class ab{constructor(e,n){this.targetId=e,this.Ce=n}}class ob{constructor(e,n,r=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Kv{constructor(){this.Fe=0,this.Me=$v(),this.xe=Jt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Be(),n=Be(),r=Be();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Re(38017,{changeType:u})}}),new iu(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=$v()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Xe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class BR{constructor(e){this.ze=e,this.je=new Map,this.He=is(),this.Je=Uc(),this.Ye=Uc(),this.Ze=new ft(Ve)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,r=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(fm(u))if(r===0){const f=new be(u.path);this.tt(n,f,an.newNoDocument(f,Ce.min()))}else Xe(r===1,20013,{expectedCount:r});else{const f=this.ut(n);if(f!==r){const m=this.ct(e),p=m?this.lt(m,e,f):1;if(p!==0){this.st(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=er(r).toUint8Array()}catch(p){if(p instanceof DE)return eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Ym(f,o,u)}catch(p){return eo(p instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let o=0;return r.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&fm(m.target)){const p=new be(m.target.path);this.Et(p).has(f)||this.dt(f,p)||this.tt(f,p,an.newNoDocument(p,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let r=Be();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const o=new xh(e,n,this.Ze,this.He,r);return this.He=is(),this.Je=Uc(),this.Ye=Uc(),this.Ze=new ft(Ve),o}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Kv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Lt(Ve),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Lt(Ve),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Kv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Uc(){return new ft(be.comparator)}function $v(){return new ft(be.comparator)}const qR={asc:"ASCENDING",desc:"DESCENDING"},HR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FR={and:"AND",or:"OR"};class GR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mm(s,e){return s.useProto3Json||vh(e)?e:{value:e}}function uh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function QR(s,e){return uh(s,e.toTimestamp())}function Ti(s){return Xe(!!s,49232),Ce.fromTimestamp(function(n){const r=Js(n);return new Ut(r.seconds,r.nanos)}(s))}function Km(s,e){return gm(s,e).canonicalString()}function gm(s,e){const n=function(o){return new ot(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?n:n.child(e)}function ub(s){const e=ot.fromString(s);return Xe(mb(e),10190,{key:e.toString()}),e}function pm(s,e){return Km(s.databaseId,e.path)}function Yd(s,e){const n=ub(e);if(n.get(1)!==s.databaseId.projectId)throw new me(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new me(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new be(hb(n))}function cb(s,e){return Km(s.databaseId,e)}function YR(s){const e=ub(s);return e.length===4?ot.emptyPath():hb(e)}function ym(s){return new ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hb(s){return Xe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Xv(s,e,n){return{name:pm(s,e),fields:n.value.mapValue.fields}}function KR(s,e){let n;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Re(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,b){return y.useProto3Json?(Xe(b===void 0||typeof b=="string",58123),Jt.fromBase64String(b||"")):(Xe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Jt.fromUint8Array(b||new Uint8Array))}(s,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(y){const b=y.code===void 0?J.UNKNOWN:rb(y.code);return new me(b,y.message||"")}(f);n=new ob(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Yd(s,r.document.name),u=Ti(r.document.updateTime),f=r.document.createTime?Ti(r.document.createTime):Ce.min(),m=new vn({mapValue:{fields:r.document.fields}}),p=an.newFoundDocument(o,u,f,m),y=r.targetIds||[],b=r.removedTargetIds||[];n=new Yc(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Yd(s,r.document),u=r.readTime?Ti(r.readTime):Ce.min(),f=an.newNoDocument(o,u),m=r.removedTargetIds||[];n=new Yc([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Yd(s,r.document),u=r.removedTargetIds||[];n=new Yc([],u,o,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new LR(o,u),m=r.targetId;n=new ab(m,f)}}return n}function $R(s,e){let n;if(e instanceof nu)n={update:Xv(s,e.key,e.value)};else if(e instanceof Sh)n={delete:pm(s,e.key)};else if(e instanceof or)n={update:Xv(s,e.key,e.data),updateMask:sI(e.fieldMask)};else{if(!(e instanceof VR))return Re(16599,{ft:e.type});n={verify:pm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof Kl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof so)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof $l)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof lh)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw Re(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:QR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Re(27497)}(s,e.precondition)),n}function XR(s,e){return s&&s.length>0?(Xe(e!==void 0,14353),s.map(n=>function(o,u){let f=o.updateTime?Ti(o.updateTime):Ti(u);return f.isEqual(Ce.min())&&(f=Ti(u)),new OR(f,o.transformResults||[])}(n,e))):[]}function ZR(s,e){return{documents:[cb(s,e.path)]}}function WR(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cb(s,o);const u=function(y){if(y.length!==0)return db(ti.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(y){if(y.length!==0)return y.map(b=>function(x){return{field:Ga(x.field),direction:tI(x.dir)}}(b))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=mm(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:o}}function JR(s){let e=YR(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Xe(r===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=function(R){const x=fb(R);return x instanceof ti&&BE(x)?x.getFilters():[x]}(n.where));let f=[];n.orderBy&&(f=function(R){return R.map(x=>function(G){return new Yl(Qa(G.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(x))}(n.orderBy));let m=null;n.limit&&(m=function(R){let x;return x=typeof R=="object"?R.value:R,vh(x)?null:x}(n.limit));let p=null;n.startAt&&(p=function(R){const x=!!R.before,P=R.values||[];return new ah(P,x)}(n.startAt));let y=null;return n.endAt&&(y=function(R){const x=!R.before,P=R.values||[];return new ah(P,x)}(n.endAt)),vR(e,o,f,u,m,"F",p,y)}function eI(s,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fb(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qa(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Qa(n.unaryFilter.field);return Rt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Qa(n.unaryFilter.field);return Rt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Qa(n.unaryFilter.field);return Rt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(s):s.fieldFilter!==void 0?function(n){return Rt.create(Qa(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return ti.create(n.compositeFilter.filters.map(r=>fb(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(n.compositeFilter.op))}(s):Re(30097,{filter:s})}function tI(s){return qR[s]}function nI(s){return HR[s]}function iI(s){return FR[s]}function Ga(s){return{fieldPath:s.canonicalString()}}function Qa(s){return Zt.fromServerFormat(s.fieldPath)}function db(s){return s instanceof Rt?function(n){if(n.op==="=="){if(Uv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NAN"}};if(Pv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NAN"}};if(Pv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(n.field),op:nI(n.op),value:n.value}}}(s):s instanceof ti?function(n){const r=n.getFilters().map(o=>db(o));return r.length===1?r[0]:{compositeFilter:{op:iI(n.op),filters:r}}}(s):Re(54877,{filter:s})}function sI(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r,o,u=Ce.min(),f=Ce.min(),m=Jt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.wt=e}}function aI(s){const e=JR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.Cn=new lI}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ws.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class lI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Lt(ot.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Lt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gb=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(gb,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ro(0)}static lr(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="LruGarbageCollector",uI=1048576;function Jv([s,e],[n,r]){const o=Ve(s,n);return o===0?Ve(e,r):o}class cI{constructor(e){this.Er=e,this.buffer=new Lt(Jv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ge(Wv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){go(n)?ge(Wv,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.mr(3e5)})}}class fI{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(_h.le);const r=new cI(n);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Zv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,o,u,f,m,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,f=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,n))).next(R=>(u=R,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(y=Date.now(),Ha()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${R} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}function dI(s,e){return new fI(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.changes=new Zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&jl(r.mutation,o,Cn.empty(),Ut.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Be()){const o=Hr();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(u=>{let f=Dl();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Be()))}populateOverlays(e,n,r){const o=[];return r.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,r,o){let u=is();const f=Ll(),m=function(){return Ll()}();return n.forEach((p,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof or)?u=u.insert(y.key,y):b!==void 0?(f.set(y.key,b.mutation.getFieldMask()),jl(b.mutation,y,b.mutation.getFieldMask(),Ut.now())):f.set(y.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((y,b)=>f.set(y,b)),n.forEach((y,b)=>{var R;return m.set(y,new gI(b,(R=f.get(y))!==null&&R!==void 0?R:null))}),m))}recalculateAndSaveOverlays(e,n){const r=Ll();let o=new ft((f,m)=>f-m),u=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let b=r.get(p)||Cn.empty();b=m.applyToLocalView(y,b),r.set(p,b);const R=(o.get(m.batchId)||Be()).add(p);o=o.insert(m.batchId,R)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,b=p.value,R=XE();b.forEach(x=>{if(!u.has(x)){const P=ib(n.get(x),r.get(x));P!==null&&R.set(x,P),u=u.add(x)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,R))}return ne.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(f){return be.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):ne.resolve(Hr());let m=Hl,p=u;return f.next(y=>ne.forEach(y,(b,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{p=p.insert(b,x)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,p,y,Be())).next(b=>({batchId:m,changes:$E(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let o=Dl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Dl();return this.indexManager.getCollectionParents(e,u).next(m=>ne.forEach(m,p=>{const y=function(R,x){return new po(x,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(b=>{b.forEach((R,x)=>{f=f.insert(R,x)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o))).next(f=>{u.forEach((p,y)=>{const b=y.getKey();f.get(b)===null&&(f=f.insert(b,an.newInvalidDocument(b)))});let m=Dl();return f.forEach((p,y)=>{const b=u.get(p);b!==void 0&&jl(b.mutation,y,Cn.empty(),Ut.now()),Th(n,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ne.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ti(o.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:aI(o.bundledQuery),readTime:Ti(o.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.overlays=new ft(be.comparator),this.Qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return ne.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,u)=>{this.St(e,n,u)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const o=Hr(),u=n.length+1,f=new be(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new ft((y,b)=>y-b);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=Hr(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=Hr(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>m.set(y,b)),!(m.size()>=o)););return ne.resolve(m)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new UR(n,r));let u=this.Qr.get(n);u===void 0&&(u=Be(),this.Qr.set(n,u)),this.Qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.$r=new Lt(Ft.Ur),this.Kr=new Lt(Ft.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ft(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new be(new ot([])),r=new Ft(n,e),o=new Ft(n,e+1),u=[];return this.Kr.forEachInRange([r,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new be(new ot([])),r=new Ft(n,e),o=new Ft(n,e+1);let u=Be();return this.Kr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Ft(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return be.comparator(e.key,n.key)||Ve(e.Zr,n.Zr)}static Wr(e,n){return Ve(e.Zr,n.Zr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Lt(Ft.Ur)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new PR(u,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new Ft(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(f)}lookupMutationBatch(e,n){return ne.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ti(r),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?jm:this.nr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),o=new Ft(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],f=>{const m=this.ei(f.Zr);u.push(m)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(Ve);return n.forEach(o=>{const u=new Ft(o,0),f=new Ft(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{r=r.add(m.Zr)})}),ne.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;be.isDocumentKey(u)||(u=u.child(""));const f=new Ft(new be(u),0);let m=new Lt(Ve);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Zr)),!0)},f),ne.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Xe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ne.forEach(n.mutations,o=>{const u=new Ft(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Ft(n,0),o=this.Xr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.ii=e,this.docs=function(){return new ft(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=is();return n.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():an.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=is();const f=n.path,m=new be(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||Zx(Xx(b),r)<=0||(o.has(b.key)||Th(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Re(9500)}si(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TI(this)}getSize(e){return ne.resolve(this.size)}}class TI extends mI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.persistence=e,this.oi=new Zr(n=>qm(n),Hm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this._i=0,this.ai=new $m,this.targetCount=0,this.ui=ro.cr()}forEachTarget(e,n){return this.oi.forEach((r,o)=>n(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ne.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ro(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Tr(n),ne.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){this.ci={},this.overlays={},this.li=new _h(0),this.hi=!1,this.hi=!0,this.Pi=new vI,this.referenceDelegate=e(this),this.Ti=new AI(this),this.indexManager=new oI,this.remoteDocumentCache=function(o){return new bI(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new rI(n),this.Ei=new yI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _I,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new EI(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const o=new wI(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return ne.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class wI extends Jx{constructor(e){super(),this.currentSequenceNumber=e}}class Xm{constructor(e){this.persistence=e,this.Vi=new $m,this.mi=null}static fi(e){return new Xm(e)}get gi(){if(this.mi)return this.mi;throw Re(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.gi,r=>{const o=be.fromPath(r);return this.pi(e,o).next(u=>{u||n.removeEntry(o,Ce.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ne.or([()=>ne.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class ch{constructor(e,n){this.persistence=e,this.yi=new Zr(r=>nR(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=dI(this,n)}static fi(e,n){return new ch(e,n)}di(){}Ai(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return ne.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(u=>u?ne.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,f=>this.Dr(e,f,n).next(m=>{m||(r++,u.removeEntry(f,Ce.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ne.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fc(e.data.value)),n}Dr(e,n,r){return ne.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return ne.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.ds=r,this.As=o}static Rs(e,n){let r=Be(),o=Be();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zm(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return iw()?8:eR(on())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(e,n,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new SI;return this.Ss(e,n,f).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,f,m.size)})}).next(()=>u.result)}Ds(e,n,r,o){return r.documentReadCount<this.gs?(Ha()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ne.resolve()):(Ha()<=ze.DEBUG&&ge("QueryEngine","Query:",Fa(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Ha()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(n))):ne.resolve())}ws(e,n){if(Bv(n))return ne.resolve(null);let r=bi(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=oh(n,null,"F"),r=bi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const f=Be(...u);return this.ys.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.vs(n,m);return this.Cs(n,y,f,p.readTime)?this.ws(e,oh(n,null,"F")):this.Fs(e,y,n,p)}))})))}bs(e,n,r,o){return Bv(n)||o.isEqual(Ce.min())?ne.resolve(null):this.ys.getDocuments(e,r).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,r,o)?ne.resolve(null):(Ha()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fa(n)),this.Fs(e,f,n,$x(o,Hl)).next(m=>m))})}vs(e,n){let r=new Lt(YE(e));return n.forEach((o,u)=>{Th(e,u)&&(r=r.add(u))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return Ha()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Fa(n)),this.ys.getDocumentsMatchingQuery(e,n,Ws.min(),r)}Fs(e,n,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",RI=3e8;class II{constructor(e,n,r,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new ft(Ve),this.Os=new Zr(u=>qm(u),Hm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function CI(s,e,n,r){return new II(s,e,n,r)}async function yb(s,e){const n=Oe(s);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let p=Be();for(const y of o){f.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of u){m.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(r,p).next(y=>({ks:y,removedBatchIds:f,addedBatchIds:m}))})})}function NI(s,e){const n=Oe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,y,b){const R=y.batch,x=R.keys();let P=ne.resolve();return x.forEach(G=>{P=P.next(()=>b.getEntry(p,G)).next(K=>{const F=y.docVersions.get(G);Xe(F!==null,48541),K.version.compareTo(F)<0&&(R.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),b.addEntry(K)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(p,R))}(n,r,e,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let p=Be();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function _b(s){const e=Oe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function DI(s,e){const n=Oe(s),r=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((b,R)=>{const x=o.get(R);if(!x)return;m.push(n.Ti.removeMatchingKeys(u,b.removedDocuments,R).next(()=>n.Ti.addMatchingKeys(u,b.addedDocuments,R)));let P=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(R)!==null?P=P.withResumeToken(Jt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,r)),o=o.insert(R,P),function(K,F,Q){return K.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=RI?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(x,P,b)&&m.push(n.Ti.updateTargetData(u,P))});let p=is(),y=Be();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(OI(u,f,e.documentUpdates).next(b=>{p=b.qs,y=b.Qs})),!r.isEqual(Ce.min())){const b=n.Ti.getLastRemoteSnapshotVersion(u).next(R=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(b)}return ne.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,y)).next(()=>p)}).then(u=>(n.xs=o,u))}function OI(s,e,n){let r=Be(),o=Be();return n.forEach(u=>r=r.add(u)),e.getEntries(s,r).next(u=>{let f=is();return n.forEach((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):ge(Wm,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{qs:f,Qs:o}})}function kI(s,e){const n=Oe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MI(s,e){const n=Oe(s);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Ti.getTargetData(r,e).next(u=>u?(o=u,ne.resolve(o)):n.Ti.allocateTargetId(r).next(f=>(o=new Fs(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function _m(s,e,n){const r=Oe(s),o=r.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!go(f))throw f;ge(Wm,`Failed to update sequence numbers for target ${e}: ${f}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function e0(s,e,n){const r=Oe(s);let o=Ce.min(),u=Be();return r.persistence.runTransaction("Execute query","readwrite",f=>function(p,y,b){const R=Oe(p),x=R.Os.get(b);return x!==void 0?ne.resolve(R.xs.get(x)):R.Ti.getTargetData(y,b)}(r,f,bi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,e,n?o:Ce.min(),n?u:Be())).next(m=>(VI(r,bR(e),m),{documents:m,$s:u})))}function VI(s,e,n){let r=s.Ns.get(e)||Ce.min();n.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Ns.set(e,r)}class t0{constructor(){this.activeTargetIds=RR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PI{constructor(){this.xo=new t0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new t0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="ConnectivityMonitor";class i0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ge(n0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ge(n0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function vm(){return Lc===null?Lc=function(){return 268435456+Math.round(2147483648*Math.random())}():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",LI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jI{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===sh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,n,r,o,u){const f=vm(),m=this.jo(e,n.toUriEncodedString());ge(Kd,`Sending RPC '${e}' ${f}:`,m,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:y}=new URL(m),b=uo(y);return this.Jo(e,m,p,r,b).then(R=>(ge(Kd,`Received RPC '${e}' ${f}: `,R),R),R=>{throw eo(Kd,`RPC '${e}' ${f} failed with error: `,R,"url: ",m,"request:",r),R})}Yo(e,n,r,o,u,f){return this.zo(e,n,r,o,u)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const r=LI[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class BI extends jI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=vm();return new Promise((m,p)=>{const y=new EE;y.setWithCredentials(!0),y.listenOnce(bE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Hc.NO_ERROR:const R=y.getResponseJson();ge(sn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(R)),m(R);break;case Hc.TIMEOUT:ge(sn,`RPC '${e}' ${f} timed out`),p(new me(J.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const x=y.getStatus();if(ge(sn,`RPC '${e}' ${f} failed with status:`,x,"response text:",y.getResponseText()),x>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const G=P==null?void 0:P.error;if(G&&G.status&&G.message){const K=function(Q){const oe=Q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(oe)>=0?oe:J.UNKNOWN}(G.status);p(new me(K,G.message))}else p(new me(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new me(J.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{h_:e,streamId:f,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{ge(sn,`RPC '${e}' ${f} completed.`)}});const b=JSON.stringify(o);ge(sn,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",b,r,15)})}I_(e,n,r){const o=vm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=wE(),m=AE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const b=u.join("");ge(sn,`Creating RPC '${e}' stream ${o}: ${b}`,p);const R=f.createWebChannel(b,p);this.E_(R);let x=!1,P=!1;const G=new zI({Zo:F=>{P?ge(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(x||(ge(sn,`Opening RPC '${e}' stream ${o} transport.`),R.open(),x=!0),ge(sn,`RPC '${e}' stream ${o} sending:`,F),R.send(F))},Xo:()=>R.close()}),K=(F,Q,oe)=>{F.listen(Q,re=>{try{oe(re)}catch(he){setTimeout(()=>{throw he},0)}})};return K(R,Nl.EventType.OPEN,()=>{P||(ge(sn,`RPC '${e}' stream ${o} transport opened.`),G.__())}),K(R,Nl.EventType.CLOSE,()=>{P||(P=!0,ge(sn,`RPC '${e}' stream ${o} transport closed`),G.u_(),this.d_(R))}),K(R,Nl.EventType.ERROR,F=>{P||(P=!0,eo(sn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),G.u_(new me(J.UNAVAILABLE,"The operation could not be completed")))}),K(R,Nl.EventType.MESSAGE,F=>{var Q;if(!P){const oe=F.data[0];Xe(!!oe,16349);const re=oe,he=(re==null?void 0:re.error)||((Q=re[0])===null||Q===void 0?void 0:Q.error);if(he){ge(sn,`RPC '${e}' stream ${o} received error:`,he);const le=he.status;let fe=function(A){const D=xt[A];if(D!==void 0)return rb(D)}(le),M=he.message;fe===void 0&&(fe=J.INTERNAL,M="Unknown error status: "+le+" with message "+he.message),P=!0,G.u_(new me(fe,M)),R.close()}else ge(sn,`RPC '${e}' stream ${o} received:`,oe),G.c_(oe)}}),K(m,TE.STAT_EVENT,F=>{F.stat===om.PROXY?ge(sn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===om.NOPROXY&&ge(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.a_()},0),G}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function $d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(s){return new GR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-r);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="PersistentStream";class Eb{constructor(e,n,r,o,u,f,m,p){this.xi=e,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new vb(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(ns(n.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===n&&this.z_(r,o)},r=>{e(()=>{const o=new me(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ge(s0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ge(s0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qI extends Eb{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=KR(this.serializer,e),r=function(u){if(!("targetChange"in u))return Ce.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ce.min():f.readTime?Ti(f.readTime):Ce.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=ym(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=fm(p)?{documents:ZR(u,p)}:{query:WR(u,p).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=lb(u,f.resumeToken);const y=mm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ce.min())>0){m.readTime=uh(u,f.snapshotVersion.toTimestamp());const y=mm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const r=eI(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.Q_(n)}}class HI extends Eb{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=XR(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=ym(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$R(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{}class GI extends FI{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new me(J.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,gm(n,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(J.UNKNOWN,u.toString())})}Yo(e,n,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(e,gm(n,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new me(J.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class QI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ns(n),this.ua=!1):ge("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="RemoteStore";class YI{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{r.enqueueAndForget(async()=>{Wr(this)&&(ge(Kr,"Restarting streams for network reachability change."),await async function(p){const y=Oe(p);y.da.add(4),await su(y),y.Va.set("Unknown"),y.da.delete(4),await Ih(y)}(this))})}),this.Va=new QI(r,o)}}async function Ih(s){if(Wr(s))for(const e of s.Aa)await e(!0)}async function su(s){for(const e of s.Aa)await e(!1)}function bb(s,e){const n=Oe(s);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ng(n)?tg(n):yo(n).N_()&&eg(n,e))}function Jm(s,e){const n=Oe(s),r=yo(n);n.Ea.delete(e),r.N_()&&Tb(n,e),n.Ea.size===0&&(r.N_()?r.k_():Wr(n)&&n.Va.set("Unknown"))}function eg(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(s).Z_(e)}function Tb(s,e){s.ma.Ke(e),yo(s).X_(e)}function tg(s){s.ma=new BR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),yo(s).start(),s.Va.ca()}function ng(s){return Wr(s)&&!yo(s).O_()&&s.Ea.size>0}function Wr(s){return Oe(s).da.size===0}function Ab(s){s.ma=void 0}async function KI(s){s.Va.set("Online")}async function $I(s){s.Ea.forEach((e,n)=>{eg(s,e)})}async function XI(s,e){Ab(s),ng(s)?(s.Va.Pa(e),tg(s)):s.Va.set("Unknown")}async function ZI(s,e,n){if(s.Va.set("Online"),e instanceof ob&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(s,e)}catch(r){ge(Kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hh(s,r)}else if(e instanceof Yc?s.ma.Xe(e):e instanceof ab?s.ma.ot(e):s.ma.nt(e),!n.isEqual(Ce.min()))try{const r=await _b(s.localStore);n.compareTo(r)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=u.Ea.get(y);b&&u.Ea.set(y,b.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,y)=>{const b=u.Ea.get(p);if(!b)return;u.Ea.set(p,b.withResumeToken(Jt.EMPTY_BYTE_STRING,b.snapshotVersion)),Tb(u,p);const R=new Fs(b.target,p,y,b.sequenceNumber);eg(u,R)}),u.remoteSyncer.applyRemoteEvent(m)}(s,n)}catch(r){ge(Kr,"Failed to raise snapshot:",r),await hh(s,r)}}async function hh(s,e,n){if(!go(e))throw e;s.da.add(1),await su(s),s.Va.set("Offline"),n||(n=()=>_b(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{ge(Kr,"Retrying IndexedDB access"),await n(),s.da.delete(1),await Ih(s)})}function wb(s,e){return e().catch(n=>hh(s,n,e))}async function Ch(s){const e=Oe(s),n=nr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:jm;for(;WI(e);)try{const o=await kI(e.localStore,r);if(o===null){e.Ia.length===0&&n.k_();break}r=o.batchId,JI(e,o)}catch(o){await hh(e,o)}Sb(e)&&xb(e)}function WI(s){return Wr(s)&&s.Ia.length<10}function JI(s,e){s.Ia.push(e);const n=nr(s);n.N_()&&n.ea&&n.ta(e.mutations)}function Sb(s){return Wr(s)&&!nr(s).O_()&&s.Ia.length>0}function xb(s){nr(s).start()}async function eC(s){nr(s).ia()}async function tC(s){const e=nr(s);for(const n of s.Ia)e.ta(n.mutations)}async function nC(s,e,n){const r=s.Ia.shift(),o=Qm.from(r,e,n);await wb(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Ch(s)}async function iC(s,e){e&&nr(s).ea&&await async function(r,o){if(function(f){return jR(f)&&f!==J.ABORTED}(o.code)){const u=r.Ia.shift();nr(r).L_(),await wb(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Ch(r)}}(s,e),Sb(s)&&xb(s)}async function r0(s,e){const n=Oe(s);n.asyncQueue.verifyOperationInProgress(),ge(Kr,"RemoteStore received new credentials");const r=Wr(n);n.da.add(3),await su(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Ih(n)}async function sC(s,e){const n=Oe(s);e?(n.da.delete(2),await Ih(n)):e||(n.da.add(2),await su(n),n.Va.set("Unknown"))}function yo(s){return s.fa||(s.fa=function(n,r,o){const u=Oe(n);return u.oa(),new qI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{e_:KI.bind(null,s),n_:$I.bind(null,s),i_:XI.bind(null,s),Y_:ZI.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),ng(s)?tg(s):s.Va.set("Unknown")):(await s.fa.stop(),Ab(s))})),s.fa}function nr(s){return s.ga||(s.ga=function(n,r,o){const u=Oe(n);return u.oa(),new HI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:eC.bind(null,s),i_:iC.bind(null,s),na:tC.bind(null,s),ra:nC.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await Ch(s)):(await s.ga.stop(),s.Ia.length>0&&(ge(Kr,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,m=new ig(e,n,f,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(s,e){if(ns("AsyncQueue",`${e}: ${s}`),go(s))return new me(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Dl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.pa=new ft(be.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Re(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ao{constructor(e,n,r,o,u,f,m,p,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new ao(e,n,Za.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class aC{constructor(){this.queries=o0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Oe(n),u=o.queries;o.queries=o0(),u.forEach((f,m)=>{for(const p of m.Sa)p.onError(r)})})(this,new me(J.ABORTED,"Firestore shutting down"))}}function o0(){return new Zr(s=>QE(s),bh)}async function Rb(s,e){const n=Oe(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(r=2):(u=new rC,r=e.va()?0:1);try{switch(r){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=sg(f,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&rg(n)}async function Ib(s,e){const n=Oe(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oC(s,e){const n=Oe(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(r=!0);f.ba=o}}r&&rg(n)}function lC(s,e,n){const r=Oe(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function rg(s){s.Ca.forEach(e=>{e.next()})}var Em,l0;(l0=Em||(Em={})).xa="default",l0.Cache="cache";class Cb{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.key=e}}class Db{constructor(e){this.key=e}}class uC{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.Za=YE(e),this.Xa=new Za(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new a0,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,R)=>{const x=o.get(b),P=Th(this.query,R)?R:null,G=!!x&&this.mutatedKeys.has(x.key),K=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let F=!1;x&&P?x.data.isEqual(P.data)?G!==K&&(r.track({type:3,doc:P}),F=!0):this.ru(x,P)||(r.track({type:2,doc:P}),F=!0,(p&&this.Za(P,p)>0||y&&this.Za(P,y)<0)&&(m=!0)):!x&&P?(r.track({type:0,doc:P}),F=!0):x&&!P&&(r.track({type:1,doc:x}),F=!0,(p||y)&&(m=!0)),F&&(P?(f=f.add(P),u=K?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{Xa:f,nu:r,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((b,R)=>function(P,G){const K=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:F})}};return K(P)-K(G)}(b.type,R.type)||this.Za(b.doc,R.doc)),this.iu(r),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Ja;return this.Ja=p,f.length!==0||y?{snapshot:new ao(this.query,e.Xa,u,f,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new a0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Db(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Nb(r))}),n}au(e){this.Ha=e.$s,this.Ya=Be();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return ao.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ag="SyncEngine";class cC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hC{constructor(e){this.key=e,this.cu=!1}}class fC{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new Zr(m=>QE(m),bh),this.Pu=new Map,this.Tu=new Set,this.Iu=new ft(be.comparator),this.Eu=new Map,this.du=new $m,this.Au={},this.Ru=new Map,this.Vu=ro.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function dC(s,e,n=!0){const r=Ub(s);let o;const u=r.hu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await Ob(r,e,n,!0),o}async function mC(s,e){const n=Ub(s);await Ob(n,e,!0,!1)}async function Ob(s,e,n,r){const o=await MI(s.localStore,bi(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await gC(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&bb(s.remoteStore,o),m}async function gC(s,e,n,r,o){s.fu=(R,x,P)=>async function(K,F,Q,oe){let re=F.view.tu(Q);re.Cs&&(re=await e0(K.localStore,F.query,!1).then(({documents:M})=>F.view.tu(M,re)));const he=oe&&oe.targetChanges.get(F.targetId),le=oe&&oe.targetMismatches.get(F.targetId)!=null,fe=F.view.applyChanges(re,K.isPrimaryClient,he,le);return c0(K,F.targetId,fe.ou),fe.snapshot}(s,R,x,P);const u=await e0(s.localStore,e,!0),f=new uC(e,u.$s),m=f.tu(u.documents),p=iu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=f.applyChanges(m,s.isPrimaryClient,p);c0(s,n,y.ou);const b=new cC(e,n,f);return s.hu.set(e,b),s.Pu.has(n)?s.Pu.get(n).push(e):s.Pu.set(n,[e]),y.snapshot}async function pC(s,e,n){const r=Oe(s),o=r.hu.get(e),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(f=>!bh(f,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await _m(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Jm(r.remoteStore,o.targetId),bm(r,o.targetId)}).catch(mo)):(bm(r,o.targetId),await _m(r.localStore,o.targetId,!0))}async function yC(s,e){const n=Oe(s),r=n.hu.get(e),o=n.Pu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(n.remoteStore,r.targetId))}async function _C(s,e,n){const r=SC(s);try{const o=await function(f,m){const p=Oe(f),y=Ut.now(),b=m.reduce((P,G)=>P.add(G.key),Be());let R,x;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let G=is(),K=Be();return p.Bs.getEntries(P,b).next(F=>{G=F,G.forEach((Q,oe)=>{oe.isValidDocument()||(K=K.add(Q))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,G)).next(F=>{R=F;const Q=[];for(const oe of m){const re=MR(oe,R.get(oe.key).overlayedDocument);re!=null&&Q.push(new or(oe.key,re,LE(re.value.mapValue),dn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,Q,m)}).next(F=>{x=F;const Q=F.applyToLocalDocumentSet(R,K);return p.documentOverlayCache.saveOverlays(P,F.batchId,Q)})}).then(()=>({batchId:x.batchId,changes:$E(R)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let y=f.Au[f.currentUser.toKey()];y||(y=new ft(Ve)),y=y.insert(m,p),f.Au[f.currentUser.toKey()]=y}(r,o.batchId,n),await ru(r,o.changes),await Ch(r.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");n.reject(u)}}async function kb(s,e){const n=Oe(s);try{const r=await DI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Eu.get(u);f&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?Xe(f.cu,14607):o.removedDocuments.size>0&&(Xe(f.cu,42227),f.cu=!1))}),await ru(n,r,e)}catch(r){await mo(r)}}function u0(s,e,n){const r=Oe(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.hu.forEach((u,f)=>{const m=f.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Oe(f);p.onlineState=m;let y=!1;p.queries.forEach((b,R)=>{for(const x of R.Sa)x.Fa(m)&&(y=!0)}),y&&rg(p)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vC(s,e,n){const r=Oe(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Eu.get(e),u=o&&o.key;if(u){let f=new ft(be.comparator);f=f.insert(u,an.newNoDocument(u,Ce.min()));const m=Be().add(u),p=new xh(Ce.min(),new Map,new ft(Ve),f,m);await kb(r,p),r.Iu=r.Iu.remove(u),r.Eu.delete(e),og(r)}else await _m(r.localStore,e,!1).then(()=>bm(r,e,n)).catch(mo)}async function EC(s,e){const n=Oe(s),r=e.batch.batchId;try{const o=await NI(n.localStore,e);Vb(n,r,null),Mb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ru(n,o)}catch(o){await mo(o)}}async function bC(s,e,n){const r=Oe(s);try{const o=await function(f,m){const p=Oe(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.mutationQueue.lookupMutationBatch(y,m).next(R=>(Xe(R!==null,37113),b=R.keys(),p.mutationQueue.removeMutationBatch(y,R))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b)).next(()=>p.localDocuments.getDocuments(y,b))})}(r.localStore,e);Vb(r,e,n),Mb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ru(r,o)}catch(o){await mo(o)}}function Mb(s,e){(s.Ru.get(e)||[]).forEach(n=>{n.resolve()}),s.Ru.delete(e)}function Vb(s,e,n){const r=Oe(s);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function bm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Pu.get(e))s.hu.delete(r),n&&s.lu.gu(r,n);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(r=>{s.du.containsKey(r)||Pb(s,r)})}function Pb(s,e){s.Tu.delete(e.path.canonicalString());const n=s.Iu.get(e);n!==null&&(Jm(s.remoteStore,n),s.Iu=s.Iu.remove(e),s.Eu.delete(n),og(s))}function c0(s,e,n){for(const r of n)r instanceof Nb?(s.du.addReference(r.key,e),TC(s,r)):r instanceof Db?(ge(ag,"Document no longer in limbo: "+r.key),s.du.removeReference(r.key,e),s.du.containsKey(r.key)||Pb(s,r.key)):Re(19791,{pu:r})}function TC(s,e){const n=e.key,r=n.path.canonicalString();s.Iu.get(n)||s.Tu.has(r)||(ge(ag,"New document in limbo: "+n),s.Tu.add(r),og(s))}function og(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const n=new be(ot.fromString(e)),r=s.Vu.next();s.Eu.set(r,new hC(n)),s.Iu=s.Iu.insert(n,r),bb(s.remoteStore,new Fs(bi(Fm(n.path)),r,"TargetPurposeLimboResolution",_h.le))}}async function ru(s,e,n){const r=Oe(s),o=[],u=[],f=[];r.hu.isEmpty()||(r.hu.forEach((m,p)=>{f.push(r.fu(p,e,n).then(y=>{var b;if((y||n)&&r.isPrimaryClient){const R=y?!y.fromCache:(b=n==null?void 0:n.targetChanges.get(p.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(p.targetId,R?"current":"not-current")}if(y){o.push(y);const R=Zm.Rs(p.targetId,y);u.push(R)}}))}),await Promise.all(f),r.lu.Y_(o),await async function(p,y){const b=Oe(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ne.forEach(y,x=>ne.forEach(x.ds,P=>b.persistence.referenceDelegate.addReference(R,x.targetId,P)).next(()=>ne.forEach(x.As,P=>b.persistence.referenceDelegate.removeReference(R,x.targetId,P)))))}catch(R){if(!go(R))throw R;ge(Wm,"Failed to update sequence numbers: "+R)}for(const R of y){const x=R.targetId;if(!R.fromCache){const P=b.xs.get(x),G=P.snapshotVersion,K=P.withLastLimboFreeSnapshotVersion(G);b.xs=b.xs.insert(x,K)}}}(r.localStore,u))}async function AC(s,e){const n=Oe(s);if(!n.currentUser.isEqual(e)){ge(ag,"User change. New user:",e.toKey());const r=await yb(n.localStore,e);n.currentUser=e,function(u,f){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new me(J.CANCELLED,f))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ru(n,r.ks)}}function wC(s,e){const n=Oe(s),r=n.Eu.get(e);if(r&&r.cu)return Be().add(r.key);{let o=Be();const u=n.Pu.get(e);if(!u)return o;for(const f of u){const m=n.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function Ub(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vC.bind(null,e),e.lu.Y_=oC.bind(null,e.eventManager),e.lu.gu=lC.bind(null,e.eventManager),e}function SC(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bC.bind(null,e),e}class fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return CI(this.persistence,new xI,e.initialUser,this.serializer)}Su(e){return new pb(Xm.fi,this.serializer)}bu(e){return new PI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fh.provider={build:()=>new fh};class xC extends fh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Xe(this.persistence.referenceDelegate instanceof ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new hI(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new pb(r=>ch.fi(r,n),this.serializer)}}class Tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AC.bind(null,this.syncEngine),await sC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aC}()}createDatastore(e){const n=Rh(e.databaseInfo.databaseId),r=function(u){return new BI(u)}(e.databaseInfo);return function(u,f,m,p){return new GI(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,u,f,m){return new YI(r,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>u0(this.syncEngine,n,0),function(){return i0.C()?new i0:new UI}())}createSyncEngine(e,n){return function(o,u,f,m,p,y,b){const R=new fC(o,u,f,m,p,y);return b&&(R.mu=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Oe(o);ge(Kr,"RemoteStore shutting down."),u.da.add(5),await su(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="FirestoreClient";class RC{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=IE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{ge(ir,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(ge(ir,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xd(s,e){s.asyncQueue.verifyOperationInProgress(),ge(ir,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await yb(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function h0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await IC(s);ge(ir,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(r=>r0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>r0(e.remoteStore,o)),s._onlineComponents=e}async function IC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(ir,"Using user provided OfflineComponentProvider");try{await Xd(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await Xd(s,new fh)}}else ge(ir,"Using default OfflineComponentProvider"),await Xd(s,new xC(void 0));return s._offlineComponents}async function jb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(ir,"Using user provided OnlineComponentProvider"),await h0(s,s._uninitializedComponentsProvider._online)):(ge(ir,"Using default OnlineComponentProvider"),await h0(s,new Tm))),s._onlineComponents}function CC(s){return jb(s).then(e=>e.syncEngine)}async function Am(s){const e=await jb(s),n=e.eventManager;return n.onListen=dC.bind(null,e.syncEngine),n.onUnlisten=pC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yC.bind(null,e.syncEngine),n}function NC(s,e,n={}){const r=new $s;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,y){const b=new Lb({next:x=>{b.xu(),f.enqueueAndForget(()=>Ib(u,R)),x.fromCache&&p.source==="server"?y.reject(new me(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),R=new Cb(m,b,{includeMetadataChanges:!0,Qa:!0});return Rb(u,R)}(await Am(s),s.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(s,e,n){if(!n)throw new me(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function DC(s,e,n,r){if(e===!0&&r===!0)throw new me(J.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function d0(s){if(!be.isDocumentKey(s))throw new me(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function m0(s){if(be.isDocumentKey(s))throw new me(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Nh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Re(12329,{type:typeof s})}function Nn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new me(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(s);throw new me(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function OC(s,e){if(e<=0)throw new me(J.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firestore.googleapis.com",g0=!0;class p0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qb,this.ssl=g0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:g0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uI)throw new me(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new me(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new me(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new me(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zx;switch(r.type){case"firstParty":return new Fx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=f0.get(n);r&&(ge("ComponentProvider","Removing Datastore"),f0.delete(n),r.terminate())}(this),Promise.resolve()}}function kC(s,e,n,r={}){var o;s=Nn(s,Dh);const u=uo(e),f=s._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:s._getEmulatorOptions()}),p=`${e}:${n}`;u&&(D0(`https://${p}`),O0("Firestore",!0)),f.host!==qb&&f.host!==p&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},f),{host:p,ssl:u,emulatorOptions:r});if(!Zs(y,m)&&(s._setSettings(y),r.mockUserToken)){let b,R;if(typeof r.mockUserToken=="string")b=r.mockUserToken,R=rn.MOCK_USER;else{b=KA(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new me(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new rn(x)}s._authCredentials=new Bx(new xE(b,R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Xs extends os{constructor(e,n,r){super(e,n,Fm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new be(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Wt(s,e,...n){if(s=pt(s),Bb("collection","path",e),s instanceof Dh){const r=ot.fromString(e,...n);return m0(r),new Xs(s,null,r)}{if(!(s instanceof mn||s instanceof Xs))throw new me(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ot.fromString(e,...n));return m0(r),new Xs(s.firestore,null,r)}}function Pt(s,e,...n){if(s=pt(s),arguments.length===1&&(e=IE.newId()),Bb("doc","path",e),s instanceof Dh){const r=ot.fromString(e,...n);return d0(r),new mn(s,null,new be(r))}{if(!(s instanceof mn||s instanceof Xs))throw new me(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ot.fromString(e,...n));return d0(r),new mn(s.firestore,s instanceof Xs?s.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="AsyncQueue";class _0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new vb(this,"async_queue_retry"),this.rc=()=>{const r=$d();r&&ge(y0,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=$d();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=$d();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new $s;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!go(e))throw e;ge(y0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ns("INTERNAL UNHANDLED ERROR: ",v0(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=ig.createAndSchedule(this,e,n,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Re(47125,{cc:v0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function v0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(s){return function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class ss extends Dh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new _0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _0(e),this._firestoreClient=void 0,await e}}}function MC(s,e){const n=typeof s=="object"?s:P0(),r=typeof s=="string"?s:sh,o=Im(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=QA("firestore");u&&kC(o,...u)}return o}function Oh(s){if(s._terminated)throw new me(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||VC(s),s._firestoreClient}function VC(s){var e,n,r;const o=s._freezeSettings(),u=function(m,p,y,b){return new rR(m,p,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,zb(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new RC(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oo(Jt.fromBase64String(e))}catch(n){throw new me(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oo(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=/^__.*__$/;class UC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,n,this.fieldTransforms):new nu(e,this.data,n,this.fieldTransforms)}}class Hb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new or(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Fb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ic:s})}}class kh{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new kh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return dh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Fb(this.Ic)&&PC.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class LC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rh(e)}bc(e,n,r,o=!1){return new kh({Ic:e,methodName:n,wc:r,path:Zt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lu(s){const e=s._freezeSettings(),n=Rh(s._databaseId);return new LC(s._databaseId,!!e.ignoreUndefinedProperties,n)}function cg(s,e,n,r,o,u={}){const f=s.bc(u.merge||u.mergeFields?2:0,e,n,o);dg("Data must be an object, but it was:",f,r);const m=Yb(r,f);let p,y;if(u.merge)p=new Cn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const R of u.mergeFields){const x=wm(e,R,n);if(!f.contains(x))throw new me(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);$b(b,x)||b.push(x)}p=new Cn(b),y=f.fieldTransforms.filter(R=>p.covers(R.field))}else p=null,y=f.fieldTransforms;return new UC(new vn(m),p,y)}class Mh extends ou{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}function jC(s,e,n){return new kh({Ic:3,wc:e.settings.wc,methodName:s._methodName,Rc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hg extends ou{_toFieldTransform(e){return new nb(e.path,new Kl)}isEqual(e){return e instanceof hg}}class fg extends ou{constructor(e,n){super(e),this.Sc=n}_toFieldTransform(e){const n=jC(this,e,!0),r=this.Sc.map(u=>_o(u,n)),o=new so(r);return new nb(e.path,o)}isEqual(e){return e instanceof fg&&Zs(this.Sc,e.Sc)}}function Gb(s,e,n,r){const o=s.bc(1,e,n);dg("Data must be an object, but it was:",o,r);const u=[],f=vn.empty();ar(r,(p,y)=>{const b=mg(e,p,n);y=pt(y);const R=o.mc(b);if(y instanceof Mh)u.push(b);else{const x=_o(y,R);x!=null&&(u.push(b),f.set(b,x))}});const m=new Cn(u);return new Hb(f,m,o.fieldTransforms)}function Qb(s,e,n,r,o,u){const f=s.bc(1,e,n),m=[wm(e,r,n)],p=[o];if(u.length%2!=0)throw new me(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(wm(e,u[x])),p.push(u[x+1]);const y=[],b=vn.empty();for(let x=m.length-1;x>=0;--x)if(!$b(y,m[x])){const P=m[x];let G=p[x];G=pt(G);const K=f.mc(P);if(G instanceof Mh)y.push(P);else{const F=_o(G,K);F!=null&&(y.push(P),b.set(P,F))}}const R=new Cn(y);return new Hb(b,R,f.fieldTransforms)}function zC(s,e,n,r=!1){return _o(n,s.bc(r?4:3,e))}function _o(s,e){if(Kb(s=pt(s)))return dg("Unsupported field value:",e,s),Yb(s,e);if(s instanceof ou)return function(r,o){if(!Fb(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let p=_o(m,o.fc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(s,e)}return function(r,o){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Ut.fromDate(r);return{timestampValue:uh(o.serializer,u)}}if(r instanceof Ut){const u=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uh(o.serializer,u)}}if(r instanceof lg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oo)return{bytesValue:lb(o.serializer,r._byteString)};if(r instanceof mn){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Km(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ug)return function(f,m){return{mapValue:{fields:{[PE]:{stringValue:UE},[rh]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw m.gc("VectorValues must only contain numeric values.");return Gm(m.serializer,y)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${Nh(r)}`)}(s,e)}function Yb(s,e){const n={};return NE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ar(s,(r,o)=>{const u=_o(o,e.Ac(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function Kb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ut||s instanceof lg||s instanceof oo||s instanceof mn||s instanceof ou||s instanceof ug)}function dg(s,e,n){if(!Kb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=Nh(n);throw r==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+r)}}function wm(s,e,n){if((e=pt(e))instanceof au)return e._internalPath;if(typeof e=="string")return mg(s,e);throw dh("Field path arguments must be of type string or ",s,!1,void 0,n)}const BC=new RegExp("[~\\*/\\[\\]]");function mg(s,e,n){if(e.search(BC)>=0)throw dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new au(...e.split("."))._internalPath}catch{throw dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function dh(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${r}`),f&&(p+=` in document ${o}`),p+=")"),new me(J.INVALID_ARGUMENT,m+s+p)}function $b(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qC extends Xb{data(){return super.data()}}function gg(s,e){return typeof e=="string"?mg(s,e):e instanceof au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new me(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class yg extends pg{}function $r(s,e,...n){let r=[];e instanceof pg&&r.push(e),r=r.concat(n),function(u){const f=u.filter(p=>p instanceof vg).length,m=u.filter(p=>p instanceof _g).length;if(f>1||f>0&&m>0)throw new me(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class _g extends yg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _g(e,n,r)}_apply(e){const n=this._parse(e);return Wb(e._query,n),new os(e.firestore,e.converter,dm(e._query,n))}_parse(e){const n=lu(e.firestore);return function(u,f,m,p,y,b,R){let x;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new me(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){T0(R,b);const G=[];for(const K of R)G.push(b0(p,u,K));x={arrayValue:{values:G}}}else x=b0(p,u,R)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||T0(R,b),x=zC(m,f,R,b==="in"||b==="not-in");return Rt.create(y,b,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vg extends pg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)Wb(f,p),f=dm(f,p)}(e._query,n),new os(e.firestore,e.converter,dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eg extends yg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Eg(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new me(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new me(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(u,f)}(e._query,this._field,this._direction);return new os(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new po(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function lo(s,e="asc"){const n=e,r=gg("orderBy",s);return Eg._create(r,n)}class bg extends yg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new bg(e,n,r)}_apply(e){return new os(e.firestore,e.converter,oh(e._query,this._limit,this._limitType))}}function Tg(s){return OC("limit",s),bg._create("limit",s,"F")}function b0(s,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new me(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GE(e)&&n.indexOf("/")!==-1)throw new me(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!be.isDocumentKey(r))throw new me(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vv(s,new be(r))}if(n instanceof mn)return Vv(s,n._key);throw new me(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function T0(s,e){if(!Array.isArray(s)||s.length===0)throw new me(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wb(s,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new me(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HC{convertValue(e,n="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ar(e,(o,u)=>{r[o]=this.convertValue(u,n)}),r}convertVectorValue(e){var n,r,o;const u=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[rh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>Et(f.doubleValue));return new ug(u)}convertGeoPoint(e){return new lg(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Eh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=Js(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Xe(mb(r),9688,{name:e});const o=new Gl(r.get(1),r.get(3)),u=new be(r.popFirst(5));return o.isEqual(n)||ns(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jb extends Xb{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kc extends Jb{data(e={}){return super.data(e)}}class eT{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new kl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kc(this._firestore,this._userDataWriter,r.key,r,new kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new Kc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Kc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),b=f.indexOf(m.doc.key)),{type:FC(m.type),doc:p,oldIndex:y,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:s})}}class wg extends HC{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function A0(s){s=Nn(s,os);const e=Nn(s.firestore,ss),n=Oh(e),r=new wg(e);return Zb(s._query),NC(n,s._query).then(o=>new eT(e,r,s,o))}function zl(s,e,n){s=Nn(s,mn);const r=Nn(s.firestore,ss),o=Ag(s.converter,e,n);return uu(r,[cg(lu(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,dn.none())])}function fn(s,e,n,...r){s=Nn(s,mn);const o=Nn(s.firestore,ss),u=lu(o);let f;return f=typeof(e=pt(e))=="string"||e instanceof au?Qb(u,"updateDoc",s._key,e,n,r):Gb(u,"updateDoc",s._key,e),uu(o,[f.toMutation(s._key,dn.exists(!0))])}function Sg(s){return uu(Nn(s.firestore,ss),[new Sh(s._key,dn.none())])}function wi(s,e){const n=Nn(s.firestore,ss),r=Pt(s),o=Ag(s.converter,e);return uu(n,[cg(lu(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function sr(s,...e){var n,r,o;s=pt(s);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||E0(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(E0(e[f])){const R=e[f];e[f]=(n=R.next)===null||n===void 0?void 0:n.bind(R),e[f+1]=(r=R.error)===null||r===void 0?void 0:r.bind(R),e[f+2]=(o=R.complete)===null||o===void 0?void 0:o.bind(R)}let p,y,b;if(s instanceof mn)y=Nn(s.firestore,ss),b=Fm(s._key.path),p={next:R=>{e[f]&&e[f](GC(y,s,R))},error:e[f+1],complete:e[f+2]};else{const R=Nn(s,os);y=Nn(R.firestore,ss),b=R._query;const x=new wg(y);p={next:P=>{e[f]&&e[f](new eT(y,x,R,P))},error:e[f+1],complete:e[f+2]},Zb(s._query)}return function(x,P,G,K){const F=new Lb(K),Q=new Cb(P,F,G);return x.asyncQueue.enqueueAndForget(async()=>Rb(await Am(x),Q)),()=>{F.xu(),x.asyncQueue.enqueueAndForget(async()=>Ib(await Am(x),Q))}}(Oh(y),b,m,p)}function uu(s,e){return function(r,o){const u=new $s;return r.asyncQueue.enqueueAndForget(async()=>_C(await CC(r),o,u)),u.promise}(Oh(s),e)}function GC(s,e,n){const r=n.docs.get(e._key),o=new wg(s);return new Jb(s,o,e._key,r,new kl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lu(e)}set(e,n,r){this._verifyNotCommitted();const o=Zd(e,this._firestore),u=Ag(o.converter,n,r),f=cg(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(f.toMutation(o._key,dn.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const u=Zd(e,this._firestore);let f;return f=typeof(n=pt(n))=="string"||n instanceof au?Qb(this._dataReader,"WriteBatch.update",u._key,n,r,o):Gb(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zd(e,this._firestore);return this._mutations=this._mutations.concat(new Sh(n._key,dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zd(s,e){if((s=pt(s)).firestore!==e)throw new me(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function It(){return new hg("serverTimestamp")}function w0(...s){return new fg("arrayUnion",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(s){return Oh(s=Nn(s,ss)),new QC(s,e=>uu(s,e))}(function(e,n=!0){(function(o){fo=o})(co),Wa(new Fr("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new ss(new qx(r.getProvider("auth-internal")),new Gx(f,r.getProvider("app-check-internal")),function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new me(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(y.options.projectId,b)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Ys(Av,wv,e),Ys(Av,wv,"esm2017")})();class KC extends NA.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-50 text-red-800 p-8",children:[E.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),E.jsx("p",{className:"text-lg mb-6",children:"We're sorry for the inconvenience. Please try refreshing the page."}),E.jsxs("details",{className:"text-sm bg-red-100 p-4 rounded-lg",children:[E.jsx("summary",{className:"cursor-pointer font-semibold",children:"Error Details"}),E.jsxs("pre",{className:"whitespace-pre-wrap break-words mt-2 text-red-700",children:[this.state.error&&this.state.error.toString(),E.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),E.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105",children:"Reload Page"})]}):this.props.children}}const tT=ae.createContext(null),$C=({children:s})=>{const[e,n]=ae.useState(null),[r,o]=ae.useState(null),[u,f]=ae.useState(null),[m,p]=ae.useState(null),[y,b]=ae.useState(!0),[R,x]=ae.useState(!1),[P,G]=ae.useState(null);ae.useEffect(()=>{const re=typeof __app_id<"u"?__app_id:"skill-app-a7b53",he=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyBAqfIvRUGiCL7LpKxQCizuqiZEkbhUkXo",authDomain:"skill-app-a7b53.firebaseapp.com",projectId:"skill-app-a7b53",storageBucket:"skill-app-a7b53.firebasestorage.app",messagingSenderId:"12606305729",appId:"1:12606305729:web:d734fe705e341e75f62b40",measurementId:"G-L4HRY4RRFY"};let le=()=>{},fe=()=>{};return(async()=>{try{const S=V0(he),A=MC(S),D=Lx(S);n(S),o(A),f(D),b(!1),le=x1(D,async N=>{let C=null;if(N)if(C=N.uid,p(C),console.log("Auth State: User logged in. UID:",C),A){const I=Pt(A,`artifacts/${re}/users/${C}/profile/userProfile`);fe&&fe(),fe=sr(I,de=>{var we;if(de.exists())G(de.data()),console.log("User profile loaded/updated:",de.data());else{console.log("Creating new user profile for UID:",C);const H=(N==null?void 0:N.displayName)||((we=N==null?void 0:N.email)==null?void 0:we.split("@")[0])||`User_${C.substring(0,8)}`;zl(I,{name:H,createdAt:It(),skillPreferences:"",points:0,dailyStreak:0,lastAdviceDate:null,skillsToTrack:[],specialNotes:[],skillsToLearn:[],skillsToTeach:[],groupChatClearedAt:null},{merge:!0}).then(()=>{G({name:H,skillPreferences:"",points:0,dailyStreak:0,lastAdviceDate:null,skillsToTrack:[],specialNotes:[],skillsToLearn:[],skillsToTeach:[],groupChatClearedAt:null}),console.log("New user profile created or merged successfully.")}).catch(Z=>{console.error("Error creating user profile:",Z)})}x(!0)},de=>{console.error("Error listening to user profile:",de),x(!0)})}else console.error("Firestore DB not initialized for profile fetch."),x(!0);else console.log("Auth State: No user. Setting userId to null."),p(null),G(null),fe&&fe(),x(!0)})}catch(S){console.error("Failed to initialize Firebase:",S),b(!1),x(!0)}})(),()=>{le(),fe&&fe()}},[]);const oe={app:e,db:r,auth:u,userId:m,loadingAuth:y,authReady:R,userProfile:P,setUserProfile:G,loginEmailPassword:async(re,he)=>{if(!u)throw new Error("Firebase Auth not initialized.");return console.log("Attempting to sign in with email/password..."),b1(u,re,he)},signupEmailPassword:async(re,he,le)=>{if(!u)throw new Error("Firebase Auth not initialized.");console.log("Attempting to create user with email/password...");const fe=await E1(u,re,he);return console.log("Updating user profile with displayName:",le),await A1(fe.user,{displayName:le}),fe},signOutUser:async()=>{u&&(console.log("Attempting to sign out user..."),await R1(u),p(null),G(null),console.log("User signed out."))}};return E.jsx(tT.Provider,{value:oe,children:s})},Dn=()=>ae.useContext(tT),lt=()=>typeof __app_id<"u"?__app_id:"skill-app-a7b53",XC=()=>{const{loginEmailPassword:s,signupEmailPassword:e,loadingAuth:n,authReady:r,userId:o,setUserProfile:u}=Dn(),[f,m]=ae.useState(""),[p,y]=ae.useState(""),[b,R]=ae.useState(""),[x,P]=ae.useState(!0),[G,K]=ae.useState(""),[F,Q]=ae.useState(!1),oe=async re=>{re.preventDefault(),K(""),Q(!0);try{if(x)await s(f,p),K("Login successful!");else{if(!b.trim()){K("Please enter a username."),Q(!1);return}await e(f,p,b),K("Account created and logged in successfully!"),u(he=>({...he,name:b}))}}catch(he){he.code==="auth/email-already-in-use"?K("This email is already registered. Please try logging in or use a different email."):K(he.message),console.error("Auth error:",he)}finally{Q(!1)}};return n||!r?E.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:E.jsx("div",{className:"text-xl text-gray-700 animate-pulse",children:"Loading application..."})}):o?null:E.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-white animate-fade-in",children:E.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md transform transition-all duration-300 hover:scale-[1.01] bg-opacity-90 backdrop-blur-sm",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:x?"Welcome Back!":"Join Us Today!"}),E.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[!x&&E.jsxs("div",{children:[E.jsx("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-medium mb-1",children:"Username"}),E.jsx("input",{type:"text",id:"username",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-gray-800",value:b,onChange:re=>R(re.target.value),required:!x,disabled:F})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-1",children:"Email"}),E.jsx("input",{type:"email",id:"email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-gray-800",value:f,onChange:re=>m(re.target.value),required:!0,disabled:F})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-1",children:"Password"}),E.jsx("input",{type:"password",id:"password",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-gray-800",value:p,onChange:re=>y(re.target.value),required:!0,disabled:F})]}),E.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:F,children:F?x?"Logging In...":"Signing Up...":x?"Login":"Sign Up"})]}),E.jsxs("div",{className:"mt-4 text-center text-gray-600",children:[E.jsx("span",{className:"mr-2",children:x?"Don't have an account?":"Already have an account?"}),E.jsx("button",{onClick:()=>P(!x),className:"text-blue-600 hover:text-blue-800 font-medium",disabled:F,children:x?"Sign Up":"Login"})]}),G&&E.jsx("p",{className:"mt-4 text-center text-sm font-medium text-red-600",children:G})]})})},ZC=()=>{var re;const{db:s,userId:e,loadingAuth:n,userProfile:r,setUserProfile:o}=Dn(),[u,f]=ae.useState(""),[m,p]=ae.useState(!1),[y,b]=ae.useState((r==null?void 0:r.skillPreferences)||""),[R,x]=ae.useState(""),[P,G]=ae.useState({}),[K,F]=ae.useState(null);ae.useEffect(()=>{r&&b(r.skillPreferences||"")},[r]),ae.useEffect(()=>{if(!s||!e||n)return;const he=lt(),le=Wt(s,`artifacts/${he}/users/${e}/dailyAdvice`),fe=$r(le,lo("timestamp","desc"),Tg(10)),M=sr(fe,S=>{const A={};S.docs.forEach(D=>{const N=D.data(),C=N.topic||N.preferences||"General Advice";A[C]||(A[C]=[]),A[C].push({id:D.id,...N})}),G(A)},S=>{console.error("Error fetching advice history:",S)});return()=>M()},[s,e,n]);const Q=async()=>{if(!e||!s||n){x("App is not ready. Please wait for authentication and database initialization.");return}if(!y.trim()){x("Please enter your skill preferences to get personalized advice.");return}p(!0),x(""),f(""),F(null);const he=lt(),le=Pt(s,`artifacts/${he}/users/${e}/profile/userProfile`);try{await fn(le,{skillPreferences:y}),o(I=>({...I,skillPreferences:y}));const fe=`Generate personalized daily advice for a user interested in "${y}". Focus *only* on actionable steps, learning resources, or practice tips relevant to this skill. Keep the advice concise, around 100-150 words. Also, provide a concise topic (2-5 words) that summarizes this advice, reflecting *only* the skill(s) provided.

            Format your response as a JSON object with two fields: "advice" (string) and "topic" (string).

            Example:
            {
              "topic": "Web Development Tips",
              "advice": "To advance in web development, focus on mastering modern JavaScript frameworks like React or Vue. Spend dedicated time building small projects end-to-end to solidify your understanding. Explore server-side technologies like Node.js with Express to build full-stack applications. Regularly review code from open-source projects to learn best practices and efficient coding patterns. Consider contributing to a project on GitHub to gain practical experience and collaborate with others. Stay updated with the latest web standards and browser APIs to ensure your skills remain current."
            }`;let M=[];M.push({role:"user",parts:[{text:fe}]});const C=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDk89dLS6pY-_7Ad8mQu_6Yt1xYOYdVcQM",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:M,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{topic:{type:"STRING"},advice:{type:"STRING"}},propertyOrdering:["topic","advice"]}}})})).json();if(C.candidates&&C.candidates.length>0&&C.candidates[0].content&&C.candidates[0].content.parts&&C.candidates[0].content.parts.length>0){const I=JSON.parse(C.candidates[0].content.parts[0].text),de=I.advice,we=I.topic;f(de);const H=Wt(s,`artifacts/${he}/users/${e}/dailyAdvice`);await wi(H,{advice:de,topic:we,timestamp:It(),preferences:y});const Z=new Date().toDateString(),se=r==null?void 0:r.lastAdviceDate,_e=se?se.toDate?se.toDate().toDateString():se instanceof Date?se.toDateString():null:null;let k=(r==null?void 0:r.dailyStreak)||0,$=((r==null?void 0:r.points)||0)+10;if(_e!==Z){const ee=new Date;ee.setDate(ee.getDate()-1);const ie=ee.toDateString();_e===ie?k+=1:k=1,await fn(le,{points:$,dailyStreak:k,lastAdviceDate:It()}),o(pe=>({...pe,points:$,dailyStreak:k,lastAdviceDate:new Date}))}else await fn(le,{points:$}),o(ee=>({...ee,points:$}))}else console.error("Gemini API response structure unexpected or empty candidates:",JSON.stringify(C,null,2)),C.promptFeedback&&C.promptFeedback.blockReason?x(`Failed to generate advice: Content blocked due to ${C.promptFeedback.blockReason}. Please try rephrasing.`):C.error?x(`Failed to generate advice: API error - ${C.error.message}`):x("Failed to generate advice. The AI did not return a valid response. Please try again.")}catch(fe){x("Error generating advice: "+fe.message),console.error("Error calling Gemini API or Firestore:",fe),fe.response&&(console.error("Error response data:",fe.response.data),console.error("Error response status:",fe.response.status))}finally{p(!1)}},oe=()=>{f(""),F(null),x("Current advice cleared.")};return E.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-green-50 rounded-lg shadow-lg w-full mx-auto my-8 animate-fade-in flex flex-col gap-6",children:[E.jsxs("div",{className:"flex-grow bg-white bg-opacity-90 p-6 rounded-lg",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Personalized Daily Advice"}),E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{htmlFor:"skillPreferences",className:"block text-gray-700 text-lg font-medium mb-2",children:"What skills are you interested in? (e.g., Web Development, Data Science, Design)"}),E.jsx("textarea",{id:"skillPreferences",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-800 text-base",rows:"3",value:y,onChange:he=>b(he.target.value),placeholder:"Tell me about your skill interests, or leave blank for general advice..."})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[E.jsx("button",{onClick:Q,className:"flex-grow bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-lg",disabled:m||n||!y.trim(),children:m?"Generating Advice...":"Get Personalized Advice"}),E.jsx("button",{onClick:oe,className:"flex-grow bg-gray-400 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-lg",disabled:!u&&!K,children:"Clear Current Advice"})]}),R&&E.jsx("p",{className:"mt-4 text-red-600 text-center font-medium",children:R}),(u||K)&&E.jsxs("div",{className:"mt-8 p-6 bg-blue-50 border-l-4 border-blue-500 text-blue-800 rounded-lg shadow-inner animate-fade-in",children:[E.jsx("h3",{className:"text-xl font-semibold mb-3",children:K?`Advice on: ${K.topic||K.preferences||"General"}`:"Your Daily Advice:"}),E.jsx("p",{className:"text-lg leading-relaxed",children:K?K.advice:u}),K&&E.jsxs("p",{className:"text-sm text-blue-700 mt-3",children:["Generated on: ",(re=K.timestamp)!=null&&re.toDate?K.timestamp.toDate().toLocaleDateString():"Unknown date"]})]})]}),E.jsxs("div",{className:"w-full bg-white bg-opacity-90 p-4 rounded-lg shadow-inner mt-6",children:[E.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"Advice History"}),Object.keys(P).length===0?E.jsx("p",{className:"text-gray-500 italic text-center",children:"No past advice recorded yet."}):E.jsx("div",{className:"space-y-4 max-h-40 overflow-y-auto custom-scrollbar",children:Object.entries(P).map(([he,le])=>E.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[E.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:he}),E.jsx("ul",{className:"space-y-1",children:le.map(fe=>{var M;return E.jsxs("li",{className:"text-sm text-blue-600 hover:text-blue-800 cursor-pointer p-1 rounded-md hover:bg-blue-100 transition-colors",onClick:()=>{F(fe),f(""),x("")},children:[E.jsx("span",{className:"font-medium",children:(M=fe.timestamp)!=null&&M.toDate?fe.timestamp.toDate().toLocaleDateString():"Unknown date"}),E.jsxs("span",{className:"ml-2 truncate block sm:inline-block max-w-full",children:[fe.advice.substring(0,50),"..."]})]},fe.id)})})]},he))})]})]})},WC=()=>{const{db:s,userId:e,loadingAuth:n,userProfile:r}=Dn(),[o,u]=ae.useState([]),[f,m]=ae.useState(""),[p,y]=ae.useState(!1),b=ae.useRef(null),[R,x]=ae.useState(!1),P=ae.useRef(null),[G,K]=ae.useState(!1),F=window.speechSynthesis,[Q,oe]=ae.useState(null);ae.useEffect(()=>{if(!s||!e||n){console.log("Chatbot: DB or userId not ready, or auth loading.");return}const A=lt(),D=Wt(s,`artifacts/${A}/users/${e}/chatbotHistory`),N=$r(D,lo("timestamp")),C=sr(N,I=>{const de=I.docs.map(we=>({id:we.id,...we.data()}));u(de),x(!0)},I=>{console.error("Error fetching chat history:",I),x(!0)});if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){const I=window.SpeechRecognition||window.webkitSpeechRecognition,de=new I;de.continuous=!1,de.interimResults=!1,de.lang="en-US",de.onresult=we=>{const H=we.results[0][0].transcript;m(H),K(!1)},de.onerror=we=>{console.error("Speech recognition error:",we.error),K(!1)},de.onend=()=>{K(!1)},P.current=de}else console.warn("Speech Recognition API not supported in this browser."),P.current=null;return()=>{C(),P.current&&P.current.stop()}},[s,e,n]),ae.useEffect(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[o]);const re=A=>{const D=A.target.files[0];if(D){const N=new FileReader;N.onloadend=()=>{oe(N.result)},N.onerror=C=>{console.error("Error reading file:",C),oe(null)},N.readAsDataURL(D)}else oe(null)},he=()=>{oe(null),document.getElementById("chatImageUpload").value=""},le=async()=>{if(!f.trim()&&!Q||p||!e||!s||n||!r){console.log("Chatbot: Cannot send message. Input invalid, loading, or app not ready.");return}const A=r.name||`User_${e.substring(0,0)}`,D={text:f,sender:"user",timestamp:It(),userName:A,imageUrl:Q};u(I=>[...I,D]),m(""),oe(null),document.getElementById("chatImageUpload").value="",y(!0);const N=lt(),C=Wt(s,`artifacts/${N}/users/${e}/chatbotHistory`);try{await wi(C,D);const I=o.map($=>({role:$.sender==="user"?"user":"model",parts:[{text:$.text}]}));I.push({role:"user",parts:[{text:f}]});const se=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDk89dLS6pY-_7Ad8mQu_6Yt1xYOYdVcQM",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:I})})).json();let _e="Sorry, I could not generate a response.";se.candidates&&se.candidates.length>0&&se.candidates[0].content&&se.candidates[0].content.parts&&se.candidates[0].content.parts.length>0?_e=se.candidates[0].content.parts[0].text:se.promptFeedback&&se.promptFeedback.blockReason?_e=`Response blocked due to: ${se.promptFeedback.blockReason}. Please try rephrasing your query.`:se.error&&(_e=`Error from API: ${se.error.message}`,console.error("Gemini API Error:",se.error));const k={text:_e,sender:"bot",timestamp:It()};u($=>[...$,k]),await wi(C,k)}catch(I){console.error("Error sending message to Gemini API or Firestore:",I),u(de=>[...de,{text:`Error: ${I.message}`,sender:"bot",timestamp:It()}])}finally{y(!1)}},fe=()=>{P.current&&!G&&(P.current.start(),K(!0),m("Listening..."))},M=()=>{P.current&&G&&(P.current.stop(),K(!1))},S=A=>{if(F){const D=new SpeechSynthesisUtterance(A);F.speak(D)}};return E.jsx("div",{className:"p-6 bg-gradient-to-br from-pink-50 to-orange-50 rounded-lg shadow-lg max-w-2xl mx-auto my-8 animate-fade-in",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[" ",E.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"AI Chatbot"}),E.jsxs("div",{ref:b,className:"bg-white p-4 rounded-lg border border-gray-200 h-96 overflow-y-auto flex flex-col space-y-4 mb-4 custom-scrollbar",children:[!R&&E.jsx("div",{className:"text-center text-gray-500 py-4",children:"Loading chat history..."}),R&&o.length===0&&E.jsx("div",{className:"text-center text-gray-500 py-4",children:"Start a conversation with the AI!"}),o.map((A,D)=>{var N;return E.jsx("div",{className:`flex ${A.sender==="user"?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`p-3 rounded-lg max-w-[70%] break-words relative group ${A.sender==="user"?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[E.jsx("p",{className:"text-sm",children:A.text}),A.imageUrl&&E.jsx("img",{src:A.imageUrl,alt:"Chat attachment",className:"mt-2 rounded-md max-w-full h-auto"}),E.jsx("span",{className:"text-xs opacity-75 mt-1 block",children:(N=A.timestamp)!=null&&N.toDate?A.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"..."}),A.sender==="bot"&&F&&E.jsx("button",{onClick:()=>S(A.text),className:"absolute -right-8 top-1/2 -translate-y-1/2 p-1 text-gray-600 hover:text-blue-600 transition-colors opacity-0 group-hover:opacity-100",title:"Listen to response",children:E.jsx("i",{className:"fas fa-volume-up"})})]})},A.id||D)}),p&&E.jsx("div",{className:"flex justify-start",children:E.jsx("div",{className:"p-3 rounded-lg bg-gray-200 text-gray-800 rounded-bl-none animate-pulse",children:E.jsx("p",{className:"text-sm",children:"AI is thinking..."})})})]}),Q&&E.jsxs("div",{className:"mb-4 p-3 bg-blue-100 rounded-lg flex items-center justify-between shadow-inner",children:[E.jsx("img",{src:Q,alt:"Preview",className:"h-16 w-16 object-cover rounded-md mr-3"}),E.jsx("span",{className:"text-sm text-gray-700 truncate",children:"Image selected"}),E.jsx("button",{onClick:he,className:"ml-3 text-red-500 hover:text-red-700",children:E.jsx("i",{className:"fas fa-times-circle"})})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("label",{htmlFor:"chatImageUpload",className:"p-3 bg-gray-400 hover:bg-gray-500 text-white rounded-lg cursor-pointer transition duration-300 ease-in-out flex-shrink-0",title:"Upload Image",children:[E.jsx("i",{className:"fas fa-image"}),E.jsx("input",{type:"file",id:"chatImageUpload",accept:"image/*",className:"hidden",onChange:re,disabled:p||n||!R})]}),P.current&&E.jsx("button",{onClick:G?M:fe,className:`p-3 ${G?"bg-red-500 hover:bg-red-600":"bg-gray-400 hover:bg-gray-500"} text-white rounded-lg font-semibold transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0`,disabled:p||n||!R,title:G?"Stop Listening":"Start Listening",children:E.jsx("i",{className:`fas ${G?"fa-microphone-slash":"fa-microphone"}`})}),E.jsx("input",{type:"text",className:"flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",placeholder:"Type your message...",value:f,onChange:A=>m(A.target.value),onKeyPress:A=>{A.key==="Enter"&&le()},disabled:p||n||!R}),E.jsx("button",{onClick:le,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",disabled:p||n||!f.trim()&&!Q||!R,children:E.jsx("i",{className:"fas fa-paper-plane"})})]})]})})},JC=()=>{const{userProfile:s,loadingAuth:e}=Dn();if(e)return E.jsx("div",{className:"p-6 bg-white rounded-lg shadow-lg max-w-2xl mx-auto my-8 text-center text-gray-600",children:"Loading gamification data..."});if(!s)return E.jsx("div",{className:"p-6 bg-white rounded-lg shadow-lg max-w-2xl mx-auto my-8 text-center text-red-600",children:"Could not load user profile for gamification."});const{points:n,dailyStreak:r,lastAdviceDate:o}=s,u=o!=null&&o.toDate?o.toDate().toLocaleDateString():"Never";return E.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg shadow-xl max-w-2xl mx-auto my-8 animate-fade-in",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[" ",E.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Your Progress Dashboard"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[E.jsxs("div",{className:"bg-white bg-opacity-80 p-4 rounded-lg shadow-md backdrop-blur-sm flex flex-col items-center justify-center transform transition-transform duration-300 hover:scale-105",children:[E.jsx("i",{className:"fas fa-star text-4xl mb-2 text-yellow-300"}),E.jsx("p",{className:"text-xl font-semibold text-gray-800",children:"Points"}),E.jsx("p",{className:"text-3xl font-extrabold text-gray-800",children:n||0})]}),E.jsxs("div",{className:"bg-white bg-opacity-80 p-4 rounded-lg shadow-md backdrop-blur-sm flex flex-col items-center justify-center transform transition-transform duration-300 hover:scale-105",children:[E.jsx("i",{className:"fas fa-fire-alt text-4xl mb-2 text-red-400"}),E.jsx("p",{className:"text-xl font-semibold text-gray-800",children:"Daily Streak"}),E.jsxs("p",{className:"text-3xl font-extrabold text-gray-800",children:[r||0," Days"]})]}),E.jsxs("div",{className:"bg-white bg-opacity-80 p-4 rounded-lg shadow-md backdrop-blur-sm flex flex-col items-center justify-center transform transition-transform duration-300 hover:scale-105",children:[E.jsx("i",{className:"fas fa-calendar-alt text-4xl mb-2 text-blue-300"}),E.jsx("p",{className:"text-xl font-semibold text-gray-800",children:"Last Advice"}),E.jsx("p",{className:"text-xl font-extrabold text-gray-800",children:u})]})]}),E.jsx("p",{className:"mt-6 text-lg text-center opacity-90 text-gray-700",children:"Keep learning! Earn points for daily advice and completing tasks. Maintain your streak!"})]})})},eN=()=>{const{db:s,userId:e,loadingAuth:n,userProfile:r,setUserProfile:o}=Dn(),[u,f]=ae.useState(""),[m,p]=ae.useState([]),[y,b]=ae.useState(!1),[R,x]=ae.useState(""),[P,G]=ae.useState(""),K=(r==null?void 0:r.skillsToTrack)||[],[F,Q]=ae.useState(""),oe=(r==null?void 0:r.specialNotes)||[],re=async()=>{if(!e||!s||n){x("App is not ready. Please wait for authentication.");return}if(!u.trim()){x("Please enter a skill to get book suggestions.");return}b(!0),x(""),p([]);try{const S=`Suggest 5 highly-rated books for learning "${u}". For each book, provide only the title and author, formatted as "Title by Author" on a new line. Do NOT include links.`;let A=[];A.push({role:"user",parts:[{text:S}]});const de=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDk89dLS6pY-_7Ad8mQu_6Yt1xYOYdVcQM",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:A})})).json();if(de.candidates&&de.candidates.length>0&&de.candidates[0].content&&de.candidates[0].content.parts&&de.candidates[0].content.parts.length>0){const H=de.candidates[0].content.parts[0].text.split(`
`).filter(_e=>_e.trim().length>0).map(_e=>({text:_e.trim()}));p(H);const Z=lt(),se=Wt(s,`artifacts/${Z}/users/${e}/userBookSuggestions`);await wi(se,{skill:u.trim(),books:H.map(_e=>_e.text),timestamp:It()})}else x("Failed to get book suggestions. Please try again."),console.error("Gemini API response structure unexpected:",de)}catch(S){x("Error getting book suggestions: "+S.message),console.error("Error calling Gemini API or Firestore:",S)}finally{b(!1)}},he=async()=>{if(!P.trim()||!e||!s||n){x("Please enter a skill to track.");return}x("");const S=lt(),A=Pt(s,`artifacts/${S}/users/${e}/profile/userProfile`),D=P.trim();if(K.includes(D)){x(`"${D}" is already in your skills to track.`);return}try{await fn(A,{skillsToTrack:w0(D)}),o(N=>({...N,skillsToTrack:[...(N==null?void 0:N.skillsToTrack)||[],D]})),G(""),x(`"${D}" added to skills to track.`)}catch(N){x(`Error adding skill to track: ${N.message}`),console.error("Error adding skill to track in Firestore:",N)}},le=async S=>{if(!e||!s||n){x("App is not ready. Please wait.");return}x("");const A=lt(),D=Pt(s,`artifacts/${A}/users/${e}/profile/userProfile`),N=K.filter(C=>C!==S);try{await fn(D,{skillsToTrack:N}),o(C=>({...C,skillsToTrack:N})),x("Note removed successfully!")}catch(C){x(`Error removing note: ${C.message}`),console.error("Error removing note from Firestore:",C)}},fe=async()=>{if(!F.trim()||!e||!s||n){x("Please enter a note.");return}x("");const S=lt(),A=Pt(s,`artifacts/${S}/users/${e}/profile/userProfile`),D=F.trim();try{await fn(A,{specialNotes:w0(D)}),o(N=>({...N,specialNotes:[...(N==null?void 0:N.specialNotes)||[],D]})),Q(""),x("Note added successfully!")}catch(N){x(`Error adding note: ${N.message}`),console.error("Error adding note to Firestore:",N)}},M=async S=>{if(!e||!s||n){x("App is not ready. Please wait.");return}x("");const A=lt(),D=Pt(s,`artifacts/${A}/users/${e}/profile/userProfile`),N=oe.filter(C=>C!==S);try{await fn(D,{specialNotes:N}),o(C=>({...C,specialNotes:N})),x("Note removed successfully!")}catch(C){x(`Error removing note: ${C.message}`),console.error("Error removing note from Firestore:",C)}};return E.jsx("div",{className:"p-6 bg-gradient-to-br from-green-50 to-blue-50 rounded-lg shadow-lg max-w-4xl mx-auto my-8 animate-fade-in",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[" ",E.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Skill Library & Notes"}),E.jsxs("div",{className:"mb-8",children:[E.jsx("label",{htmlFor:"skillSearch",className:"block text-gray-700 text-lg font-medium mb-2",children:"Enter a Skill to Get Book Suggestions:"}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[E.jsx("input",{type:"text",id:"skillSearch",className:"flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 text-gray-800",placeholder:"e.g., JavaScript, Marketing, History",value:u,onChange:S=>f(S.target.value),onKeyPress:S=>{S.key==="Enter"&&re()},disabled:n||y}),E.jsx("button",{onClick:re,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0 transform hover:scale-105",disabled:y||n||!u.trim(),children:y?"Getting Books...":"Get Book Suggestions"})]}),R&&E.jsx("p",{className:"mt-2 text-red-600 text-center font-medium",children:R}),m.length>0&&E.jsxs("div",{className:"mt-4 p-4 bg-green-50 border-l-4 border-green-500 text-green-800 rounded-lg animate-fade-in",children:[E.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Suggested Books:"}),E.jsx("ul",{className:"list-disc list-inside space-y-1",children:m.map((S,A)=>E.jsx("li",{className:"text-sm",children:E.jsx("span",{children:S.text})},A))})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[E.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 transform transition-transform duration-300 hover:scale-[1.01]",children:[E.jsxs("h3",{className:"text-2xl font-bold text-gray-700 mb-4 flex items-center",children:[E.jsx("i",{className:"fas fa-clipboard-list mr-3 text-blue-600"}),"Skills I Want to Track"]}),E.jsxs("div",{className:"min-h-[100px]",children:[E.jsxs("div",{className:"flex gap-2 mb-4",children:[E.jsx("input",{type:"text",className:"flex-grow p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"Add skill to track...",value:P,onChange:S=>G(S.target.value),onKeyPress:S=>{S.key==="Enter"&&he()},disabled:n}),E.jsx("button",{onClick:he,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:n||!P.trim(),children:"Add"})]}),K.length===0?E.jsx("p",{className:"text-gray-500 italic",children:"No skills added yet. Use the input above to add skills you want to track."}):E.jsx("ul",{className:"space-y-2",children:K.map((S,A)=>E.jsxs("li",{className:"flex justify-between items-center bg-white p-2 rounded-md shadow-sm text-gray-800 text-base transform transition-transform duration-200 hover:scale-[1.02]",children:[E.jsx("span",{children:S}),E.jsx("button",{onClick:()=>le(S),className:"text-red-500 hover:text-red-700 ml-2",title:`Remove "${S}"`,children:E.jsx("i",{className:"fas fa-times-circle"})})]},A))})]})]}),E.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg shadow-md border border-purple-200 transform transition-transform duration-300 hover:scale-[1.01]",children:[E.jsxs("h3",{className:"text-2xl font-bold text-gray-700 mb-4 flex items-center",children:[E.jsx("i",{className:"fas fa-pencil-alt mr-3 text-purple-600"}),"Special Notes"]}),E.jsxs("div",{className:"min-h-[100px]",children:[E.jsxs("div",{className:"flex gap-2 mb-4",children:[E.jsx("textarea",{className:"flex-grow p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500",placeholder:"Write down notes from books or resources...",rows:"3",value:F,onChange:S=>Q(S.target.value),disabled:n}),E.jsx("button",{onClick:fe,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm self-start disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:n||!F.trim(),children:"Add Note"})]}),oe.length===0?E.jsx("p",{className:"text-gray-500 italic",children:"No special notes yet. Use the input above to jot down important points."}):E.jsx("ul",{className:"space-y-2",children:oe.map((S,A)=>E.jsxs("li",{className:"flex justify-between items-start bg-white p-2 rounded-md shadow-sm text-gray-800 text-base transform transition-transform duration-200 hover:scale-[1.02]",children:[E.jsx("span",{className:"flex-grow",children:S}),E.jsx("button",{onClick:()=>M(S),className:"text-red-500 hover:text-red-700 ml-2 flex-shrink-0",title:"Remove note",children:E.jsx("i",{className:"fas fa-times-circle"})})]},A))})]})]})]})]})})},tN=()=>{const{userId:s,db:e,loadingAuth:n}=Dn(),[r,o]=ae.useState(""),[u,f]=ae.useState(""),[m,p]=ae.useState(!1),[y,b]=ae.useState(!1),[R,x]=ae.useState(""),[P,G]=ae.useState(""),[K,F]=ae.useState([]),[Q,oe]=ae.useState({}),[re,he]=ae.useState(null),[le,fe]=ae.useState(!1),[M,S]=ae.useState(!1),[A,D]=ae.useState(""),N=async()=>{if(!s||!e||n){x("App is not ready. Please wait for authentication.");return}if(re===null){x("Please complete the quiz first to get an assessment.");return}p(!0),x(""),o("");try{const se={contents:[{role:"user",parts:[{text:`Based on a quiz about "${P}" where the user scored ${re} out of ${K.length}, provide a detailed assessment of their knowledge. Suggest specific areas for improvement and actionable steps based on this performance. Be encouraging but honest.`}]}]},ee=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDk89dLS6pY-_7Ad8mQu_6Yt1xYOYdVcQM",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();if(ee.candidates&&ee.candidates.length>0&&ee.candidates[0].content&&ee.candidates[0].content.parts&&ee.candidates[0].content.parts.length>0){const ie=ee.candidates[0].content.parts[0].text;o(ie);const pe=lt(),Ee=Wt(e,`artifacts/${pe}/users/${s}/assessments`);await wi(Ee,{topic:P,quizScore:re,totalQuestions:K.length,assessmentResult:ie,timestamp:It()})}else x("Failed to generate assessment. Please try again."),console.error("Gemini API response structure unexpected:",ee)}catch(Z){x("Error generating assessment: "+Z.message),console.error("Error calling Gemini API or Firestore:",Z)}finally{p(!1)}},C=async()=>{if(!s||!e||n){x("App is not ready. Please wait for authentication.");return}if(!P.trim()||y){x("Please generate and complete a quiz first, or enter a skill area for resources.");return}b(!0),x(""),f("");try{const se={contents:[{role:"user",parts:[{text:`Provide top 5 learning resources (e.g., courses, books, websites, tutorials) for "${P}". Format them clearly with names and types.`}]}]},ee=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDk89dLS6pY-_7Ad8mQu_6Yt1xYOYdVcQM",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();if(ee.candidates&&ee.candidates.length>0&&ee.candidates[0].content&&ee.candidates[0].content.parts&&ee.candidates[0].content.parts.length>0){const ie=ee.candidates[0].content.parts[0].text;f(ie)}else x("Failed to get learning resources. Please try again."),console.error("Gemini API response structure unexpected:",ee)}catch(Z){x("Error getting learning resources: "+Z.message),console.error("Error calling Gemini API:",Z)}finally{b(!1)}},I=async()=>{if(!s||!e||n){D("App is not ready. Please wait for authentication.");return}if(!P.trim()){D("Please enter a skill area for the quiz.");return}S(!0),D(""),F([]),oe({}),he(null),fe(!0),o(""),f("");try{const se={contents:[{role:"user",parts:[{text:`Generate a 5-question multiple-choice quiz about "${P}". For each question, provide:
1. The question text.
2. Four options (A, B, C, D).
3. The correct answer (A, B, C, or D).
Format each question block as follows:
Q: [Question Text]
A) [Option A]
B) [Option B]
C) [Option C]
D) [Option D]
Correct: [Correct Option Letter]
---
Example:
Q: What is the capital of France?
A) Berlin
B) London
C) Paris
D) Rome
Correct: C
---`}]}]},ee=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDk89dLS6pY-_7Ad8mQu_6Yt1xYOYdVcQM",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();if(ee.candidates&&ee.candidates.length>0&&ee.candidates[0].content&&ee.candidates[0].content.parts&&ee.candidates[0].content.parts.length>0){const ie=ee.candidates[0].content.parts[0].text,pe=de(ie);pe.length>0?(F(pe),D(`Quiz on "${P}" generated successfully!`)):(D("Could not parse quiz questions. Please try a different topic or re-generate."),fe(!1))}else D("Failed to generate quiz. Please try again."),console.error("Gemini API response structure unexpected:",ee),fe(!1)}catch(Z){D("Error generating quiz: "+Z.message),console.error("Error calling Gemini API:",Z),fe(!1)}finally{S(!1)}},de=Z=>{const se=[];return Z.split(/\n---\n/).filter(k=>k.trim().length>0).forEach(k=>{const $=k.split(`
`).map(Ee=>Ee.trim()).filter(Ee=>Ee.length>0);let ee="";const ie=[];let pe="";$.forEach(Ee=>{Ee.startsWith("Q:")?ee=Ee.substring(2).trim():Ee.match(/^[A-D]\)/)?ie.push(Ee.trim()):Ee.startsWith("Correct:")&&(pe=Ee.substring(8).trim())}),ee&&ie.length===4&&pe&&se.push({question:ee,options:ie,correct:pe})}),se},we=(Z,se)=>{oe(_e=>({..._e,[Z]:se}))},H=async()=>{if(!s||!e||n){D("App is not ready. Please wait for authentication.");return}let Z=0;K.forEach((k,$)=>{Q[$]===k.correct&&Z++}),he(Z),D(`You scored ${Z} out of ${K.length}!`);const se=lt(),_e=Wt(e,`artifacts/${se}/users/${s}/quizzes`);try{await wi(_e,{topic:P,questions:K,userAnswers:Q,score:Z,totalQuestions:K.length,timestamp:It()})}catch(k){console.error("Error saving quiz results to Firestore:",k),D("Quiz results saved successfully, but there was an error saving to history.")}};return E.jsx("div",{className:"p-6 bg-gradient-to-br from-yellow-50 to-red-50 rounded-lg shadow-lg max-w-4xl mx-auto my-8 animate-fade-in",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[" ",E.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"AI Learning Path & Assessment"}),E.jsxs("div",{className:"mt-4 p-6 bg-blue-50 rounded-lg shadow-lg border border-blue-200 transform transition-transform duration-300 hover:scale-[1.01]",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Test Your Knowledge with a Quiz!"}),E.jsxs("div",{className:"mb-4",children:[E.jsx("label",{htmlFor:"assessmentSkillArea",className:"block text-gray-700 text-base font-medium mb-2",children:"Enter a skill area for your quiz and assessment:"}),E.jsx("input",{type:"text",id:"assessmentSkillArea",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-blue-500 text-gray-800",value:P,onChange:Z=>G(Z.target.value),placeholder:"e.g., 'React Hooks' or 'Calculus Basics'",disabled:M||n})]}),E.jsx("button",{onClick:I,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:M||n||!P.trim(),children:M?"Generating Quiz...":"Generate New Quiz"}),A&&E.jsx("p",{className:"mt-4 text-red-600 text-center font-medium",children:A}),le&&K.length>0&&E.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg shadow-inner animate-fade-in",children:[E.jsxs("h4",{className:"text-lg font-semibold mb-4",children:['Quiz on "',P,'"']}),E.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),H()},className:"space-y-4",children:[K.map((Z,se)=>E.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[E.jsxs("p",{className:"font-medium text-gray-800 mb-2",children:["Q",se+1,": ",Z.question]}),E.jsx("div",{className:"flex flex-col space-y-1",children:Z.options.map((_e,k)=>E.jsxs("label",{className:"inline-flex items-center text-gray-700 cursor-pointer",children:[E.jsx("input",{type:"radio",name:`question-${se}`,value:_e.charAt(0),checked:Q[se]===_e.charAt(0),onChange:()=>we(se,_e.charAt(0)),className:"form-radio h-4 w-4 text-blue-600"}),E.jsx("span",{className:"ml-2",children:_e})]},k))}),re!==null&&E.jsxs("p",{className:`mt-2 text-sm font-semibold ${Q[se]===Z.correct?"text-green-600":"text-red-600"}`,children:["Correct Answer: ",Z.correct]})]},se)),E.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed mt-4 transform hover:scale-105",disabled:n||Object.keys(Q).length!==K.length||re!==null,children:"Submit Quiz"})]}),re!==null&&E.jsx("div",{className:"mt-6 p-4 text-center bg-blue-100 border-l-4 border-blue-500 text-blue-800 rounded-lg",children:E.jsxs("h4",{className:"text-xl font-bold",children:["Your Score: ",re," / ",K.length]})})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200 transform transition-transform duration-300 hover:scale-[1.01]",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Knowledge Assessment"}),E.jsxs("p",{className:"text-gray-700 text-base mb-4",children:['Get an assessment of your knowledge based on your recent quiz performance in "',P,'".']}),E.jsx("button",{onClick:N,className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:m||n||re===null||!P.trim(),children:m?"Assessing...":"Get Assessment Based on Quiz"}),r&&E.jsxs("div",{className:"mt-4 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-lg animate-fade-in",children:[E.jsx("h4",{className:"font-semibold mb-2",children:"Assessment Result:"}),E.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:r})]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200 transform transition-transform duration-300 hover:scale-[1.01]",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Learning Resources"}),E.jsxs("p",{className:"text-gray-700 text-base mb-4",children:['Discover curated learning resources for "',P,'".']}),E.jsx("button",{onClick:C,className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:y||n||!P.trim(),children:y?"Finding Resources...":"Get Learning Resources for Skill"}),u&&E.jsxs("div",{className:"mt-4 p-3 bg-orange-100 border-l-4 border-orange-500 text-orange-800 rounded-lg animate-fade-in",children:[E.jsx("h4",{className:"font-semibold mb-2",children:"Suggested Resources:"}),E.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:u})]})]})]}),R&&E.jsx("p",{className:"mt-4 text-red-600 text-center font-medium",children:R})]})})},nN=()=>{const{db:s,userId:e,loadingAuth:n,userProfile:r,setUserProfile:o}=Dn(),[u,f]=ae.useState([]),[m,p]=ae.useState(""),[y,b]=ae.useState(!0),R=ae.useRef(null),[x,P]=ae.useState(""),[G,K]=ae.useState(!1),[F,Q]=ae.useState(null),oe="general",re=lt(),he=Wt(s,`artifacts/${re}/public/data/groupChats/${oe}/messages`);ae.useEffect(()=>{if(!s||!e||n||!r){console.log("GroupChat: DB or userId not ready, or auth loading.");return}const C=$r(he,lo("timestamp"),Tg(50)),I=sr(C,de=>{var Z;const we=de.docs.map(se=>({id:se.id,...se.data()})),H=(Z=r==null?void 0:r.groupChatClearedAt)==null?void 0:Z.toDate();f(H?we.filter(se=>{var _e;return((_e=se.timestamp)==null?void 0:_e.toDate())>H}):we),b(!1)},de=>{console.error("Error fetching group chat messages:",de),P("Failed to load group chat messages."),b(!1)});return()=>I()},[s,e,n,r==null?void 0:r.groupChatClearedAt]),ae.useEffect(()=>{R.current&&(R.current.scrollTop=R.current.scrollHeight)},[u]);const le=async()=>{if(!m.trim()||!e||n||y||!r){console.log("GroupChat: Cannot send message. Input invalid, loading, or app not ready.");return}const C=r.name||`User_${e.substring(0,8)}`;P("");try{await wi(he,{text:m.trim(),userId:e,userName:C,timestamp:It()}),p("")}catch(I){P("Error sending message: "+I.message),console.error("Error sending group chat message:",I)}},fe=async()=>{if(!s||!e||n){P("App is not ready. Please wait for authentication.");return}P(""),K(!0)},M=async()=>{if(K(!1),P("Clearing chat for your view..."),!s||!e||!r){P("App is not ready. Please wait.");return}const C=Pt(s,`artifacts/${lt()}/users/${e}/profile/userProfile`);try{await fn(C,{groupChatClearedAt:It()}),o(I=>({...I,groupChatClearedAt:new Date})),P("Chat cleared for your view successfully!"),setTimeout(()=>P(""),3e3)}catch(I){P("Error clearing chat for your view: "+I.message),console.error("Error updating group chat cleared timestamp:",I)}},S=()=>{K(!1),P("")},A=C=>{Q(C)},D=async()=>{if(!F||!s||n)return;const C=lt(),I=Pt(s,`artifacts/${C}/public/data/groupChats/${oe}/messages`,F);try{await Sg(I),P("Message deleted successfully!"),setTimeout(()=>P(""),3e3)}catch(de){P("Error deleting message: "+de.message),console.error("Error deleting message:",de)}finally{Q(null)}},N=()=>{Q(null)};return E.jsx("div",{className:"mt-8 p-6 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-lg shadow-lg max-w-4xl mx-auto animate-fade-in",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[" ",E.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"General Group Chat"}),x&&E.jsx("p",{className:"text-red-600 text-center mb-4",children:x}),G&&E.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center transform transition-transform duration-300 animate-bounce-in-fade-out",children:[E.jsx("p",{className:"mb-4 text-lg font-semibold",children:"Are you sure you want to clear all chat messages for *your view*?"}),E.jsxs("div",{className:"flex justify-center space-x-4",children:[E.jsx("button",{onClick:M,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transform hover:scale-105 transition-transform duration-200",children:"Yes, Clear My View"}),E.jsx("button",{onClick:S,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transform hover:scale-105 transition-transform duration-200",children:"Cancel"})]})]})}),F&&E.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center transform transition-transform duration-300 animate-bounce-in-fade-out",children:[E.jsx("p",{className:"mb-4 text-lg font-semibold",children:"Are you sure you want to delete this message?"}),E.jsxs("div",{className:"flex justify-center space-x-4",children:[E.jsx("button",{onClick:D,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transform hover:scale-105 transition-transform duration-200",children:"Yes, Delete"}),E.jsx("button",{onClick:N,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transform hover:scale-105 transition-transform duration-200",children:"Cancel"})]})]})}),E.jsx("div",{ref:R,className:"bg-white p-4 rounded-lg border border-gray-200 h-80 overflow-y-auto flex flex-col space-y-3 mb-4 custom-scrollbar",children:y?E.jsx("p",{className:"text-center text-gray-500",children:"Loading chat..."}):u.length===0?E.jsx("p",{className:"text-center text-gray-500 italic",children:"No messages yet. Start the conversation!"}):u.map((C,I)=>{var de;return E.jsx("div",{className:`flex ${C.userId===e?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`p-3 rounded-lg max-w-[75%] break-words relative group ${C.userId===e?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[E.jsx("p",{className:"font-semibold text-sm mb-1",children:C.userId===e?"You":C.userName||`User ${C.userId.substring(0,8)}...`}),E.jsx("p",{className:"text-base",children:C.text}),E.jsx("span",{className:"text-xs opacity-75 mt-1 block",children:(de=C.timestamp)!=null&&de.toDate?C.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"..."}),C.userId===e&&E.jsx("button",{onClick:()=>A(C.id),className:"absolute -right-8 top-1/2 -translate-y-1/2 p-1 text-red-300 hover:text-red-700 transition-colors opacity-0 group-hover:opacity-100",title:"Delete message",children:E.jsx("i",{className:"fas fa-trash"})})]})},C.id||I)})}),E.jsxs("div",{className:"flex",children:[E.jsx("input",{type:"text",className:"flex-grow p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",placeholder:"Type your group message...",value:m,onChange:C=>p(C.target.value),onKeyPress:C=>{C.key==="Enter"&&le()},disabled:n||y}),E.jsx("button",{onClick:le,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-r-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:n||y||!m.trim(),children:E.jsx("i",{className:"fas fa-paper-plane"})})]}),E.jsx("button",{onClick:fe,className:"w-full mt-4 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:n||y,children:"Clear All Chat Messages (My View)"})]})})},iN=({partnerUserId:s,partnerUserName:e,onClose:n,onMarkRead:r,onSendMessage:o})=>{const{db:u,userId:f,userProfile:m,loadingAuth:p}=Dn(),[y,b]=ae.useState([]),[R,x]=ae.useState(""),[P,G]=ae.useState(!0),K=ae.useRef(null),[F,Q]=ae.useState(""),[oe,re]=ae.useState(null),he=(A,D)=>A<D?`${A}_${D}`:`${D}_${A}`;ae.useEffect(()=>{if(!u||!f||!s||p){Q("Chat not ready. Please wait for authentication or select a valid user.");return}const A=he(f,s),D=lt(),N=Wt(u,`artifacts/${D}/privateChats/${A}/messages`),C=$r(N,lo("timestamp"),Tg(50));G(!0);const I=sr(C,de=>{const we=de.docs.map(H=>({id:H.id,...H.data()}));b(we),G(!1),Q(""),r(s,!1)},de=>{console.error("Error fetching private chat messages:",de),Q("Failed to load private chat messages."),G(!1)});return r(s,!1),()=>I()},[u,f,s,p,r]),ae.useEffect(()=>{K.current&&(K.current.scrollTop=K.current.scrollHeight)},[y]);const le=async()=>{if(!R.trim()||!f||!s||p||P||!m){Q("Cannot send message. Input invalid or chat not ready.");return}Q("");const A=he(f,s),D=lt(),N=Wt(u,`artifacts/${D}/privateChats/${A}/messages`),C=m.name||`User_${f.substring(0,8)}`;try{await wi(N,{text:R.trim(),senderId:f,senderName:C,recipientId:s,timestamp:It()}),x(""),r(s,!1),o(s,f)}catch(I){Q("Error sending message: "+I.message),console.error("Error sending private chat message:",I)}},fe=A=>{re(A)},M=async()=>{if(!oe||!u||p)return;const A=he(f,s),D=lt(),N=Pt(u,`artifacts/${D}/privateChats/${A}/messages`,oe);try{await Sg(N),Q("Message deleted successfully!"),setTimeout(()=>Q(""),3e3)}catch(C){Q("Error deleting message: "+C.message),console.error("Error deleting message:",C)}finally{re(null)}},S=()=>{re(null)};return E.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 animate-fade-in",children:E.jsx("div",{className:"bg-gradient-to-br from-green-100 to-white p-6 rounded-lg shadow-xl w-full max-w-md mx-4 my-8 flex flex-col h-[80vh] transform transition-transform duration-300 hover:scale-[1.01]",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg flex flex-col h-full",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-gray-200 flex-shrink-0",children:[E.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Chat with ",e]}),E.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),F&&E.jsx("p",{className:"text-red-600 text-center mb-4",children:F}),oe&&E.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center transform transition-transform duration-300 animate-bounce-in-fade-out",children:[E.jsx("p",{className:"mb-4 text-lg font-semibold",children:"Are you sure you want to delete this message?"}),E.jsxs("div",{className:"flex justify-center space-x-4",children:[E.jsx("button",{onClick:M,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transform hover:scale-105 transition-transform duration-200",children:"Yes, Delete"}),E.jsx("button",{onClick:S,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transform hover:scale-105 transition-transform duration-200",children:"Cancel"})]})]})}),E.jsx("div",{ref:K,className:"bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-y-auto flex flex-col space-y-3 custom-scrollbar flex-grow mb-4",children:P?E.jsx("p",{className:"text-center text-gray-500",children:"Loading messages..."}):y.length===0?E.jsx("p",{className:"text-center text-gray-500 italic",children:"No messages yet. Start your private conversation!"}):y.map((A,D)=>{var N;return E.jsx("div",{className:`flex ${A.senderId===f?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`p-3 rounded-lg max-w-[75%] break-words relative group ${A.senderId===f?"bg-green-500 text-white rounded-br-none":"bg-blue-200 text-gray-800 rounded-bl-none"}`,children:[E.jsx("p",{className:"font-semibold text-sm mb-1",children:A.senderId===f?"You":A.senderName||`User ${A.senderId.substring(0,8)}...`}),E.jsx("p",{className:"text-base",children:A.text}),E.jsx("span",{className:"text-xs opacity-75 mt-1 block",children:(N=A.timestamp)!=null&&N.toDate?A.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"..."}),A.senderId===f&&E.jsx("button",{onClick:()=>fe(A.id),className:"absolute -right-8 top-1/2 -translate-y-1/2 p-1 text-red-300 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",title:"Delete message",children:E.jsx("i",{className:"fas fa-trash"})})]})},A.id||D)})}),E.jsxs("div",{className:"flex flex-shrink-0",children:[E.jsx("input",{type:"text",className:"flex-grow p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",placeholder:"Type your message...",value:R,onChange:A=>x(A.target.value),onKeyPress:A=>{A.key==="Enter"&&le()},disabled:P||p}),E.jsx("button",{onClick:le,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-r-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:P||p||!R.trim(),children:E.jsx("i",{className:"fas fa-paper-plane"})})]})]})})})},sN=({setShowPrivateChat:s,setPrivateChatWithUserId:e,setPrivateChatWithUserName:n})=>{const{db:r,userId:o,loadingAuth:u,userProfile:f}=Dn(),[m,p]=ae.useState([]),[y,b]=ae.useState({}),R=lt(),x=Wt(r,`artifacts/${R}/public/data/userPresence`);ae.useEffect(()=>{if(!r||!o||u||!f)return;const Q=Pt(x,o),oe=f.name||`User_${o.substring(0,8)}`,re=async()=>{try{await zl(Q,{userName:oe,lastActive:It(),isOnline:!0},{merge:!0})}catch(A){console.error("Error updating user presence:",A)}};re();const he=setInterval(re,1e4),le=$r(x),fe=sr(le,A=>{const D=A.docs.map(N=>({id:N.id,...N.data()})).sort((N,C)=>(N.userName||"").localeCompare(C.userName||""));p(D)},A=>{console.error("Error fetching all user presence:",A)}),M=Wt(r,`artifacts/${R}/users/${o}/unreadPrivateChats`),S=sr(M,A=>{const D={};A.docs.forEach(N=>{D[N.id]=N.data().hasUnread}),b(D)},A=>{console.error("Error fetching unread status:",A)});return()=>{clearInterval(he),fe(),S(),r&&o&&fn(Pt(x,o),{isOnline:!1}).catch(A=>console.error("Error setting user offline on unmount:",A))}},[r,o,u,f]);const P=Q=>{if(Q.id===o){console.log("Cannot open private chat with self.");return}e(Q.id),n(Q.userName),s(!0),console.log(`Attempting to open private chat with: ${Q.userName} (ID: ${Q.id})`)},G=Date.now(),K=m.filter(Q=>{var oe;return Q.id!==o&&Q.isOnline&&G-((oe=Q.lastActive)!=null&&oe.toDate?Q.lastActive.toDate().getTime():0)<15e3}),F=m.filter(Q=>{var oe;return Q.id!==o&&(!Q.isOnline||G-((oe=Q.lastActive)!=null&&oe.toDate?Q.lastActive.toDate().getTime():0)>=15e3)});return E.jsx("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 p-4 rounded-lg shadow-md border border-gray-200 mt-6 animate-fade-in transform transition-transform duration-300 hover:scale-[1.01]",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[E.jsx("div",{className:"mb-4 text-center",children:E.jsxs("p",{className:"text-md font-semibold text-gray-800",children:["Current User: ",E.jsx("span",{className:"text-blue-600",children:(f==null?void 0:f.name)||"Loading..."})]})}),E.jsxs("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:["Active Users (",K.length,")"]}),K.length===0?E.jsx("p",{className:"text-gray-500 italic text-sm",children:"No other users currently active."}):E.jsxs("ul",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar",children:[" ",K.map(Q=>E.jsxs("li",{className:"flex items-center space-x-2 text-gray-800 cursor-pointer hover:bg-gray-50 p-2 rounded-md transition-colors",onClick:()=>P(Q),children:[E.jsxs("span",{className:"relative flex h-2 w-2",children:[E.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),E.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),E.jsx("span",{className:"font-medium text-sm",children:Q.userName}),y[Q.id]&&E.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full ml-2 animate-bounce"})]},Q.id))]}),E.jsxs("h4",{className:"text-lg font-semibold text-gray-700 mt-6 mb-3",children:["Inactive Users (",F.length,")"]}),F.length===0?E.jsx("p",{className:"text-gray-500 italic text-sm",children:"No inactive users found."}):E.jsxs("ul",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar",children:[" ",F.map(Q=>E.jsxs("li",{className:"flex items-center space-x-2 text-gray-800 cursor-pointer hover:bg-gray-50 p-2 rounded-md transition-colors",onClick:()=>P(Q),children:[E.jsx("span",{className:"relative flex h-2 w-2",children:E.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-gray-400"})}),E.jsx("span",{className:"font-medium text-sm",children:Q.userName}),y[Q.id]&&E.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full ml-2 animate-bounce"})]},Q.id))]})]})})},rN=({setShowPrivateChat:s,setPrivateChatWithUserId:e,setPrivateChatWithUserName:n})=>{const{db:r,userId:o,loadingAuth:u,userProfile:f}=Dn(),[m,p]=ae.useState([]),[y,b]=ae.useState(""),[R,x]=ae.useState(!0),[P,G]=ae.useState(!1),K=ae.useRef(null),[F,Q]=ae.useState(""),[oe,re]=ae.useState({}),[he,le]=ae.useState({}),[fe,M]=ae.useState(null),[S,A]=ae.useState(""),[D,N]=ae.useState(!1),[C,I]=ae.useState(null),[de,we]=ae.useState(null);ae.useEffect(()=>{if(!r||!o||u){console.log("CommunityForum: DB or userId not ready, or auth loading.");return}const ue=lt(),Ne=Wt(r,`artifacts/${ue}/public/data/forumPosts`),Pe=$r(Ne,lo("timestamp","desc")),qe=sr(Pe,async De=>{const Ct=[],ls=De.docs.map(async Nt=>{const kn={id:Nt.id,...Nt.data()},lr=Wt(r,`artifacts/${ue}/public/data/forumPosts/${Nt.id}/comments`),us=$r(lr,lo("timestamp")),vo=(await A0(us)).docs.map(Si=>({id:Si.id,...Si.data()}));return{...kn,comments:vo}});Ct.push(...await Promise.all(ls)),p(Ct),x(!1)},De=>{console.error("Error fetching forum posts:",De),Q("Failed to load forum posts."),x(!1)});return()=>qe()},[r,o,u]),ae.useEffect(()=>{K.current&&(K.current.scrollTop=0)},[m]);const H=ue=>{const Ne=ue.target.files[0];if(Ne){const Pe=new FileReader;Pe.onloadend=()=>{we(Pe.result)},Pe.onerror=qe=>{console.error("Error reading file:",qe),we(null)},Pe.readAsDataURL(Ne)}else we(null)},Z=()=>{we(null),document.getElementById("newPostImageUpload").value=""},se=async()=>{if(!y.trim()&&!de||P||!o||!r||u||!f){console.log("CommunityForum: Cannot submit post. Input invalid, submitting, or app not ready."),Q("Post content or image is required.");return}G(!0),Q("");const ue=lt(),Ne=Wt(r,`artifacts/${ue}/public/data/forumPosts`),Pe=f.name||`User_${o.substring(0,8)}`;try{await wi(Ne,{content:y.trim(),userId:o,userName:Pe,timestamp:It(),likes:[],commentsCount:0,imageUrl:de}),b(""),we(null),document.getElementById("newPostImageUpload").value="",Q("Post submitted successfully!"),setTimeout(()=>Q(""),3e3)}catch(qe){Q("Error submitting post: "+qe.message),console.error("Error submitting forum post:",qe)}finally{G(!1)}},_e=(ue,Ne)=>{if(Ne!==o){Q("You can only delete your own posts.");return}I(ue),N(!0)},k=async()=>{if(N(!1),!C)return;if(!r||u){Q("App is not ready. Please wait.");return}const ue=lt(),Ne=Pt(r,`artifacts/${ue}/public/data/forumPosts`,C);try{const Pe=Wt(Ne,"comments"),qe=await A0(Pe),De=YC(r);qe.docs.forEach(Ct=>{De.delete(Ct.ref)}),await De.commit(),await Sg(Ne),Q("Post deleted successfully!"),setTimeout(()=>Q(""),3e3)}catch(Pe){Q("Error deleting post: "+Pe.message),console.error("Error deleting forum post:",Pe)}finally{I(null)}},$=()=>{N(!1),I(null),Q("")},ee=async(ue,Ne)=>{if(!o||!r||u){Q("App is not ready. Please wait for authentication.");return}const Pe=lt(),qe=Pt(r,`artifacts/${Pe}/public/data/forumPosts`,ue);try{let De;(Ne||[]).includes(o)?De=(Ne||[]).filter(Ct=>Ct!==o):De=[...Ne||[],o],await fn(qe,{likes:De})}catch(De){Q("Error liking post: "+De.message),console.error("Error updating likes:",De)}},ie=(ue,Ne)=>{re(Pe=>({...Pe,[ue]:Ne}))},pe=(ue,Ne)=>{const Pe=Ne.target.files[0];if(Pe){const qe=new FileReader;qe.onloadend=()=>{le(De=>({...De,[ue]:qe.result}))},qe.onerror=De=>{console.error("Error reading comment image file:",De),le(Ct=>({...Ct,[ue]:null}))},qe.readAsDataURL(Pe)}else le(qe=>({...qe,[ue]:null}))},Ee=ue=>{le(Pe=>({...Pe,[ue]:null}));const Ne=document.getElementById(`commentImageUpload-${ue}`);Ne&&(Ne.value="")},Se=async ue=>{var Nt;const Ne=oe[ue],Pe=he[ue];if(!(Ne!=null&&Ne.trim())&&!Pe||!o||!r||u||!f){Q("Please enter a comment or select an image to add.");return}const qe=lt(),De=Wt(r,`artifacts/${qe}/public/data/forumPosts/${ue}/comments`),Ct=Pt(r,`artifacts/${qe}/public/data/forumPosts`,ue),ls=f.name||`User_${o.substring(0,8)}`;try{await wi(De,{text:(Ne==null?void 0:Ne.trim())||"",userId:o,userName:ls,timestamp:It(),imageUrl:Pe||null}),await fn(Ct,{commentsCount:(((Nt=m.find(kn=>kn.id===ue))==null?void 0:Nt.commentsCount)||0)+1}),re(kn=>({...kn,[ue]:""})),Ee(ue),Q("Comment added!"),setTimeout(()=>Q(""),3e3)}catch(kn){Q("Error adding comment: "+kn.message),console.error("Error adding comment:",kn)}},bt=ue=>{M(ue.id),A(ue.content)},et=async ue=>{if(!S.trim()||!o||!r||u){Q("Edited content cannot be empty.");return}Q("");const Ne=lt(),Pe=Pt(r,`artifacts/${Ne}/public/data/forumPosts`,ue);try{await fn(Pe,{content:S.trim(),editedAt:It()}),M(null),A(""),Q("Post updated successfully!"),setTimeout(()=>Q(""),3e3)}catch(qe){Q("Error updating post: "+qe.message),console.error("Error updating post:",qe)}},On=()=>{M(null),A("")};return E.jsx("div",{className:"p-6 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg shadow-lg max-w-4xl mx-auto my-8 animate-fade-in",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[" ",E.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Community Forum"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsx("div",{className:"md:col-span-2",children:E.jsx(nN,{})}),E.jsx("div",{className:"md:col-span-1",children:E.jsx(sN,{setShowPrivateChat:s,setPrivateChatWithUserId:e,setPrivateChatWithUserName:n})})]}),E.jsxs("div",{className:"mt-8 mb-6 border p-4 rounded-lg bg-gray-50 transform transition-transform duration-300 hover:scale-[1.01]",children:[E.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-700",children:"Create a New Forum Post:"}),E.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-gray-800",rows:"4",placeholder:"Share your skill-related insights, ask questions, or help others...",value:y,onChange:ue=>b(ue.target.value),disabled:P||u}),de&&E.jsxs("div",{className:"mt-3 mb-3 p-3 bg-blue-100 rounded-lg flex items-center justify-between shadow-inner",children:[E.jsx("img",{src:de,alt:"Post image preview",className:"h-16 w-16 object-cover rounded-md mr-3"}),E.jsx("span",{className:"text-sm text-gray-700 truncate",children:"Image selected"}),E.jsx("button",{onClick:Z,className:"ml-3 text-red-500 hover:text-red-700",children:E.jsx("i",{className:"fas fa-times-circle"})})]}),E.jsxs("div",{className:"flex justify-between items-center mt-3",children:[E.jsxs("label",{htmlFor:"newPostImageUpload",className:"flex items-center space-x-2 bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg cursor-pointer transition duration-300 ease-in-out",title:"Upload Image",children:[E.jsx("i",{className:"fas fa-image"}),E.jsx("span",{children:"Add Image"}),E.jsx("input",{type:"file",id:"newPostImageUpload",accept:"image/*",className:"hidden",onChange:H,disabled:P||u})]}),E.jsx("button",{onClick:se,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-5 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105",disabled:P||u||!y.trim()&&!de,children:P?"Posting...":"Submit Post"})]}),F&&E.jsx("p",{className:"mt-2 text-red-600 text-center font-medium",children:F})]}),E.jsx("h3",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Recent Forum Posts:"}),E.jsx("div",{ref:K,className:"bg-gray-100 p-4 rounded-lg border border-gray-200 h-96 overflow-y-auto custom-scrollbar",children:R?E.jsx("p",{className:"text-center text-gray-500",children:"Loading posts..."}):m.length===0?E.jsx("p",{className:"text-center text-gray-500 italic",children:"No posts yet. Be the first to share!"}):E.jsx("div",{className:"space-y-4",children:m.map(ue=>{var Ne,Pe,qe;return E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 relative transform transition-transform duration-300 hover:scale-[1.01]",children:[fe===ue.id?E.jsxs("div",{children:[E.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-gray-800 mb-2",rows:"4",value:S,onChange:De=>A(De.target.value)}),E.jsxs("div",{className:"flex justify-end space-x-2",children:[E.jsx("button",{onClick:()=>et(ue.id),className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg text-sm disabled:opacity-50 transform hover:scale-105",disabled:!S.trim(),children:"Save"}),E.jsx("button",{onClick:On,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg text-sm transform hover:scale-105",children:"Cancel"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"text-gray-800 text-base leading-relaxed mb-2",children:ue.content}),ue.imageUrl&&E.jsx("img",{src:ue.imageUrl,alt:"Post attachment",className:"mt-2 mb-2 rounded-md max-w-full h-auto"})]}),E.jsxs("div",{className:"text-gray-500 text-xs flex justify-between items-center mt-2",children:[E.jsxs("span",{children:["Posted by ",ue.userId===o?"You":ue.userName||`User ID: ${ue.userId.substring(0,8)}...`," ","on ",(Ne=ue.timestamp)!=null&&Ne.toDate?ue.timestamp.toDate().toLocaleString():"...",ue.editedAt&&E.jsxs("span",{className:"ml-2 italic",children:["(Edited at ",ue.editedAt.toDate().toLocaleString(),")"]})]}),ue.userId===o&&E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("button",{onClick:()=>bt(ue),className:"text-blue-500 hover:text-blue-700 p-1 rounded-full hover:bg-blue-100 transition duration-200",title:"Edit your post",children:E.jsx("i",{className:"fas fa-edit"})}),E.jsx("button",{onClick:()=>_e(ue.id,ue.userId),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-100 transition duration-200",title:"Delete your post",children:E.jsx("i",{className:"fas fa-trash"})})]})]}),E.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center space-x-4",children:[E.jsxs("button",{onClick:()=>ee(ue.id,ue.likes||[]),className:`flex items-center space-x-1 p-2 rounded-full transition duration-200
                                                        ${(ue.likes||[]).includes(o)?"text-red-500 bg-red-100":"text-gray-500 hover:text-red-500 hover:bg-gray-100"}`,title:(ue.likes||[]).includes(o)?"Unlike this post":"Like this post",disabled:u,children:[E.jsx("i",{className:`fas fa-heart ${(ue.likes||[]).includes(o)?"text-red-500":""}`}),E.jsx("span",{className:"text-sm font-semibold",children:((Pe=ue.likes)==null?void 0:Pe.length)||0})]}),E.jsxs("span",{className:"text-gray-500 text-sm flex items-center",children:[E.jsx("i",{className:"fas fa-comment ml-3 mr-1"}),E.jsx("span",{className:"font-semibold",children:ue.commentsCount||0})," Comments"]})]}),E.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[E.jsx("h4",{className:"text-md font-semibold text-gray-700 mb-2",children:"Comments:"}),ue.comments&&ue.comments.length>0?E.jsx("ul",{className:"space-y-2",children:ue.comments.map(De=>{var Ct;return E.jsxs("li",{className:"bg-gray-50 p-2 rounded-lg text-sm border border-gray-200",children:[E.jsx("p",{className:"text-gray-800",children:De.text}),De.imageUrl&&E.jsx("img",{src:De.imageUrl,alt:"Comment attachment",className:"mt-2 rounded-md max-w-full h-auto"}),E.jsxs("span",{className:"text-gray-500 text-xs block mt-1",children:[De.userName||`User ${De.userId.substring(0,8)}...`," ","at ",(Ct=De.timestamp)!=null&&Ct.toDate?De.timestamp.toDate().toLocaleString():"..."]})]},De.id)})}):E.jsx("p",{className:"text-gray-500 text-sm italic",children:"No comments yet."}),E.jsxs("div",{className:"flex flex-col mt-3 gap-2",children:[he[ue.id]&&E.jsxs("div",{className:"mb-2 p-2 bg-blue-100 rounded-lg flex items-center justify-between shadow-inner",children:[E.jsx("img",{src:he[ue.id],alt:"Comment image preview",className:"h-12 w-12 object-cover rounded-md mr-2"}),E.jsx("span",{className:"text-xs text-gray-700 truncate",children:"Image selected"}),E.jsx("button",{onClick:()=>Ee(ue.id),className:"ml-2 text-red-500 hover:text-red-700",children:E.jsx("i",{className:"fas fa-times-circle"})})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",className:"flex-grow p-2 border border-gray-300 rounded-l-lg text-sm focus:ring-1 focus:ring-blue-500",placeholder:"Add a comment...",value:oe[ue.id]||"",onChange:De=>ie(ue.id,De.target.value),onKeyPress:De=>{De.key==="Enter"&&Se(ue.id)},disabled:u}),E.jsxs("label",{htmlFor:`commentImageUpload-${ue.id}`,className:"p-2 bg-gray-400 hover:bg-gray-500 text-white rounded-lg cursor-pointer transition duration-300 ease-in-out flex-shrink-0",title:"Upload Image for Comment",children:[E.jsx("i",{className:"fas fa-image"}),E.jsx("input",{type:"file",id:`commentImageUpload-${ue.id}`,accept:"image/*",className:"hidden",onChange:De=>pe(ue.id,De),disabled:u})]}),E.jsx("button",{onClick:()=>Se(ue.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 flex-shrink-0",disabled:u||!((qe=oe[ue.id])!=null&&qe.trim())&&!he[ue.id],children:"Comment"})]})]})]})]},ue.id)})})}),D&&E.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center transform transition-transform duration-300 animate-bounce-in-fade-out",children:[E.jsx("p",{className:"mb-4 text-lg font-semibold",children:"Are you sure you want to delete this post and all its comments?"}),E.jsxs("div",{className:"flex justify-center space-x-4",children:[E.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transform hover:scale-105",children:"Yes, Delete"}),E.jsx("button",{onClick:$,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transform hover:scale-105",children:"Cancel"})]})]})})]})})},aN=({currentPage:s,setCurrentPage:e})=>{const{signOutUser:n}=Dn(),r=[{name:"Home",component:"Home",icon:"fas fa-home"},{name:"AI Chatbot",component:"Chatbot",icon:"fas fa-comments"},{name:"Skill Library",component:"SkillLibrary",icon:"fas fa-book"},{name:"AI Assessment",component:"PersonalizationAI",icon:"fas fa-brain"},{name:"Community Forum",component:"CommunityForum",icon:"fas fa-users"}];return E.jsx("nav",{className:"bg-gray-800 p-4 shadow-xl fixed w-full z-10 top-0",children:E.jsxs("div",{className:"container mx-auto flex flex-wrap justify-center items-center",children:[r.map(o=>E.jsxs("button",{onClick:()=>e(o.component),className:`
                            px-4 py-2 mx-1 sm:mx-2 rounded-lg text-lg font-medium transition duration-300 ease-in-out
                            flex items-center space-x-2
                            ${s===o.component?"bg-blue-600 text-white shadow-md":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                            transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500
                            mb-2 sm:mb-0 text-sm sm:text-base
                        `,children:[E.jsx("i",{className:o.icon}),E.jsx("span",{children:o.name})]},o.name)),E.jsxs("button",{onClick:n,className:`px-4 py-2 mx-1 sm:mx-2 rounded-lg text-lg font-medium transition duration-300 ease-in-out\r
                                bg-red-600 text-white hover:bg-red-700 shadow-md transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500\r
                                mb-2 sm:mb-0 text-sm sm:text-base`,children:[E.jsx("i",{className:"fas fa-sign-out-alt"}),E.jsx("span",{children:"Sign Out"})]})]})})},oN=({setCurrentPage:s})=>{const{userProfile:e,authReady:n}=Dn(),[r,o]=ae.useState(""),[u,f]=ae.useState(!1),m=ae.useRef(null),p=ae.useRef(!1),y=["Keep up the great work!","What new skill will you master today?","Every step forward is progress!","Ready for your daily dose of wisdom?","The journey of a thousand miles begins with a single step.","Learning is a treasure that will follow its owner everywhere.","Don't stop until you're proud!","The best way to predict the future is to create it."];ae.useEffect(()=>{if(m.current&&clearTimeout(m.current),n&&e&&e.name){let R;if(!p.current)R=`Welcome back, ${e.name}! Let's learn something new today!`,p.current=!0;else{const x=Math.floor(Math.random()*y.length);R=y[x]}o(R),f(!0),m.current=setTimeout(()=>{f(!1)},5e3)}else n&&!e&&(f(!1),o(""),p.current=!1);return()=>{m.current&&clearTimeout(m.current)}},[e,n,s]);const b=[{name:"AI Companion",description:"Chat and learn interactively with our AI.",icon:"fas fa-comments",page:"Chatbot",color:"text-green-500"},{name:"Skill Hub",description:"Curate and manage your learning and teaching skills.",icon:"fas fa-book",page:"SkillLibrary",color:"text-orange-500"},{name:"AI Assessment",description:"Gauge your knowledge and find personalized learning paths.",icon:"fas fa-brain",page:"PersonalizationAI",color:"text-red-500"},{name:"Community Connect",description:"Engage with fellow learners and share insights in forum and chat.",icon:"fas fa-users",page:"CommunityForum",color:"text-indigo-500"}];return E.jsx("div",{className:"p-8 bg-gradient-to-br from-blue-100 to-white rounded-lg shadow-2xl max-w-5xl mx-auto my-12 transform transition-transform duration-300 pt-20 animate-fade-in",children:E.jsxs("div",{className:"bg-white bg-opacity-90 p-4 rounded-lg",children:[" ",E.jsx("h2",{className:"text-5xl font-extrabold text-gray-900 mb-6 leading-tight text-center",children:"Empower Your Learning Journey!"}),E.jsx("p",{className:"text-xl text-gray-700 mb-10 max-w-3xl mx-auto text-center",children:"Your all-in-one platform for mastering new skills. Discover, learn, track, and connect."}),E.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-8 mb-10",children:[E.jsxs("div",{className:"w-full md:w-1/2 lg:w-1/3 xl:w-1/4 flex-shrink-0 text-center order-1 md:order-2 relative",children:[" ",E.jsx("div",{className:"w-full h-48 md:h-64 lg:h-80 bg-gray-200 rounded-lg overflow-hidden shadow-xl mx-auto relative flex items-center justify-center",children:E.jsx("spline-viewer",{url:"https://prod.spline.design/kcvVd4Zji1B81WHr/scene.splinecode",className:"w-full h-full"})}),E.jsx("p",{className:"mt-3 text-md text-gray-700",children:"Explore the interconnected world of skills."}),u&&E.jsxs("div",{className:`absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-full\r
                                            bg-blue-600 text-white text-sm px-4 py-2 rounded-lg shadow-lg\r
                                            z-20 transition-opacity duration-500 ease-in-out`,style:{opacity:u?1:0},children:[r,E.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-full w-0 h-0\r
                                                border-l-8 border-l-transparent border-r-8 border-r-transparent\r
                                                border-t-8 border-t-blue-600`})]})]}),E.jsx("div",{className:"flex-grow w-full order-2 md:order-1",children:E.jsx(ZC,{})})]}),E.jsx(JC,{}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10",children:b.map((R,x)=>E.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 flex flex-col items-center text-center cursor-pointer border border-gray-100",onClick:()=>s(R.page),children:[E.jsx("i",{className:`${R.icon} ${R.color} text-5xl mb-4 transform hover:rotate-6 transition-transform duration-300`}),E.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:R.name}),E.jsx("p",{className:"text-gray-600 text-md leading-relaxed",children:R.description}),E.jsxs("button",{className:"mt-4 text-blue-600 hover:text-blue-800 font-semibold flex items-center space-x-1",children:[E.jsx("span",{children:"Explore"})," ",E.jsx("i",{className:"fas fa-arrow-right text-sm"})]})]},x))}),E.jsxs("div",{className:"mt-12 text-center",children:[E.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Ready to get started?"}),E.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"Navigate through the sections above or click on a feature card to dive in!"}),E.jsxs("button",{onClick:()=>s("Chatbot"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center mx-auto space-x-2",children:[E.jsx("i",{className:"fas fa-arrow-right"}),E.jsx("span",{children:"Explore Features"})]})]})]})})},lN=()=>{const[s,e]=ae.useState("Home"),{userId:n,loadingAuth:r,authReady:o,db:u,userProfile:f}=Dn(),[m,p]=ae.useState(!1),[y,b]=ae.useState(null),[R,x]=ae.useState(""),P=lt(),G=async(F,Q)=>{if(!u||!n)return;const oe=Pt(u,`artifacts/${P}/users/${n}/unreadPrivateChats`,F);try{Q?await zl(oe,{hasUnread:!0,timestamp:It()},{merge:!0}):await fn(oe,{hasUnread:!1,timestamp:It()})}catch(re){console.error("Error updating unread status:",re)}},K=async(F,Q)=>{if(!u)return;const oe=Pt(u,`artifacts/${P}/users/${F}/unreadPrivateChats`,Q);try{await zl(oe,{hasUnread:!0,timestamp:It()},{merge:!0})}catch(re){console.error("Error setting unread status for recipient:",re)}};return ae.useEffect(()=>{if(!u||!n||!f)return;const F=Pt(u,`artifacts/${P}/public/data/userPresence`,n),Q=f.name||`User_${n.substring(0,8)}`,oe=async()=>{try{await zl(userDocRef,{userName:Q,lastActive:It(),isOnline:!0},{merge:!0})}catch(le){console.error("Error updating user presence:",le)}},re=setInterval(oe,1e4),he=()=>{n&&u&&fn(F,{isOnline:!1}).catch(le=>console.error("Error setting user offline on unload:",le))};return window.addEventListener("beforeunload",he),oe(),()=>{clearInterval(re),window.removeEventListener("beforeunload",he),n&&u&&fn(F,{isOnline:!1}).catch(le=>console.error("Error setting user offline on unmount:",le))}},[n,u,f,P]),r||!o?E.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:E.jsx("div",{className:"text-xl text-gray-700 animate-pulse",children:"Loading application..."})}):n?E.jsxs(E.Fragment,{children:[E.jsx(aN,{currentPage:s,setCurrentPage:e}),E.jsxs("main",{className:"flex-grow w-full px-4 pb-10 pt-24 sm:pt-28 lg:pt-32",children:[s==="Home"&&E.jsx(oN,{setCurrentPage:e}),s==="Chatbot"&&E.jsx(WC,{}),s==="SkillLibrary"&&E.jsx(eN,{}),s==="PersonalizationAI"&&E.jsx(tN,{}),s==="CommunityForum"&&E.jsx(rN,{setShowPrivateChat:p,setPrivateChatWithUserId:b,setPrivateChatWithUserName:x})]}),m&&y&&E.jsx(iN,{partnerUserId:y,partnerUserName:R,onClose:()=>{p(!1),b(null),x("")},onMarkRead:G,onSendMessage:K}),E.jsx("footer",{className:"w-full bg-gray-800 text-gray-300 py-6 text-center text-sm shadow-inner mt-auto",children:E.jsxs("p",{children:["© ",new Date().getFullYear()," Personalized Skill Developer. All rights reserved.",n&&E.jsxs("span",{className:"ml-4",children:["Current User ID: ",n]}),!n&&!r&&E.jsx("span",{className:"ml-4 text-red-400",children:"User not authenticated."}),r&&E.jsx("span",{className:"ml-4 text-gray-400",children:"Authenticating..."})]})})]}):E.jsx(XC,{})},uN=()=>{const s=`
        @keyframes slideUpForm {
            0% { transform: translateY(20px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        @keyframes bounce-in-fade-out {
            0% { opacity: 0; transform: translateY(50px); }
            20% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(50px); }
        }
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Custom scrollbar styles */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    `;return ae.useEffect(()=>{const e=document.createElement("script");return e.type="module",e.src="https://unpkg.com/@splinetool/viewer@1.10.2/build/spline-viewer.js",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),E.jsxs($C,{children:[E.jsx("style",{children:s}),E.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap",rel:"stylesheet"}),E.jsx("script",{src:"https://cdn.tailwindcss.com"}),E.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"}),E.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center font-inter",children:E.jsx(KC,{children:E.jsx(lN,{})})})]})};UA.createRoot(document.getElementById("root")).render(E.jsx(ae.StrictMode,{children:E.jsx(uN,{})}));
